registerChannelProviderLocal firstTime true
#
# Start at "2021-W21-May25-1400-51-CEST"
#
# Version information:
# European Spallation Source ERIC : iocsh.bash (3.4.0-PID-15635)
#
# --->--> snip -->--> 
# Please Use Version and other environment variables
# in order to report or debug this shell
#
# HOSTDISPLAY=""
# WINDOWID="16777394"
# PWD="/home/dev/sources/e3-7.0.5/ecat/e3-ecmccfg/ecmccfg-dev/examples/mcu1021_coupler_slitdemo"
# USER="dev"
# LOGNAME="dev"
# EPICS_HOST_ARCH="linux-x86_64"
# EPICS_BASE="/home/dev/epics/base-7.0.5"
# E3_REQUIRE_NAME="require"
# E3_REQUIRE_VERSION="3.4.0"
# E3_REQUIRE_LOCATION="/home/dev/epics/base-7.0.5/require/3.4.0"
# E3_REQUIRE_BIN="/home/dev/epics/base-7.0.5/require/3.4.0/bin"
# E3_REQUIRE_DB="/home/dev/epics/base-7.0.5/require/3.4.0/db"
# E3_REQUIRE_DBD="/home/dev/epics/base-7.0.5/require/3.4.0/dbd"
# E3_REQUIRE_INC="/home/dev/epics/base-7.0.5/require/3.4.0/include"
# E3_REQUIRE_LIB="/home/dev/epics/base-7.0.5/require/3.4.0/lib"
# EPICS_DRIVER_PATH="/home/dev/epics/base-7.0.5/require/3.4.0/siteMods:/home/dev/epics/base-7.0.5/require/3.4.0/siteApps"
# EPICS_CA_AUTO_ADDR_LIST=""
# EPICS_CA_ADDR_LIST=""
# PATH="/home/dev/epics/base-7.0.5/require/3.4.0/bin:/home/dev/epics/base-7.0.5/bin/linux-x86_64:/opt/conda/condabin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin:/home/dev/.local/bin:/home/dev/bin"
# --->--> snip -->--> 
#
# Set REQUIRE_IOC for its internal PVs
epicsEnvSet REQUIRE_IOC "REQMOD:mcag-trgt-muts--15635"
#
# Enable an exit subroutine for sotfioc
dbLoadRecords "/home/dev/epics/base-7.0.5/db/softIocExit.db" "IOC=REQMOD:mcag-trgt-muts--15635"
#
# Set E3_IOCSH_TOP for the absolute path where iocsh.bash is executed.
epicsEnvSet E3_IOCSH_TOP "/home/dev/sources/e3-7.0.5/ecat/e3-ecmccfg/ecmccfg-dev/examples/mcu1021_coupler_slitdemo"
#
# 
# Load require module, which has the version 3.4.0
# 
dlload /home/dev/epics/base-7.0.5/require/3.4.0/lib/linux-x86_64/librequire.so
dbLoadDatabase /home/dev/epics/base-7.0.5/require/3.4.0/dbd/require.dbd
require_registerRecordDeviceDriver
Loading module info records for require
# 
# Set E3_CMD_TOP for the absolute path where mcu1021_coupler.script exists
epicsEnvSet E3_CMD_TOP "/home/dev/sources/e3-7.0.5/ecat/e3-ecmccfg/ecmccfg-dev/examples/mcu1021_coupler_slitdemo"
#
iocshLoad 'mcu1021_coupler.script',''
##############################################################################
## Example config ESS crate of type MCU1021 with coupler instead of CPU
## Slit demo:
## Axis 1: Slit center position (virt)
## Axis 2: Slit gap/opening (virt)
## Axis 3: Right blade (normal)
## Axis 4: Left blade (normal)
## Axis 5: Timing (virt), connected to signal generator or timing system
## Axis 6: Amplitude
## Both gap and position are configuerd to oscillate in sinus. with freq.
## set by axis 5 and amplitude defined by axis 6.
##############################################################################
## Initiation:
epicsEnvSet("IOC" ,"IOC_TEST")
epicsEnvSet("ECMCCFG_INIT" ,"")  #Only run startup once (auto at PSI, need call at ESS), variable set to "#" in startup.cmd
epicsEnvSet("SCRIPTEXEC" ,"iocshLoad")
require ecmccfg develop
Module ecmccfg version develop found in /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/
Loading library /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/lib/linux-x86_64/libecmccfg.so
Loaded ecmccfg version develop
Loading dbd file /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/dbd/ecmccfg.dbd
Calling function ecmccfg_registerRecordDeviceDriver
Loading module info records for ecmccfg
# Epics Motor record driver that will be used:
epicsEnvShow(ECMC_MR_MODULE)
ECMC_MR_MODULE is not an environment variable.
# run module startup.cmd (only needed at ESS  PSI auto call at require)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/startup.cmd, "IOC=IOC_TEST,ECMC_VER=develop"
#==============================================================================
# startup.cmd
on error halt
require ecmc        "develop"
Module ecmc version develop found in /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmc/develop/
Module ecmc depends on asyn 4.41.0+0
Module asyn version 4.41.0+0 found in /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/asyn/4.41.0+0/
Loading library /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/asyn/4.41.0+0/lib/linux-x86_64/libasyn.so
Loaded asyn version 4.41.0+0
Loading dbd file /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/asyn/4.41.0+0/dbd/asyn.dbd
Calling function asyn_registerRecordDeviceDriver
Loading module info records for asyn
Module ecmc depends on exprtk 1.2.1+0
Module exprtk version 1.2.1+0 found in /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/exprtk/1.2.1+0/
Loading library /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/exprtk/1.2.1+0/lib/linux-x86_64/libexprtk.so
Loaded exprtk version 1.2.1+0
exprtk has no dbd file
Loading module info records for exprtk
Module ecmc depends on motor 7.0.4+0
Module motor version 7.0.4+0 found in /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/motor/7.0.4+0/
Module motor depends on asyn 4.41.0+0
Module asyn version 4.41.0+0 already loaded
Loading library /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/motor/7.0.4+0/lib/linux-x86_64/libmotor.so
Loaded motor version 7.0.4+0
Loading dbd file /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/motor/7.0.4+0/dbd/motor.dbd
Calling function motor_registerRecordDeviceDriver
Loading module info records for motor
Loading library /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmc/develop/lib/linux-x86_64/libecmc.so
Loaded ecmc version develop
Loading dbd file /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmc/develop/dbd/ecmc.dbd
Calling function ecmc_registerRecordDeviceDriver
Loading module info records for ecmc
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD, "'ecmcMotorRecord'='EthercatMC'", "require  EthercatMC 3.0.2 # Using EthercatMC motor record support.","# Using ecmcMotorRecord motor record support.")
# Using ecmcMotorRecord motor record support.
epicsEnvUnset(ECMC_EXE_CMD)
epicsEnvSet("ECMC_CONFIG_ROOT",     "/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/")
epicsEnvSet("ECMC_CONFIG_DB",       "/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/db/")
epicsEnvSet("SCRIPTEXEC",           "iocshLoad")
epicsEnvSet("SM_PREFIX",            "IOC_TEST:")    # colon added since IOC is _not_ PREFIX
epicsEnvSet("ECMC_PROC_HOOK",       "")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/initAll.cmd",1)
iocshLoad "/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/initAll.cmd"
#==============================================================================
# initAll.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/init.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/init.cmd
#==============================================================================
# init.cmd
epicsEnvSet("ECMC_ASYN_TIMEOUT",      1)                   # Asyn timeout
epicsEnvSet("ECMC_ASYN_ADDR",         0)                   # Asyn Address
epicsEnvSet("ECMC_MOTOR_PORT",        "NOT SET")
epicsEnvSet("ECMC_ASYN_PORT",         "NOT SET")
epicsEnvSet("ECMC_PREFIX",            "NOT SET")
epicsEnvSet("ECMC_GEN_EC_RECORDS",    "NOT SET")
epicsEnvSet("ECMC_GEN_AX_RECORDS",    "NOT SET")
epicsEnvSet("ECMC_EC_AXIS_HEALTH",    "NOT SET")
epicsEnvSet("ECMC_PLC_SAMPLE_RATE_MS", "NOT SET")
epicsEnvSet("ECMC_TSE",               -2)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/initAxis.cmd",1)
iocshLoad "/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/initAxis.cmd"
#==============================================================================
# initAxis.cmd
epicsEnvSet("ECMC_MOTOR_NAME",            "NOT SET")
epicsEnvSet("ECMC_R",                     "NOT SET")
epicsEnvSet("ECMC_AXIS_NO",               "NOT SET")
epicsEnvSet("ECMC_DESC",                  "NOT SET")
epicsEnvSet("ECMC_EGU",                   "NOT SET")       # Motor Record Unit
epicsEnvSet("ECMC_PREC",                  "NOT SET")       # Motor Record Precision
epicsEnvSet("ECMC_AXISCONFIG",            "NOT SET")       # Extra parameters to driver
epicsEnvSet("ECMC_EC_AXIS_HEALTH",        "NOT SET")       # Entry for axis health output (example: ec0.s1.BO_1.0)
epicsEnvSet("ECMC_ENC_SCALE_NUM",         "NOT SET")
epicsEnvSet("ECMC_ENC_SCALE_DENOM",       "NOT SET")
epicsEnvSet("ECMC_ENC_BITS",              "NOT SET")
epicsEnvSet("ECMC_ENC_TYPE",              "NOT SET")       # Type: 0=Incremental, 1=Absolute
epicsEnvSet("ECMC_EC_ENC_ACTPOS",         "NOT SET")       # Ethercat entry for actual position input (encoder)
epicsEnvSet("ECMC_ENC_ABS_BITS",          "NOT SET")       # Absolute bit count (for absolute encoders) always least significant part
epicsEnvSet("ECMC_ENC_ABS_OFFSET",        "NOT SET")       # Encoder offset in eng units (for absolute encoders)
epicsEnvSet("ECMC_EC_ENC_LATCHPOS",       "")              # Ethercat entry for latch position (only valid for home seq 11,12)
epicsEnvSet("ECMC_EC_ENC_LATCH_CONTROL",  "")              # Ethercat entry for latch control (only valid for home seq 11,12)
epicsEnvSet("ECMC_EC_ENC_LATCH_STATUS",   "")              # Ethercat entry for latch status (only valid for home seq 11,12)
epicsEnvSet("ECMC_DRV_SCALE_NUM",         "NOT SET")
epicsEnvSet("ECMC_DRV_SCALE_DENOM",       "NOT SET")
epicsEnvSet("ECMC_EC_DRV_CONTROL",        "NOT SET")       # Ethercat entry for control word or bit output
epicsEnvSet("ECMC_EC_DRV_STATUS",         "NOT SET")       # Ethercat entry for status word or bit input
epicsEnvSet("ECMC_EC_DRV_VELOCITY",       "NOT SET")       # Ethercat entry for velocity setpoint output
epicsEnvSet("ECMC_EC_DRV_BRAKE",          "NOT SET")       # Ethercat entry for brake output
epicsEnvSet("ECMC_EC_DRV_REDUCE_TORQUE",  "NOT SET")       # Ethercat entry for reduce torque output
epicsEnvSet("ECMC_DRV_BRAKE_OPEN_DLY_TIME",    "NOT SET")  # Brake timing parameter in cycles (default 1kHz)
epicsEnvSet("ECMC_DRV_BRAKE_CLOSE_AHEAD_TIME", "NOT SET")  # Brake timing parameter in cycles (default 1kHz)
epicsEnvSet("ECMC_VELO",                  "NOT SET")
epicsEnvSet("ECMC_JOG_VEL",               "NOT SET")
epicsEnvSet("ECMC_JAR",                   "NOT SET")       # JAR defaults to VELO/ACCL
epicsEnvSet("ECMC_ACCL",                  "NOT SET")
epicsEnvSet("ECMC_EMERG_DECEL",           "NOT SET")       # Emergency deceleration
epicsEnvSet("ECMC_HOME_PROC",              "NOT SET")
epicsEnvSet("ECMC_HOME_POS",               "NOT SET")
epicsEnvSet("ECMC_HOME_VEL_TO",            "NOT SET")
epicsEnvSet("ECMC_HOME_VEL_FRM",           "NOT SET")
epicsEnvSet("ECMC_HOME_ACC",               "NOT SET")
epicsEnvSet("ECMC_HOME_DEC",               "NOT SET")
epicsEnvSet("ECMC_HOME_LATCH_COUNT_OFFSET","0")
epicsEnvSet("ECMC_CNTRL_KP",              "NOT SET")
epicsEnvSet("ECMC_CNTRL_KI",              "NOT SET")
epicsEnvSet("ECMC_CNTRL_KD",              "NOT SET")
epicsEnvSet("ECMC_CNTRL_KFF",             "NOT SET")
epicsEnvSet("ECMC_EC_MON_LOWLIM",         "NOT SET")       #  Ethercat entry for low limit switch input
epicsEnvSet("ECMC_EC_MON_HIGHLIM",        "NOT SET")       #  Ethercat entry for high limit switch inpuit
epicsEnvSet("ECMC_EC_MON_HOME_SWITCH",    "NOT SET")       #  Ethercat entry for home switch input
epicsEnvSet("ECMC_EC_MON_EXT_INTERLOCK",  "NOT SET")       #  Ethercat entry for external interlock input
epicsEnvSet("ECMC_SOFT_LOW_LIM",          "NOT SET")
epicsEnvSet("ECMC_SOFT_HIGH_LIM",         "NOT SET")
epicsEnvSet("ECMC_DXLM_ENABLE",           "NOT SET")
epicsEnvSet("ECMC_MON_LAG_MON_TOL",       "NOT SET")
epicsEnvSet("ECMC_MON_LAG_MON_TIME",      "NOT SET")
epicsEnvSet("ECMC_MON_LAG_MON_ENA",       "NOT SET")
epicsEnvSet("ECMC_MON_AT_TARGET_TOL",     "NOT SET")
epicsEnvSet("ECMC_MON_AT_TARGET_TIME",    "NOT SET")
epicsEnvSet("ECMC_MON_AT_TARGET_ENA",     "NOT SET")
epicsEnvSet("ECMC_MON_VELO_MAX",          "NOT SET")
epicsEnvSet("ECMC_MON_VELO_MAX_TRAJ_TIME","NOT SET")
epicsEnvSet("ECMC_MON_VELO_MAX_DRV_TIME", "NOT SET")
epicsEnvSet("ECMC_MON_VELO_MAX_ENA",      "NOT SET")
epicsEnvSet("ECMC_EGU",               "mm")
epicsEnvSet("2021/05/25 14:00:51.290 
ECMC Initializes.............
2021/05/25 14:00:51.290 ESS Open Source EtherCAT Motion Control Epics Module2021/05/25 14:00:51.290 
Mode: Configuration
2021/05/25 14:00:51.290 OK
2021/05/25 14:00:51.290 OK
2021/05/25 14:00:51.290 OK
2021/05/25 14:00:51.290 OK
2021/05/25 14:00:51.290 OK
2021/05/25 14:00:51.290 OK
2021/05/25 14:00:51.291 OK
2021/05/25 14:00:51.291 OK
2021/05/25 14:00:51.291 OK
ECMC_PREC",              3)
epicsEnvSet("ECMC_AXISFIELDINIT",     "")                  # Extra field init to motor record
epicsEnvSet("ECMC_AXISCONFIG",        "")                  # Extra parameters to driver
############################################################
############# ASYN Configuration:
epicsEnvSet("ECMC_MOTOR_PORT"     "MCU1")
epicsEnvSet("ECMC_ASYN_PORT"      "MC_CPU1")
epicsEnvSet("ECMC_PREFIX"         "IOC_TEST:")
ecmcAsynPortDriverConfigure(MC_CPU1,1000,0,0,100)
ecmcAsynPortDriverConfigure: portName = MC_CPU1, paramTableSize = 1000, disableAutoConnect = 0, priority = 0, defaultSampleRateMS = 100.000000
asynOctetSetOutputEos(MC_CPU1, -1, ";\n")
asynOctetSetInputEos(MC_CPU1, -1, ";\n")
asynSetTraceMask(MC_CPU1, -1, 0x41)
asynSetTraceIOMask(MC_CPU1, -1, 6)
asynSetTraceInfoMask(MC_CPU1, -1, 1)
ecmcMotorRecordCreateController(MCU1, MC_CPU1, "64", 200, 1000, "")
############################################################
############# Misc settings:
# Disable function call trace printouts
ecmcConfigOrDie "Cfg.SetEnableFuncCallDiag(0)"
# Disable on change printouts from objects (enable for easy logging)
ecmcConfigOrDie "Cfg.SetTraceMaskBit(15,0)"
# Choose to generate EPICS-records for EtherCAT-entries
# (For records use ECMC_GEN_EC_RECORDS="-records" otherwise ECMC_GEN_EC_RECORDS="")
epicsEnvSet("ECMC_GEN_EC_RECORDS",          "-records")
# Choose to generate EPICS-records for ax-entries (PosAct, SetPos,..)
# (For records use ECMC_GEN_AX_RECORDS="-records" otherwise ECMC_GEN_AX_RECORDS="")
epicsEnvSet("ECMC_GEN_AX_RECORDS",          "-records")
# Update records in 10ms (100Hz)
epicsEnvSet("ECMC_SAMPLE_RATE_MS",       "10")
# Set EtherCAT frequency (defaults to 1000)
ecmcConfigOrDie "Cfg.SetSampleRate(1000)"
epicsEnvSet("ECMC_EC_SAMPLE_RATE" ,1000)
ecmcEpicsEnvSetCalcTernary(ECMC_MASTER_CMD, "0>=0", "","#- ")
 ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addMaster.cmd",1)
 iocshLoad "/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addMaster.cmd", "MASTER_ID=0"
#===============================================================================
# addMaster.cfg
epicsEnvSet("ECMC_EC_MASTER_ID"          "0")
# Claim master
ecmcConfigOrDie "Cfg.EcSetMaster(0)"
epicsEnvSet("ECMC_MASTER_ID" ,0)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/setDiagnostics.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/setDiagnostics.cmd
#==============================================================================
# setDiagnostics.cmd
ecmcConfigOrDie "Cfg.EcSetDiagnostics(1)"
ecmcConfigOrDie "Cfg.EcEnablePrintouts(0)"
ecmcConfigOrDie "Cfg.EcSetDomainFailedCyclesLimit(100)"
epicsEnvSet("ECMCCFG_INIT" ,"#")
##############################################################################
## Configure hardware:
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcMCU1021_coupler.cmd
############################################################
############# MCU1021:
#Configure EK1100 coupler terminal
epicsEnvSet(ECMC_EC_SLAVE_NUM,0)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd, "SLAVE_ID=0, HW_DESC=EK1100"
#==============================================================================
# addSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "0")
epicsEnvSet("HW_DESC",            "EK1100")
# add ${HW_DESC} to the bus at position ${SLAVE_ID}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEK1100.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEK1100.cmd "NELM=1"
epicsEnvSet("ECMC_EC_HWTYPE"             "EK1100")
epicsEnvSet("ECMC_EC_VENDOR_ID"          "0x2")
epicsEnvSet("ECMC_EC_PRODUCT_ID"         "0x044c2c52")
ecmcConfigOrDie "Cfg.EcSlaveVerify(0,0,0x2,0x044c2c52)"
ecmcConfigOrDie "Cfg.EcAddSlave(0,0,0x2,0x044c2c52)"
ecmcFileExist(ecmcEK1100.substitutions,1,1)
dbLoadTemplate(ecmcEK1100.substitutions,"P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,SLAVE_POS=0,HWTYPE=EK1100dbLoadTemplate: error opening sub file ecmcEK1100.substitutions
2021/05/25 14:00:51.291 OK
2021/05/25 14:00:51.292 OK
2021/05/25 14:00:51.292 OK
2021/05/25 14:00:51.292 OK
2021/05/25 14:00:51.292 OK
2021/05/25 14:00:51.292 OK
2021/05/25 14:00:51.292 OK
2021/05/25 14:00:51.292 OK
2021/05/25 14:00:51.292 OK
dbLoadTemplate: error opening sub file ecmcEL1018.substitutions
2021/05/25 14:00:51.293 OK
2021/05/25 14:00:51.293 OK
2021/05/25 14:00:51.293 OK
2021/05/25 14:00:51.293 OK
2021/05/25 14:00:51.293 OK
2021/05/25 14:00:51.293 OK
2021/05/25 14:00:51.293 OK
2021/05/25 14:00:51.293 OK
2021/05/25 14:00:51.293 OK
dbLoadTemplate: error opening sub file ecmcEL2808.substitutions
,T_SMP_MS=10,TSE=-2,NELM=1")
# increment SLAVE_ID
ecmcEpicsEnvSetCalc("SLAVE_ID", "0+1","%d")
#Configure EL1018 digital input terminal
ecmcEpicsEnvSetCalc(ECMC_EC_SLAVE_NUM, "0+1")
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd, "SLAVE_ID=1, HW_DESC=EL1018"
#==============================================================================
# addSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "1")
epicsEnvSet("HW_DESC",            "EL1018")
# add ${HW_DESC} to the bus at position ${SLAVE_ID}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL1018.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL1018.cmd "NELM=1"
epicsEnvSet("ECMC_EC_HWTYPE"             "EL1018")
epicsEnvSet("ECMC_EC_VENDOR_ID"          "0x2")
epicsEnvSet("ECMC_EC_PRODUCT_ID"         "0x03fa3052")
ecmcConfigOrDie "Cfg.EcSlaveVerify(0,1,0x2,0x03fa3052)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(1,0x2,0x03fa3052,2,0,0x1a00,0x6000,0x1,1,BI_1)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(1,0x2,0x03fa3052,2,0,0x1a01,0x6010,0x1,1,BI_2)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(1,0x2,0x03fa3052,2,0,0x1a02,0x6020,0x1,1,BI_3)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(1,0x2,0x03fa3052,2,0,0x1a03,0x6030,0x1,1,BI_4)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(1,0x2,0x03fa3052,2,0,0x1a04,0x6040,0x1,1,BI_5)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(1,0x2,0x03fa3052,2,0,0x1a05,0x6050,0x1,1,BI_6)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(1,0x2,0x03fa3052,2,0,0x1a06,0x6060,0x1,1,BI_7)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(1,0x2,0x03fa3052,2,0,0x1a07,0x6070,0x1,1,BI_8)"
ecmcFileExist(ecmcEL1018.substitutions,1,1)
dbLoadTemplate(ecmcEL1018.substitutions,"P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,SLAVE_POS=1,HWTYPE=EL1018,T_SMP_MS=10,TSE=-2,NELM=1")
# increment SLAVE_ID
ecmcEpicsEnvSetCalc("SLAVE_ID", "1+1","%d")
#Configure EL2808 digital output terminal
ecmcEpicsEnvSetCalc(ECMC_EC_SLAVE_NUM, "1+1")
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd, "SLAVE_ID=2, HW_DESC=EL2808"
#==============================================================================
# addSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "2")
epicsEnvSet("HW_DESC",            "EL2808")
# add ${HW_DESC} to the bus at position ${SLAVE_ID}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL2808.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL2808.cmd "NELM=1"
epicsEnvSet("ECMC_EC_HWTYPE"             "EL2808")
epicsEnvSet("ECMC_EC_VENDOR_ID"          "0x2")
epicsEnvSet("ECMC_EC_PRODUCT_ID"         "0x0af83052")
ecmcConfigOrDie "Cfg.EcSlaveVerify(0,2,0x2,0x0af83052)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(2,0x2,0x0af83052,1,0,0x1600,0x7000,0x1,1,BO_1)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(2,0x2,0x0af83052,1,0,0x1601,0x7010,0x1,1,BO_2)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(2,0x2,0x0af83052,1,0,0x1602,0x7020,0x1,1,BO_3)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(2,0x2,0x0af83052,1,0,0x1603,0x7030,0x1,1,BO_4)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(2,0x2,0x0af83052,1,0,0x1604,0x7040,0x1,1,BO_5)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(2,0x2,0x0af83052,1,0,0x1605,0x7050,0x1,1,BO_6)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(2,0x2,0x0af83052,1,0,0x1606,0x7060,0x1,1,BO_7)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(2,0x2,0x0af83052,1,0,0x1607,0x7070,0x1,1,BO_8)"
ecmcFileExist(ecmcEL2808.substitutions,1,1)
dbLoadTemplate(ecmcEL2808.substitutions,"P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,SLAVE_POS=2,HWTYPE=EL2808,T_SMP_MS=10,TSE=-2,NELM=1")
# increment SLAVE_ID
ecmcEpicsEnvSetCalc("SLAVE_ID", "2+1","%d")
# Save the slave number for later
epicsEnvSet("ECMC_EC_SLAVE_NUM_DIG_OUT", "2")
#Configure EL5101 Incremental Encoder Interface
ecmcEpicsEnvSetCalc(ECMC_EC_SLAVE_NUM, "2+1")
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd, "SLAVE_ID=3, HW_DESC=EL5101"
#==============================================================================
# addSlave.c2021/05/25 14:00:51.294 OK
2021/05/25 14:00:51.294 OK
2021/05/25 14:00:51.294 OK
2021/05/25 14:00:51.294 OK
2021/05/25 14:00:51.294 OK
2021/05/25 14:00:51.294 OK
dbLoadTemplate: error opening sub file ecmcEL5101.substitutions
2021/05/25 14:00:51.295 OK
2021/05/25 14:00:51.295 OK
2021/05/25 14:00:51.295 OK
2021/05/25 14:00:51.295 OK
2021/05/25 14:00:51.295 OK
2021/05/25 14:00:51.295 OK
dbLoadTemplate: error opening sub file ecmcEL5101.substitutions
2021/05/25 14:00:51.296 OK
2021/05/25 14:00:51.296 OK
2021/05/25 14:00:51.296 OK
md
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "3")
epicsEnvSet("HW_DESC",            "EL5101")
# add ${HW_DESC} to the bus at position ${SLAVE_ID}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL5101.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL5101.cmd "NELM=1"
epicsEnvSet("ECMC_EC_HWTYPE"             "EL5101")
epicsEnvSet("ECMC_EC_VENDOR_ID"          "0x2")
epicsEnvSet("ECMC_EC_PRODUCT_ID"         "0x13ed3052")
ecmcConfigOrDie "Cfg.EcSlaveVerify(0,3,0x2,0x13ed3052)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(3,0x2,0x13ed3052,1,2,0x1600,0x7000,0x01,8,ENC_CONTROL)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(3,0x2,0x13ed3052,1,2,0x1600,0x7000,0x02,16,VALUE)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(3,0x2,0x13ed3052,2,3,0x1a03,0x6010,0x00,16,ENC_STATUS)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(3,0x2,0x13ed3052,2,3,0x1a03,0x6010,0x10,16,POSITION)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(3,0x2,0x13ed3052,2,3,0x1a03,0x6010,0x20,16,LATCH_POSITION)"
ecmcFileExist(ecmcEL5101.substitutions,1,1)
dbLoadTemplate(ecmcEL5101.substitutions,"P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,SLAVE_POS=3,HWTYPE=EL5101,T_SMP_MS=10,TSE=-2,NELM=1")
# increment SLAVE_ID
ecmcEpicsEnvSetCalc("SLAVE_ID", "3+1","%d")
#Configure EL5101 Incremental Encoder Interface
ecmcEpicsEnvSetCalc(ECMC_EC_SLAVE_NUM, "3+1")
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd, "SLAVE_ID=4, HW_DESC=EL5101"
#==============================================================================
# addSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "4")
epicsEnvSet("HW_DESC",            "EL5101")
# add ${HW_DESC} to the bus at position ${SLAVE_ID}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL5101.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL5101.cmd "NELM=1"
epicsEnvSet("ECMC_EC_HWTYPE"             "EL5101")
epicsEnvSet("ECMC_EC_VENDOR_ID"          "0x2")
epicsEnvSet("ECMC_EC_PRODUCT_ID"         "0x13ed3052")
ecmcConfigOrDie "Cfg.EcSlaveVerify(0,4,0x2,0x13ed3052)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(4,0x2,0x13ed3052,1,2,0x1600,0x7000,0x01,8,ENC_CONTROL)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(4,0x2,0x13ed3052,1,2,0x1600,0x7000,0x02,16,VALUE)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(4,0x2,0x13ed3052,2,3,0x1a03,0x6010,0x00,16,ENC_STATUS)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(4,0x2,0x13ed3052,2,3,0x1a03,0x6010,0x10,16,POSITION)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(4,0x2,0x13ed3052,2,3,0x1a03,0x6010,0x20,16,LATCH_POSITION)"
ecmcFileExist(ecmcEL5101.substitutions,1,1)
dbLoadTemplate(ecmcEL5101.substitutions,"P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,SLAVE_POS=4,HWTYPE=EL5101,T_SMP_MS=10,TSE=-2,NELM=1")
# increment SLAVE_ID
ecmcEpicsEnvSetCalc("SLAVE_ID", "4+1","%d")
# Configure EL9505 Power supply terminal 5V
ecmcEpicsEnvSetCalc(ECMC_EC_SLAVE_NUM, "4+1")
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd, "SLAVE_ID=5, HW_DESC=EL9505"
#==============================================================================
# addSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "5")
epicsEnvSet("HW_DESC",            "EL9505")
# add ${HW_DESC} to the bus at position ${SLAVE_ID}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL9505.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL9505.cmd "NELM=1"
epicsEnvSet("ECMC_EC_HWTYPE"             "EL9505")
epicsEnvSet("ECMC_EC_VENDOR_ID"          "0x2")
epicsEnvSet("ECMC_EC_PRODUCT_ID"         "0x25213052")
ecmcConfigOrDie "Cfg.EcSlaveVerify(0,5,0x2,0x25213052)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(5,0x2,0x25213052,2,0,0x1a00,0x6000,0x1,1,POWER_OK)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(5,0x2,0x25213052,2,0,0x1a00,0x6000,0x2,1,OVERLOAD)"
ecmcFileExist(ecmcEL9505.substitutions,1,1)
dbLoadTemplate(ecmcEL9505.substitutions,"P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,SLAVE_POS=5,HWTYPE=EL9505,T_SMP_MS=10,TSE=-2,NELM=1")dbLoadTemplate: error opening sub file ecmcEL9505.substitutions
2021/05/25 14:00:51.297 OK
2021/05/25 14:00:51.297 OK
2021/05/25 14:00:51.297 OK
2021/05/25 14:00:51.297 OK
2021/05/25 14:00:51.297 OK
2021/05/25 14:00:51.297 OK
2021/05/25 14:00:51.297 OK
2021/05/25 14:00:51.297 OK
2021/05/25 14:00:51.297 OK
dbLoadTemplate: error opening sub file ecmcEL1252.substitutions
2021/05/25 14:00:51.298 OK
2021/05/25 14:00:51.356 OK
2021/05/25 14:00:51.356 OK
2021/05/25 14:00:51.356 OK
2021/05/25 14:00:51.357 OK
2021/05/25 14:00:51.357 OK
2021/05/25 14:00:51.357 OK
2021/05/25 14:00:51.357 OK

# increment SLAVE_ID
ecmcEpicsEnvSetCalc("SLAVE_ID", "5+1","%d")
# Configure EL1252 digital input terminal
ecmcEpicsEnvSetCalc(ECMC_EC_SLAVE_NUM, "5+1")
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd, "SLAVE_ID=6, HW_DESC=EL1252"
#==============================================================================
# addSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "6")
epicsEnvSet("HW_DESC",            "EL1252")
# add ${HW_DESC} to the bus at position ${SLAVE_ID}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL1252.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL1252.cmd "NELM=1"
epicsEnvSet("ECMC_EC_HWTYPE"             "EL1252")
epicsEnvSet("ECMC_EC_VENDOR_ID"          "0x2")
epicsEnvSet("ECMC_EC_PRODUCT_ID"         "0x04e43052")
ecmcConfigOrDie "Cfg.EcSlaveVerify(0,6,0x2,0x04e43052)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(6,0x2,0x04e43052,2,0,0x1a00,0x6000,0x1,1,BI_1)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(6,0x2,0x04e43052,2,0,0x1a01,0x6000,0x2,1,BI_2)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(6,0x2,0x04e43052,2,1,0x1a13,0x1d09,0xae,8,CH1_STATUS)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(6,0x2,0x04e43052,2,1,0x1a13,0x1d09,0xaf,8,CH2_STATUS)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(6,0x2,0x04e43052,2,1,0x1a13,0x1d09,0xb0,64,CH1_LATCH_POS)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(6,0x2,0x04e43052,2,1,0x1a13,0x1d09,0xb8,64,CH1_LATCH_NEG)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(6,0x2,0x04e43052,2,1,0x1a13,0x1d09,0xc0,64,CH2_LATCH_POS)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(6,0x2,0x04e43052,2,1,0x1a13,0x1d09,0xc0,64,CH2_LATCH_NEG)"
ecmcFileExist(ecmcEL1252.substitutions,1,1)
dbLoadTemplate(ecmcEL1252.substitutions,"P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,SLAVE_POS=6,HWTYPE=EL1252,T_SMP_MS=10,TSE=-2,NELM=1")
# increment SLAVE_ID
ecmcEpicsEnvSetCalc("SLAVE_ID", "6+1","%d")
# Configure EL9410 Power supply with refresh of E-Bus.
ecmcEpicsEnvSetCalc(ECMC_EC_SLAVE_NUM, "6+1")
#${SCRIPTEXEC} ${ecmccfg_DIR}addSlave.cmd, "SLAVE_ID=${ECMC_EC_SLAVE_NUM}, HW_DESC=EL9410"
#Configure EL7037 stepper drive terminal, motor 1
ecmcEpicsEnvSetCalc(ECMC_EC_SLAVE_NUM, "7+1")
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/configureSlave.cmd, "SLAVE_ID=8, HW_DESC=EL7037, CONFIG=-Motor-Nanotec-ST4118L1804-B"
#==============================================================================
# configureSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "8")
epicsEnvSet("HW_DESC",            "EL7037")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd "SLAVE_ID=8, HW_DESC=EL7037, NELM=1"
#==============================================================================
# addSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "8")
epicsEnvSet("HW_DESC",            "EL7037")
# add ${HW_DESC} to the bus at position ${SLAVE_ID}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL7037.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL7037.cmd "NELM=1"
epicsEnvSet("ECMC_EC_HWTYPE"             "EL7037")
epicsEnvSet("ECMC_EC_VENDOR_ID"          "0x2")
epicsEnvSet("ECMC_EC_PRODUCT_ID"         "0x1b7d3052")
ecmcConfigOrDie "Cfg.EcSlaveVerify(0,8,0x2,0x1b7d3052)"
ecmcConfigOrDie "Cfg.EcWriteSdo(8,0x1011,0x1,1684107116,4)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(8,0x2,0x1b7d3052,1,2,0x1600,0x7000,0x01,16,ENC_CONTROL)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(8,0x2,0x1b7d3052,1,2,0x1600,0x7000,0x11,16,VALUE)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(8,0x2,0x1b7d3052,1,2,0x1602,0x7010,0x1,16,STM_CONTROL)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(8,0x2,0x1b7d3052,1,2,0x1604,0x7010,0x21,16,1,VELOCITY_SETPOINT)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(8,0x2,0x1b7d3052,2,3,0x1a00,0x6000,0x0,16,ENC_STATUS)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(8,0x2,0x1b7d3052,2,3,0x1a00,0x6000,0x11,16,POSITION)"
ecmcConfigOrDie "Cfg.EcAddE2021/05/25 14:00:51.357 OK
2021/05/25 14:00:51.357 OK
2021/05/25 14:00:51.357 OK
2021/05/25 14:00:51.357 OK
2021/05/25 14:00:51.357 OK
2021/05/25 14:00:51.357 OK
dbLoadTemplate: error opening sub file ecmcEL7037.substitutions
2021/05/25 14:00:51.358 OK
2021/05/25 14:00:51.358 OK
2021/05/25 14:00:51.358 OK
2021/05/25 14:00:51.358 OK
2021/05/25 14:00:51.358 OK
2021/05/25 14:00:51.358 OK
2021/05/25 14:00:51.359 OK
ntryComplete(8,0x2,0x1b7d3052,2,3,0x1a00,0x6000,0x12,16,LATCH_POSITION)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(8,0x2,0x1b7d3052,2,3,0x1a03,0x6010,0x1,16,STM_STATUS)"
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8012,0x5,1,1)"
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8012,0xA,1,1)"
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8012,0x8,1,1)"
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8012,0x9,0,1)"
ecmcFileExist(ecmcEL7037.substitutions,1,1)
dbLoadTemplate(ecmcEL7037.substitutions,"P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,SLAVE_POS=8,HWTYPE=EL7037,T_SMP_MS=10,TSE=-2,NELM=1")
# increment SLAVE_ID
ecmcEpicsEnvSetCalc("SLAVE_ID", "8+1","%d")
# apply config ${CONFIG} for ${HW_DESC}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL7037-Motor-Nanotec-ST4118L1804-B.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL7037-Motor-Nanotec-ST4118L1804-B.cmd ""
epicsEnvSet(I_MAX_MA_LOCAL,"1500")
epicsEnvSet(I_RUN_MA_LOCAL,1000)
epicsEnvSet(I_STDBY_MA_LOCAL,500)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/chkValidCurrentSetOrDie.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/chkValidCurrentSetOrDie.cmd "I_RUN_MA=1000,I_STDBY_MA=500,I_MAX_MA=1500"
#==============================================================================
# chkValidCurrentSetOrDie.cmd
# Ensure running current is below max current otherwise exit
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD, "1000>1500 or 1000<=0", "ecmcExit Error: Run current setpoint to high or negative...","# Run current setting OK (1000)...")
# Result: 
# Run current setting OK (1000)...
epicsEnvUnset(ECMC_EXE_CMD)
# Ensure standby current is below max current otherwise exit
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD, "500>1500 or 500<0", "ecmcExit Error: Standby current setpoint to high or negative...","# Standby current setting OK (500)...")
# Result: 
# Standby current setting OK (500)...
epicsEnvUnset(ECMC_EXE_CMD)
# Ensure standby current is below run current otherwise exit
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD, "500>1000", "ecmcExit Error: Standby current higher than run current...","# Standby current and run current setting OK (500<1000)...")
# Result: 
# Standby current and run current setting OK (500<1000)...
epicsEnvUnset(ECMC_EXE_CMD)
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8010,0x1,1000,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8010,0x2,500,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8010,0x3,2400,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8010,0x4,175,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8010,0x6,200,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(8,0x8010,0xA,330,2)"
epicsEnvUnset("I_RUN_MA_LOCAL")
epicsEnvUnset("I_STDBY_MA_LOCAL")
epicsEnvUnset("I_MAX_MA_LOCAL")
#Configure EL7037 stepper drive terminal, motor 2
ecmcEpicsEnvSetCalc(ECMC_EC_SLAVE_NUM, "8+1")
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/configureSlave.cmd, "SLAVE_ID=9, HW_DESC=EL7037, CONFIG=-Motor-Nanotec-ST4118L1804-B"
#==============================================================================
# configureSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "9")
epicsEnvSet("HW_DESC",            "EL7037")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addSlave.cmd "SLAVE_ID=9, HW_DESC=EL7037, NELM=1"
#==============================================================================
# addSlave.cmd
epicsEnvSet("ECMC_EC_SLAVE_NUM",  "9")
epicsEnvSet("HW_DESC",            "EL7037")
# add ${HW_DESC} to the bus at position ${SLAVE_ID}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL7037.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL7037.cmd "NELM=1"
epicsEnvSet("ECMC_EC_HWTYPE"             "EL7037")
epicsEnvSet("ECMC_EC_VENDOR_ID"          "0x2")
epicsEnvSet("ECMC_EC_PRODUCT_ID"         "0x1b7d3052")
ecmcConfigOrDie "Cfg.EcSlaveVerify(0,9,0x2,0x1b7d3052)"
ecmcConfigOrDie "Cfg.EcWriteSdo(9,0x1011,0x1,1684107116,2021/05/25 14:00:51.416 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
2021/05/25 14:00:51.417 OK
dbLoadTemplate: error opening sub file ecmcEL7037.substitutions
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.418 OK
2021/05/25 14:00:51.419 OK
4)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(9,0x2,0x1b7d3052,1,2,0x1600,0x7000,0x01,16,ENC_CONTROL)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(9,0x2,0x1b7d3052,1,2,0x1600,0x7000,0x11,16,VALUE)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(9,0x2,0x1b7d3052,1,2,0x1602,0x7010,0x1,16,STM_CONTROL)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(9,0x2,0x1b7d3052,1,2,0x1604,0x7010,0x21,16,1,VELOCITY_SETPOINT)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(9,0x2,0x1b7d3052,2,3,0x1a00,0x6000,0x0,16,ENC_STATUS)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(9,0x2,0x1b7d3052,2,3,0x1a00,0x6000,0x11,16,POSITION)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(9,0x2,0x1b7d3052,2,3,0x1a00,0x6000,0x12,16,LATCH_POSITION)"
ecmcConfigOrDie "Cfg.EcAddEntryComplete(9,0x2,0x1b7d3052,2,3,0x1a03,0x6010,0x1,16,STM_STATUS)"
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8012,0x5,1,1)"
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8012,0xA,1,1)"
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8012,0x8,1,1)"
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8012,0x9,0,1)"
ecmcFileExist(ecmcEL7037.substitutions,1,1)
dbLoadTemplate(ecmcEL7037.substitutions,"P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,SLAVE_POS=9,HWTYPE=EL7037,T_SMP_MS=10,TSE=-2,NELM=1")
# increment SLAVE_ID
ecmcEpicsEnvSetCalc("SLAVE_ID", "9+1","%d")
# apply config ${CONFIG} for ${HW_DESC}
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL7037-Motor-Nanotec-ST4118L1804-B.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmcEL7037-Motor-Nanotec-ST4118L1804-B.cmd ""
epicsEnvSet(I_MAX_MA_LOCAL,"1500")
epicsEnvSet(I_RUN_MA_LOCAL,1000)
epicsEnvSet(I_STDBY_MA_LOCAL,500)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/chkValidCurrentSetOrDie.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/chkValidCurrentSetOrDie.cmd "I_RUN_MA=1000,I_STDBY_MA=500,I_MAX_MA=1500"
#==============================================================================
# chkValidCurrentSetOrDie.cmd
# Ensure running current is below max current otherwise exit
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD, "1000>1500 or 1000<=0", "ecmcExit Error: Run current setpoint to high or negative...","# Run current setting OK (1000)...")
# Result: 
# Run current setting OK (1000)...
epicsEnvUnset(ECMC_EXE_CMD)
# Ensure standby current is below max current otherwise exit
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD, "500>1500 or 500<0", "ecmcExit Error: Standby current setpoint to high or negative...","# Standby current setting OK (500)...")
# Result: 
# Standby current setting OK (500)...
epicsEnvUnset(ECMC_EXE_CMD)
# Ensure standby current is below run current otherwise exit
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD, "500>1000", "ecmcExit Error: Standby current higher than run current...","# Standby current and run current setting OK (500<1000)...")
# Result: 
# Standby current and run current setting OK (500<1000)...
epicsEnvUnset(ECMC_EXE_CMD)
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8010,0x1,1000,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8010,0x2,500,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8010,0x3,2400,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8010,0x4,175,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8010,0x6,200,2)"
ecmcConfigOrDie "Cfg.EcAddSdo(9,0x8010,0xA,330,2)"
epicsEnvUnset("I_RUN_MA_LOCAL")
epicsEnvUnset("I_STDBY_MA_LOCAL")
epicsEnvUnset("I_MAX_MA_LOCAL")
#Apply hardware configuration
ecmcConfigOrDie "Cfg.EcApplyConfig(1)"
# ADDITIONAL SETUP
# Set all outputs to feed switches
ecmcConfigOrDie "Cfg.WriteEcEntryIDString(2,BO_1,1)"
ecmcConfigOrDie "Cfg.WriteEcEntryIDString(2,BO_2,1)"
ecmcConfigOrDie "Cfg.WriteEcEntryIDString(2,BO_3,1)"
ecmcConfigOrDie "Cfg.WriteEcEntryIDString(2,BO_4,1)"
ecmcConfigOrDie "Cfg.WriteEcEntryIDString(2,BO_5,1)"
ecmcConfigOrDie "Cfg.WriteEcEntryIDString(2,BO_6,1)"
ecmcConfigOrDie "Cfg.WriteEcEntryIDString(2,BO_7,1)"
ecmcConfigOrDie "Cfg.WriteEcEntryIDString(2,BO_8,1)"
# END of ADDITIONAL SETUP
##############################################################################
## AXIS 3 (physical right motor)
#
epicsEnvSet("DEV",      "IOC_TEST")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/configureAxis.cmd, CONFIG=./cfg/linear_3.ax)
#==============================================================================
# configureAxis.cmd
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
ecmcFileExist("./cfg/linear_3.ax",1)
iocshLoad ./cfg/linear_3.ax ""
#General
epicsEnvSet("ECMC_MOTOR_NAME",            "Axis3")
epicsEnvSet("ECMC_R",                     "Axis3-")
epicsEnvSet("ECMC_AXIS_NO",               "3")
epicsEnvSet("ECMC_DESC",                  "MCU1021 Lower Axis (3)")
epicsEnvSet("ECMC_EGU",                   "mm")                        # Motor Record Unit
epicsEnvSet("ECMC_PREC",                  "3")                         # Motor Record Precision
epicsEnvSet("ECMC_AXISCONFIG",            "")                          # Extra parameters to driver
epicsEnvSet("ECMC_EC_AXIS_HEALTH",        "")                          # Entry for axis health output (example: ec0.s1.BO_1.0)
epicsEnvSet("ECMC_MOD_RANGE" ,            "0")                        # Modulo range (traj setpoints and encoder values will be in range 0..ECMC_MOD_RANGE)
epicsEnvSet("ECMC_MOD_TYPE",              "0")                        # For positioning and MOD_RANGE>0: 0 = Normal, 1 = Always Fwd, 2 = Always Bwd, 3 = Closest Distance
#Encoder
epicsEnvSet("ECMC_ENC_SCALE_NUM"          "-60")
epicsEnvSet("ECMC_ENC_SCALE_DENOM"        "2000")
epicsEnvSet("ECMC_ENC_TYPE"               "0")                        # Type: 0=Incremental, 1=Absolute
epicsEnvSet("ECMC_ENC_BITS"               "16")                       # Total bit count of encoder raw data
epicsEnvSet("ECMC_ENC_ABS_BITS",          "0")                        # Absolute bit count (for absolute encoders) always least significant part of ECMC_ENC_BITS
epicsEnvSet("ECMC_ENC_ABS_OFFSET"         "0")                        # Encoder offset in eng units (for absolute encoders)
epicsEnvSet("ECMC_EC_ENC_ACTPOS",         "ec0.s3.POSITION")           # Ethercat entry for actual position input (encoder)
#Drive
epicsEnvSet("ECMC_DRV_TYPE"               "0")                         # Stepper: 0. DS402: 1 (DS402 = servos and advanced stepper drives)
epicsEnvSet("ECMC_DRV_SCALE_NUM"          "600.0")                     # Fastest speed in engineering units
epicsEnvSet("ECMC_DRV_SCALE_DENOM"        "32768.0")                   # I/O range for ECMC_EC_ALIAS_DRV_VELO_SET
epicsEnvSet("ECMC_EC_DRV_CONTROL",        "ec0.s8.STM_CONTROL.0")      # Ethercat entry for control word or bit output
epicsEnvSet("ECMC_EC_DRV_STATUS",         "ec0.s8.STM_STATUS.1")       # Ethercat entry for status word or bit input
epicsEnvSet("ECMC_EC_DRV_VELOCITY",       "ec0.s8.VELOCITY_SETPOINT")  # Ethercat entry for velocity setpoint output
epicsEnvSet("ECMC_EC_DRV_REDUCE_TORQUE",  "ec0.s8.STM_CONTROL.2")      # Ethercat entry for reduce torque output
epicsEnvSet("ECMC_EC_DRV_BRAKE",          "")                          # Ethercat entry for brake output
epicsEnvSet("ECMC_DRV_BRAKE_OPEN_DLY_TIME",    "0")                    # Brake timing parameter in cycles (default 1kHz)
epicsEnvSet("ECMC_DRV_BRAKE_CLOSE_AHEAD_TIME", "0")                    # Brake timing parameter in cycles (default 1kHz)
#Trajectory
epicsEnvSet("ECMC_VELO",                  "10.0")
epicsEnvSet("ECMC_JOG_VEL",               "5")
epicsEnvSet("ECMC_JAR",                   "0.0")                       # JAR defaults to VELO/ACCL
epicsEnvSet("ECMC_ACCL",                  "0.1")
epicsEnvSet("ECMC_EMERG_DECEL",           "0.1")              # Emergency deceleration
#Homing
epicsEnvSet("ECMC_HOME_PROC",             "3")
epicsEnvSet("ECMC_HOME_POS",              "0.0")
epicsEnvSet("ECMC_HOME_VEL_TO",           "5")
epicsEnvSet("ECMC_HOME_VEL_FRM",          "4")
epicsEnvSet("ECMC_HOME_ACC",              "21")
epicsEnvSet("ECMC_HOME_DEC",              "100")
#Controller
epicsEnvSet("ECMC_CNTRL_KP",              "15.0")
epicsEnvSet("ECMC_CNTRL_KI",              "0.02")
epicsEnvSet("ECMC_CNTRL_KD",              "0.0")
epicsEnvSet("ECMC_CNTRL_KFF",             "1.0")
#Monitoring
# Switches
epicsEnvSet("ECMC_EC_MON_LOWLIM",         "ec0.s1.BI_2.0")           #  Ethercat entry for low limit switch input
epicsEnvSet("ECMC_EC_MON_HIGHLIM",        "ec0.s1.BI_1.0")           #  Ethercat entry for high limit switch inpuit
epicsEnvSet("ECMC_EC_MON_HOME_SWITCH",    "ec0.s1.BI_3.0")           #  Ethercat entry for home switch input
epicsEnvSet("ECMC_EC_MON_EXT_INTERLOCK",  "ec0.s1.ONE.0")               #  Ethercat entry for external interlock input
# Softlimits (disable with 0,0,0)
epicsEnvSet("ECMC_SOFT_LOW_LIM",          "-20")
epicsEnvSet("ECMC_SOFT_HIGH_LIM",         "130")
epicsEnvSet("ECMC_DXLM_ENABLE",           "1")
# Position lag
epicsEnvSet("ECMC_MON_LAG_MON_TOL",       "1.0")
epicsEnvSet("ECMC_MON_LAG_MON_TIME",      "10")
epicsEnvSet("ECMC_MON_LAG_MON_ENA",       "1")
# At target
epicsEnvSet("ECMC_MON_AT_TARGET_TOL",     "0.1")
epicsEnvSet("ECMC_MON_AT_TARGET_TIME",     "100")
epicsEnvSet("ECMC_MON_AT_TARGET_ENA",     "1")
# Velocity
epicsEnvSet("ECMC_MON_VELO_MAX",          "100.0")
epicsEnvSet("ECMC_MON_VELO_MAX_TRAJ_TIME","100")
epicsEnvSet("ECMC_MON_VELO_MAX_DRV_TIME", "200")
epicsEnvSet("ECMC_MON_VELO_MAX_ENA",      "1")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addAxis.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addAxis.cmd
#==============================================================================
# addAxis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis-records.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis-records.cmd
#==============================================================================
# ecmc_axis-records.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis.cmd
#==============================================================================
# ecmc_axis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(-60)<>0',SUCCESS_STR='ECMC_ENC_SCALE_NUM value OK == -60...',ERROR_STR='ECMC_ENC_SCALE_NUM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(-60)<>0","# ECMC_ENC_SCALE_NUM value OK == -60...", "ecmcExit Error: ECMC_ENC_SCALE_NUM == 0...")
# ECMC_ENC_SCALE_NUM value OK == -60...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(2000)<>0',SUCCESS_STR='ECMC_ENC_SCALE_DENOM value OK == 2000...',ERROR_STR='ECMC_ENC_SCALE_DENOM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(2000)<>0","# ECMC_ENC_SCALE_DENOM value OK == 2000...", "ecmcExit Error: ECMC_ENC_SCALE_DENOM == 0...")
# ECMC_ENC_SCALE_DENOM value OK == 2000...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(600.0)<>0',SUCCESS_STR='ECMC_DRV_SCALE_NUM value OK == 600.0...',ERROR_STR='ECMC_DRV_SCALE_NUM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(600.0)<>0","# ECMC_DRV_SCALE_NUM value OK == 600.0...", "ecmcExit Error: ECMC_DRV_SCALE_NUM == 0...")
# ECMC_DRV_SCALE_NUM value OK == 600.0...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(32768.0)<>0',SUCCESS_STR='ECMC_DRV_SCALE_DENOM value OK == 32768.0...',ERROR_STR='ECMC_DRV_SCALE_DENOM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(32768.0)<>0","# ECMC_DRV_SCALE_DENOM value OK == 32768.0...", "e2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.421 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 OK
2021/05/25 14:00:51.422 ecmcMotorRecord:: setIntegerParam(3 motorPowerAutoOnOff_)=2
2021/05/25 14:00:51.422 ecmcMotorRecord:: setDoubleParam(3 motorPowerOnDelay_)=6
2021/05/25 14:00:51.422 ecmcMotorRecord:: setDoubleParam(3 motorPowerOffDelay_=-1
2021/05/25 14:00:51.422 ecmcMotorRecord:: udateMotorLimitsRO(3) enabledHighAndLow=1 valid=1 fValueHigh=130 fValueLow=-20
2021/05/25 14:00:51.422 ecmcMotorRecord:: connected(3)
2021/05/25 14:00:51.422 ecmcMotorRecord:: initialPoll(3) status=0
cmcExit Error: ECMC_DRV_SCALE_DENOM == 0...")
# ECMC_DRV_SCALE_DENOM value OK == 32768.0...
epicsEnvUnset(ECMC_EXE_CMD)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd "EXPR_STR='-1>0',WARNING_STR='WARNING: ECMC_MRES setting is deprecated and will not be used. (MRES will be calulated instead: ECMC_ENC_SCALE_NUM/ECMC_ENC_SCALE_DENOM).. '"
#==============================================================================
# issueWarning.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"-1>0","", "#-")
epicsEnvUnset(ECMC_EXE_CMD)
ecmcConfigOrDie "Cfg.CreateAxis(3,1,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax3.health")"
ecmcConfigOrDie "Cfg.SetAxisModRange(3, 0)"
ecmcConfigOrDie "Cfg.SetAxisModType(3, 0)"
ecmcConfigOrDie "Cfg.SetAxisEmergDeceleration(3,0.1)"
ecmcConfigOrDie "Cfg.SetAxisVelAccDecTime(3,10.0,0.1)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelTwordsCam(3,5)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelOffCam(3,4)"
ecmcConfigOrDie "Cfg.SetAxisCntrlKp(3,15.0)"
ecmcConfigOrDie "Cfg.SetAxisCntrlKi(3,0.02)"
ecmcConfigOrDie "Cfg.SetAxisCntrlKd(3,0.0)"
ecmcConfigOrDie "Cfg.SetAxisCntrlKff(3,1.0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s3.POSITION,"ax3.enc.actpos")"
ecmcConfigOrDie "Cfg.SetAxisEncScaleDenom(3,2000)"
ecmcConfigOrDie "Cfg.SetAxisEncScaleNum(3,-60)"
ecmcConfigOrDie "Cfg.SetAxisEncType(3,0)"
ecmcConfigOrDie "Cfg.SetAxisEncBits(3,16)"
ecmcConfigOrDie "Cfg.SetAxisEncAbsBits(3,0)"
ecmcConfigOrDie "Cfg.SetAxisEncOffset(3,0)"
ecmcConfigOrDie "Cfg.SetAxisEncVelFilterSize(3,100)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterSize(3,1)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterEnable(3,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax3.enc.latchpos")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax3.enc.latchcontrol")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax3.enc.latchstatus")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s8.STM_CONTROL.0,"ax3.drv.control")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s8.STM_STATUS.1,"ax3.drv.status")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s8.VELOCITY_SETPOINT,"ax3.drv.velocity")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax3.drv.position")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax3.drv.brake")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s8.STM_CONTROL.2,"ax3.drv.reducetorque")"
ecmcConfigOrDie "Cfg.SetAxisDrvScaleDenom(3,32768.0)"
ecmcConfigOrDie "Cfg.SetAxisDrvScaleNum(3,600.0)"
ecmcConfigOrDie "Cfg.SetAxisDrvBrakeOpenDelayTime(3,0)"
ecmcConfigOrDie "Cfg.SetAxisDrvBrakeCloseAheadTime(3,0)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosBwd(3,-20)"
ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitBwd(3,1)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosFwd(3,130)"
ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitFwd(3,1)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.BI_2.0,"ax3.mon.lowlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.BI_1.0,"ax3.mon.highlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.BI_3.0,"ax3.mon.homesensor")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax3.mon.extinterlock")"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTol(3,0.1)"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTime(3,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableAtTargetMon(3,1)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTol(3,1.0)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTime(3,10)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableLagMon(3,1)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVel(3,100.0)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableMaxVel(3,1)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelDriveILDelay(3,200)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelTrajILDelay(3,100)"
ecmcConfigOrDie "Cfg.SetAxisMonHomeSwitchPolarity(3,0)"
ecmcConfigOrDie "Cfg.SetAxisHomeLatchCountOffset(3,0)"
ecmcConfigOrDie "Main.M3.fHomePosition=0.0"
ecmcMotorRecordCreateAxis(MCU1, "3", "6", )
ecmcEpicsEnvSetCalc("ECMC_TEMP_SREV","if(abs(2000)>0){RESULT:=abs(2000);} else {RESULT:=1.0};","%d")
ecmcEpicsEnvSetCalc("ECMC_TEMP_UREV","if(abs(-60)>0){RESULT:=abs(-60);} else {RESULT:=1.0};","%lf")
ecmcFileExist(ecmcMotorRecord.template,1,1)
dbLoadRecords(ecmcMotorRecord.template, "PREFIX=IOC_TEST:, MOTOR_NAME=Axis3, MOTOR_PORT=MCU1, AXIS_NO=3, DESC=MCU1021 Lower Axis (3), EGU=mm, PREC=3, VELO=10.0, JVEL=5, JAR=0.0, ACCL=0.1, RDBD=0.1, DLLM=-20, DHLM=130, HOMEPROC=3,SREV=2000,UREV=60.000000, ")
epicsEnvSet("ECMC_AXISFIELDINIT",  "")
ecmcFileExist(ecmcMotorRecordhome.template,1,1)
dbLoadRecords(ecmcMotorRecordhome.template, "PREFIX=IOC_TEST:, MOTOR_NAME=Axis3, MOTOR_PORT=MCU1, AXIS_NO=3,HOMEPROC=3, HOMEPOS=0.0, HVELTO=5, HVELFRM=4, HOMEACC=21, HOMEDEC=100")
epicsEnvUnset(ECMC_TEMP_SREV)
epicsEnvUnset(ECMC_TEMP_UREV)
ecmcFileExist("ecmcAxis.db",1,1)
dbLoadRecords("ecmcAxis.db","P=IOC_TEST:,AXIS_NAME=Axis3,AXIS_NO=3,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,T_SMP_MS=10,TSE=-2")
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_unset.cmd
#==============================================================================
# ecmc_axis_unset.cmd
epicsEnvUnset(ECMC_AXISCONFIG)
epicsEnvUnset(ECMC_AXISFIELDINIT)
epicsEnvUnset(ECMC_PREC)
epicsEnvUnset(ECMC_EGU)
epicsEnvUnset(ECMC_DESC)
epicsEnvUnset(ECMC_R)
epicsEnvUnset(ECMC_MOTOR_NAME)
epicsEnvUnset(ECMC_EC_AXIS_HEALTH)
epicsEnvUnset(ECMC_MOD_RANGE)
epicsEnvUnset(ECMC_MOD_TYPE)
epicsEnvUnset(ECMC_EMERG_DECEL)
epicsEnvUnset(ECMC_VELO)
epicsEnvUnset(ECMC_ACCL)
epicsEnvUnset(ECMC_HOME_VEL_TO)
epicsEnvUnset(ECMC_HOME_VEL_FRM)
epicsEnvUnset(ECMC_CNTRL_KP)
epicsEnvUnset(ECMC_CNTRL_KI)
epicsEnvUnset(ECMC_CNTRL_KD)
epicsEnvUnset(ECMC_CNTRL_KFF)
epicsEnvUnset(ECMC_EC_ENC_ACTPOS)
epicsEnvUnset(ECMC_EC_ENC_LATCHPOS)
epicsEnvUnset(ECMC_EC_ENC_LATCH_CONTROL)
epicsEnvUnset(ECMC_EC_ENC_LATCH_STATUS)
epicsEnvUnset(ECMC_HOME_LATCH_COUNT_OFFSET)
epicsEnvUnset(ECMC_ENC_SCALE_DENOM)
epicsEnvUnset(ECMC_ENC_SCALE_NUM)
epicsEnvUnset(ECMC_ENC_TYPE)
epicsEnvUnset(ECMC_ENC_BITS)
epicsEnvUnset(ECMC_ENC_ABS_BITS)
epicsEnvUnset(ECMC_ENC_ABS_OFFSET)
epicsEnvUnset(ECMC_ENC_VEL_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_ENABLE)
epicsEnvUnset(ECMC_EC_DRV_CONTROL)
epicsEnvUnset(ECMC_EC_DRV_STATUS)
epicsEnvUnset(ECMC_EC_DRV_VELOCITY)
epicsEnvUnset(ECMC_EC_DRV_BRAKE)
epicsEnvUnset(ECMC_EC_DRV_REDUCE_TORQUE)
epicsEnvUnset(ECMC_DRV_SCALE_DENOM)
epicsEnvUnset(ECMC_DRV_SCALE_NUM)
epicsEnvUnset(ECMC_DRV_BRAKE_OPEN_DLY_TIME)
epicsEnvUnset(ECMC_DRV_BRAKE_CLOSE_AHEAD_TIME)
epicsEnvUnset(ECMC_SOFT_LOW_LIM)
epicsEnvUnset(ECMC_DXLM_ENABLE)
epicsEnvUnset(ECMC_SOFT_HIGH_LIM)
epicsEnvUnset(ECMC_DXLM_ENABLE)
epicsEnvUnset(ECMC_EC_MON_LOWLIM)
epicsEnvUnset(ECMC_EC_MON_HIGHLIM)
epicsEnvUnset(ECMC_EC_MON_HOME_SWITCH)
epicsEnvUnset(ECMC_EC_MON_EXT_INTERLOCK)
epicsEnvUnset(ECMC_MON_AT_TARGET_TOL)
epicsEnvUnset(ECMC_MON_AT_TARGET_TIME)
epicsEnvUnset(ECMC_MON_AT_TARGET_ENA)
epicsEnvUnset(ECMC_MON_LAG_MON_TOL)
epicsEnvUnset(ECMC_MON_LAG_MON_TIME)
epicsEnvUnset(ECMC_MON_LAG_MON_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX)
epicsEnvUnset(ECMC_MON_VELO_MAX_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX_DRV_TIME)
epicsEnvUnset(ECMC_MON_VELO_MAX_TRAJ_TIME)
epicsEnvUnset(ECMC_JOG_VEL)
epicsEnvUnset(ECMC_JAR)
epicsEnvUnset(ECMC_HOME_PROC)
epicsEnvUnset(ECMC_HOME_POS)
epicsEnvUnset(ECMC_HOME_ACC)
epicsEnvUnset(ECMC_HOME_DEC)
epicsEnvUnset(ECMC_DRV_TYPE)
epicsEnvUnset(ECMC_VELO)
epicsEnvUnset(ECMC_SOFT_LOW_LIM)
epicsEnvUnset(ECMC_SOFT_HIGH_LIM)
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/applyAxisSynchronization.cmd, CONFIG=./cfg/linear_3.sax)
#==============================================================================
# applyAxisSynchronization.cmd
iocshLoad ./cfg/linear_3.sax
############# Encoder
epicsEnvSet("ECMC_ENC_SOURCE",                 "0")       # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_ENC_VELO_FILT_ENABLE",       "0")       # Enable velocity filter
epicsEnvSet("ECMC_ENC_VELO_FILT_SIZE",         "10")     # Encoder velocity Low pass filter size
############# Trajectory
epicsEnvSet("ECMC_TRAJ_SOURCE",                "1")       # 2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
2021/05/25 14:00:51.425 OK
0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_TRAJ_VELO_FILT_ENABLE",      "1")       # Enable velocity filter
epicsEnvSet("ECMC_TRAJ_VELO_FILT_SIZE",        "20")      # Trajectory velocity Low pass filter size
############# Commands
epicsEnvSet("ECMC_CMD_FRM_OTHER_PLC_ENABLE",   "1")       # Allow commands from PLC
epicsEnvSet("ECMC_CMD_AXIS_PLC_ENABLE",        "1")       # Enable Axis PLC
# Each line below is appended to one single expression/source. 
# Executed in sync with axis (before)
epicsEnvSet("ECMC_AXIS_EXPR_LINE_1",           "ax3.traj.setpos:=ax1.traj.setpos-ax2.traj.setpos/2|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_2",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_3",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_4",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_5",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_6",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_7",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_8",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_9",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_10",          "")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd
#==============================================================================
# ecmc_axis_sync.cmd
ecmcConfigOrDie "Cfg.SetAxisAllowCommandsFromPLC(3,1)"
ecmcConfigOrDie "Cfg.SetAxisPLCEnable(3,1)"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)=ax3.traj.setpos:=ax1.traj.setpos-ax2.traj.setpos/2|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(3)="
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterSize(3,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterEnable(3,0)"
ecmcConfigOrDie "Cfg.SetAxisEncSourceType(3,0)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterSize(3,20)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterEnable(3,1)"
ecmcConfigOrDie "Cfg.SetAxisTrajSourceType(3,1)"
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd
#==============================================================================
# ecmc_axis_sync_unset.cmd
epicsEnvUnset(ECMC_CMD_FRM_OTHER_PLC_ENABLE)
epicsEnvUnset(ECMC_CMD_AXIS_PLC_ENABLE)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_1)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_2)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_3)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_4)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_5)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_6)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_7)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_8)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_9)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_10)
epicsEnvUnset(ECMC_ENC_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_ENC_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_ENC_SOURCE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_TRAJ_SOURCE)
##############################################################################
## AXIS 4 (physical left motor)
#
epicsEnvSet("DEV",      "IOC_TEST")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/configureAxis.cmd, CONFIG=./cfg/linear_4.ax)
#==============================================================================
# configureAxis.cmd
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
ecmcFileExist("./cfg/linear_4.ax",1)
iocshLoad ./cfg/linear_4.ax ""
#General
epicsEnvSet("ECMC_MOTOR_NAME",            "Axis4")
epicsEnvSet("ECMC_R",                     "Axis4-")
epicsEnvSet("ECMC_AXIS_NO",               "4")
epicsEnvSet("ECMC_DESC",                  "MCU1021 Upper Axis (4)")
epicsEnvSet("ECMC_EGU",                   "mm")                       # Motor Record Unit
epicsEnvSet("ECMC_PREC",                  "3")                        # Motor Record Precision
epicsEnvSet("ECMC_AXISCONFIG",            "")                         # Extra parameters to driver
epicsEnvSet("ECMC_EC_AXIS_HEALTH",        "")                         # Entry for axis health output (example: ec0.s1.BO_1.0)
epicsEnvSet("ECMC_MOD_RANGE" ,            "0")                        # Modulo range (traj setpoints and encoder values will be in range 0..ECMC_MOD_RANGE)
epicsEnvSet("ECMC_MOD_TYPE",              "0")                        # For positioning and MOD_RANGE>0: 0 = Normal, 1 = Always Fwd, 2 = Always Bwd, 3 = Closest Distance
#Encoder
epicsEnvSet("ECMC_ENC_SCALE_NUM"          "60")
epicsEnvSet("ECMC_ENC_SCALE_DENOM"        "2000")
epicsEnvSet("ECMC_ENC_TYPE"               "0")                        # Type: 0=Incremental, 1=Absolute
epicsEnvSet("ECMC_ENC_BITS"               "16")                       # Total bit count of encoder raw data
epicsEnvSet("ECMC_ENC_ABS_BITS",          "0")                        # Absolute bit count (for absolute encoders) always least significant part of ECMC_ENC_BITS
epicsEnvSet("ECMC_ENC_ABS_OFFSET"         "0")                        # Encoder offset in eng units (for absolute encoders)
epicsEnvSet("ECMC_EC_ENC_ACTPOS",         "ec0.s4.POSITION")          # Ethercat entry for actual position input (encoder)
#Drive
epicsEnvSet("ECMC_DRV_TYPE"               "0")                        # Stepper: 0. DS402: 1 (DS402 = servos and advanced stepper drives)
epicsEnvSet("ECMC_DRV_SCALE_NUM"          "-600.0")                   # Fastest speed in engineering units
epicsEnvSet("ECMC_DRV_SCALE_DENOM"        "32768.0")                  # I/O range for ECMC_EC_ALIAS_DRV_VELO_SET
epicsEnvSet("ECMC_EC_DRV_CONTROL",        "ec0.s9.STM_CONTROL.0")     # Ethercat entry for control word or bit output
epicsEnvSet("ECMC_EC_DRV_STATUS",         "ec0.s9.STM_STATUS.1")      # Ethercat entry for status word or bit input
epicsEnvSet("ECMC_EC_DRV_VELOCITY",       "ec0.s9.VELOCITY_SETPOINT") # Ethercat entry for velocity setpoint output
epicsEnvSet("ECMC_EC_DRV_REDUCE_TORQUE",  "ec0.s9.STM_CONTROL.2")     # Ethercat entry for reduce torque output
epicsEnvSet("ECMC_EC_DRV_BRAKE",          "")                         # Ethercat entry for brake output
epicsEnvSet("ECMC_DRV_BRAKE_OPEN_DLY_TIME",    "0")                   # Brake timing parameter in cycles (default 1kHz)
epicsEnvSet("ECMC_DRV_BRAKE_CLOSE_AHEAD_TIME", "0")                   # Brake timing parameter in cycles (default 1kHz)
#Trajectory
epicsEnvSet("ECMC_VELO",                  "10.0")
epicsEnvSet("ECMC_JOG_VEL",               "5")
epicsEnvSet("ECMC_JAR",                   "0.0")                      # JAR defaults to VELO/ACCL
epicsEnvSet("ECMC_ACCL",                  "0.1")
epicsEnvSet("ECMC_EMERG_DECEL",           "0.1")             # Emergency deceleration
#Homing
epicsEnvSet("ECMC_HOME_PROC",             "3")
epicsEnvSet("ECMC_HOME_POS",              "0.0")
epicsEnvSet("ECMC_HOME_VEL_TO",           "5")
epicsEnvSet("ECMC_HOME_VEL_FRM",          "4")
epicsEnvSet("ECMC_HOME_ACC",              "21")
epicsEnvSet("ECMC_HOME_DEC",              "100")
#Controller
epicsEnvSet("ECMC_CNTRL_KP",              "15.0")
epicsEnvSet("ECMC_CNTRL_KI",              "0.02")
epicsEnvSet("ECMC_CNTRL_KD",              "0.0")
epicsEnvSet("ECMC_CNTRL_KFF",             "1.0")
#Monitoring
# Switches
epicsEnvSet("ECMC_EC_MON_LOWLIM",         "ec0.s1.BI_6.0")           #  Ethercat entry for low limit switch input
epicsEnvSet("ECMC_EC_MON_HIGHLIM",        "ec0.s1.BI_5.0")           #  Ethercat entry for high limit switch inpuit
epicsEnvSet("ECMC_EC_MON_HOME_SWITCH",    "ec0.s1.BI_7.0")           #  Ethercat entry for home switch input
epicsEnvSet("ECMC_EC_MON_EXT_INTERLOCK",  "ec0.s0.ONE.0")              #  Ethercat entry for external interlock input
# Softlimits (disable with 0,0)
epicsEnvSet("ECMC_SOFT_LOW_LIM",          "-130")
epicsEnvSet("ECMC_SOFT_HIGH_LIM",         "20")
epicsEnvSet("ECMC_DXLM_ENABLE",           "1")
# Position lag
epicsEnvSet("ECMC_MON_LAG_MON_TOL",       "1.0")
epicsEnvSet("ECMC_MON_LAG_MON_TIME",      "10")
epicsEnvSet("ECMC_MON_LAG_MON_ENA",       "1")
# At target
epicsEnvSet("ECMC_MON_AT_TARGET_TOL",     "0.1")
epicsEnvSet("ECMC_MON_AT_TARGET_TIME",     "100")
epicsEnvSet("ECMC_MON_AT_TARGET_ENA",     "1")
# Velocity
epicsEnvSet("ECMC_MON_VELO_MAX",          "100.0")
epicsEnvSet("ECMC_MON_VELO_MAX_TRAJ_TIME","100")
epicsEnvSet("ECMC_MON_VELO_MAX_DRV_TIME", "200")
epicsEnvSet("ECMC_MON_VELO_MAX_ENA",      "1")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addAxis.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addAxis.cmd
#==============================================================================
# addAxis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis-records.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis-records.cmd
#==============================================================================
# ecmc_axis-records.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis.cmd
#==============================================================================
# ecmc_axis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(60)<>0',SUCCESS_STR='ECMC_ENC_SCALE_NUM value OK == 60...',ERROR_STR='ECMC_ENC_SCALE_NUM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(60)<>0","# ECMC_ENC_SCALE_NUM value OK == 60...", "ecmcExit Error: ECMC_ENC_SCALE_NUM == 0...")
# ECMC_ENC_SCALE_NUM value OK == 60...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(2000)<>0',SUCCESS_STR='ECMC_ENC_SCALE_DENOM value OK == 2000...',ERROR_STR='ECMC_ENC_SCALE_DENOM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(2000)<>0","# ECMC_ENC_SCALE_DENOM value OK == 2000...", "ecmcExit Error: ECMC_ENC_SCALE_DENOM == 0...")
# ECMC_ENC_SCALE_DENOM value OK == 2000...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(-600.0)<>0',SUCCESS_STR='ECMC_DRV_SCALE_NUM value OK == -600.0...',ERROR_STR='ECMC_DRV_SCALE_NUM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(-600.0)<>0","# ECMC_DRV_SCALE_NUM value OK == -600.0...", "ecmcExit Error: ECMC_DRV_SCALE_NUM == 0...")
# ECMC_DRV_SCALE_NUM value OK == -600.0...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(32768.0)<>0',SUCCESS_STR='ECMC_DRV_SCALE_DENOM value OK == 32768.0...',ERROR_STR='ECMC_DRV_SCALE_DENOM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(32768.0)<>0","# ECMC_DRV_SCALE_DENOM value OK == 32768.0...", "ecmcExit Error: ECMC_DRV_SCALE_DENOM == 0...")
# ECMC_DRV_SCALE_DENOM value OK == 32768.0...
epicsEnvUnset(ECMC_EXE_CMD)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd "EXPR_STR='-1>0',WARNING_STR='WARNING: ECMC_MRES setting is deprecated and will not be used. (MRES will be calulated instead: ECMC_ENC_SCALE_NUM/ECMC_ENC_SCALE_DENOM).. '"
#==============================================================================
# issueWarning.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"-1>0","", "#-")
epicsEnvUnset(ECMC2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.428 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 OK
2021/05/25 14:00:51.429 ecmcMotorRecord:: setIntegerParam(4 motorPowerAutoOnOff_)=2
2021/05/25 14:00:51.429 ecmcMotorRecord:: setDoubleParam(4 motorPowerOnDelay_)=6
2021/05/25 14:00:51.429 ecmcMotorRecord:: setDoubleParam(4 motorPowerOffDelay_=-1
2021/05/25 14:00:51.429 ecmcMotorRecord:: udateMotorLimitsRO(4) enabledHighAndLow=1 valid=1 fValueHigh=20 fValueLow=-130
2021/05/25 14:00:51.429 ecmcMotorRecord:: connected(4)
2021/05/25 14:00:51.429 ecmcMotorRecord:: initialPoll(4) status=0
_EXE_CMD)
ecmcConfigOrDie "Cfg.CreateAxis(4,1,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax4.health")"
ecmcConfigOrDie "Cfg.SetAxisModRange(4, 0)"
ecmcConfigOrDie "Cfg.SetAxisModType(4, 0)"
ecmcConfigOrDie "Cfg.SetAxisEmergDeceleration(4,0.1)"
ecmcConfigOrDie "Cfg.SetAxisVelAccDecTime(4,10.0,0.1)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelTwordsCam(4,5)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelOffCam(4,4)"
ecmcConfigOrDie "Cfg.SetAxisCntrlKp(4,15.0)"
ecmcConfigOrDie "Cfg.SetAxisCntrlKi(4,0.02)"
ecmcConfigOrDie "Cfg.SetAxisCntrlKd(4,0.0)"
ecmcConfigOrDie "Cfg.SetAxisCntrlKff(4,1.0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s4.POSITION,"ax4.enc.actpos")"
ecmcConfigOrDie "Cfg.SetAxisEncScaleDenom(4,2000)"
ecmcConfigOrDie "Cfg.SetAxisEncScaleNum(4,60)"
ecmcConfigOrDie "Cfg.SetAxisEncType(4,0)"
ecmcConfigOrDie "Cfg.SetAxisEncBits(4,16)"
ecmcConfigOrDie "Cfg.SetAxisEncAbsBits(4,0)"
ecmcConfigOrDie "Cfg.SetAxisEncOffset(4,0)"
ecmcConfigOrDie "Cfg.SetAxisEncVelFilterSize(4,100)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterSize(4,1)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterEnable(4,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax4.enc.latchpos")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax4.enc.latchcontrol")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax4.enc.latchstatus")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s9.STM_CONTROL.0,"ax4.drv.control")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s9.STM_STATUS.1,"ax4.drv.status")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s9.VELOCITY_SETPOINT,"ax4.drv.velocity")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax4.drv.position")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax4.drv.brake")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s9.STM_CONTROL.2,"ax4.drv.reducetorque")"
ecmcConfigOrDie "Cfg.SetAxisDrvScaleDenom(4,32768.0)"
ecmcConfigOrDie "Cfg.SetAxisDrvScaleNum(4,-600.0)"
ecmcConfigOrDie "Cfg.SetAxisDrvBrakeOpenDelayTime(4,0)"
ecmcConfigOrDie "Cfg.SetAxisDrvBrakeCloseAheadTime(4,0)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosBwd(4,-130)"
ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitBwd(4,1)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosFwd(4,20)"
ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitFwd(4,1)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.BI_6.0,"ax4.mon.lowlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.BI_5.0,"ax4.mon.highlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.BI_7.0,"ax4.mon.homesensor")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s0.ONE.0,"ax4.mon.extinterlock")"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTol(4,0.1)"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTime(4,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableAtTargetMon(4,1)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTol(4,1.0)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTime(4,10)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableLagMon(4,1)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVel(4,100.0)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableMaxVel(4,1)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelDriveILDelay(4,200)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelTrajILDelay(4,100)"
ecmcConfigOrDie "Cfg.SetAxisMonHomeSwitchPolarity(4,0)"
ecmcConfigOrDie "Cfg.SetAxisHomeLatchCountOffset(4,0.0)"
ecmcConfigOrDie "Main.M4.fHomePosition=0.0"
ecmcMotorRecordCreateAxis(MCU1, "4", "6", )
ecmcEpicsEnvSetCalc("ECMC_TEMP_SREV","if(abs(2000)>0){RESULT:=abs(2000);} else {RESULT:=1.0};","%d")
ecmcEpicsEnvSetCalc("ECMC_TEMP_UREV","if(abs(60)>0){RESULT:=abs(60);} else {RESULT:=1.0};","%lf")
ecmcFileExist(ecmcMotorRecord.template,1,1)
dbLoadRecords(ecmcMotorRecord.template, "PREFIX=IOC_TEST:, MOTOR_NAME=Axis4, MOTOR_PORT=MCU1, AXIS_NO=4, DESC=MCU1021 Upper Axis (4), EGU=mm, PREC=3, VELO=10.0, JVEL=5, JAR=0.0, ACCL=0.1, RDBD=0.1, DLLM=-130, DHLM=20, HOMEPROC=3,SREV=2000,UREV=60.000000, ")
epicsEnvSet("ECMC_AXISFIELDINIT",  "")
ecmcFileExist(ecmcMotorRecordhome.template,1,1)
dbLoadRecords(ecmcMotorRecordhome.template, "PREFIX=IOC_TEST:, MOTOR_NAME=Axis4, MOTOR_PORT=MCU1, AXIS_NO=4,HOMEPROC=3, HOMEPOS=0.0, HVELTO=5, HVELFRM=4, HOMEACC=21, HOMEDEC=100")
epicsEnvUnset(ECMC_TEMP_SREV)
epicsEnvUnset(ECMC_TEMP_UREV)
ecmcFileExist("ecmcAxis.db",1,1)
dbLoadRecords("ecmcAxis.db","P=IOC_TEST:,AXIS_NAME=Axis4,AXIS_NO=4,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,T_SMP_MS=10,TSE=-2")
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_unset.cmd
#==============================================================================
# ecmc_axis_unset.cmd
epicsEnvUnset(ECMC_AXISCONFIG)
epicsEnvUnset(ECMC_AXISFIELDINIT)
epicsEnvUnset(ECMC_PREC)
epicsEnvUnset(ECMC_EGU)
epicsEnvUnset(ECMC_DESC)
epicsEnvUnset(ECMC_R)
epicsEnvUnset(ECMC_MOTOR_NAME)
epicsEnvUnset(ECMC_EC_AXIS_HEALTH)
epicsEnvUnset(ECMC_MOD_RANGE)
epicsEnvUnset(ECMC_MOD_TYPE)
epicsEnvUnset(ECMC_EMERG_DECEL)
epicsEnvUnset(ECMC_VELO)
epicsEnvUnset(ECMC_ACCL)
epicsEnvUnset(ECMC_HOME_VEL_TO)
epicsEnvUnset(ECMC_HOME_VEL_FRM)
epicsEnvUnset(ECMC_CNTRL_KP)
epicsEnvUnset(ECMC_CNTRL_KI)
epicsEnvUnset(ECMC_CNTRL_KD)
epicsEnvUnset(ECMC_CNTRL_KFF)
epicsEnvUnset(ECMC_EC_ENC_ACTPOS)
epicsEnvUnset(ECMC_EC_ENC_LATCHPOS)
epicsEnvUnset(ECMC_EC_ENC_LATCH_CONTROL)
epicsEnvUnset(ECMC_EC_ENC_LATCH_STATUS)
epicsEnvUnset(ECMC_HOME_LATCH_COUNT_OFFSET)
epicsEnvUnset(ECMC_ENC_SCALE_DENOM)
epicsEnvUnset(ECMC_ENC_SCALE_NUM)
epicsEnvUnset(ECMC_ENC_TYPE)
epicsEnvUnset(ECMC_ENC_BITS)
epicsEnvUnset(ECMC_ENC_ABS_BITS)
epicsEnvUnset(ECMC_ENC_ABS_OFFSET)
epicsEnvUnset(ECMC_ENC_VEL_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_ENABLE)
epicsEnvUnset(ECMC_EC_DRV_CONTROL)
epicsEnvUnset(ECMC_EC_DRV_STATUS)
epicsEnvUnset(ECMC_EC_DRV_VELOCITY)
epicsEnvUnset(ECMC_EC_DRV_BRAKE)
epicsEnvUnset(ECMC_EC_DRV_REDUCE_TORQUE)
epicsEnvUnset(ECMC_DRV_SCALE_DENOM)
epicsEnvUnset(ECMC_DRV_SCALE_NUM)
epicsEnvUnset(ECMC_DRV_BRAKE_OPEN_DLY_TIME)
epicsEnvUnset(ECMC_DRV_BRAKE_CLOSE_AHEAD_TIME)
epicsEnvUnset(ECMC_SOFT_LOW_LIM)
epicsEnvUnset(ECMC_DXLM_ENABLE)
epicsEnvUnset(ECMC_SOFT_HIGH_LIM)
epicsEnvUnset(ECMC_DXLM_ENABLE)
epicsEnvUnset(ECMC_EC_MON_LOWLIM)
epicsEnvUnset(ECMC_EC_MON_HIGHLIM)
epicsEnvUnset(ECMC_EC_MON_HOME_SWITCH)
epicsEnvUnset(ECMC_EC_MON_EXT_INTERLOCK)
epicsEnvUnset(ECMC_MON_AT_TARGET_TOL)
epicsEnvUnset(ECMC_MON_AT_TARGET_TIME)
epicsEnvUnset(ECMC_MON_AT_TARGET_ENA)
epicsEnvUnset(ECMC_MON_LAG_MON_TOL)
epicsEnvUnset(ECMC_MON_LAG_MON_TIME)
epicsEnvUnset(ECMC_MON_LAG_MON_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX)
epicsEnvUnset(ECMC_MON_VELO_MAX_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX_DRV_TIME)
epicsEnvUnset(ECMC_MON_VELO_MAX_TRAJ_TIME)
epicsEnvUnset(ECMC_JOG_VEL)
epicsEnvUnset(ECMC_JAR)
epicsEnvUnset(ECMC_HOME_PROC)
epicsEnvUnset(ECMC_HOME_POS)
epicsEnvUnset(ECMC_HOME_ACC)
epicsEnvUnset(ECMC_HOME_DEC)
epicsEnvUnset(ECMC_DRV_TYPE)
epicsEnvUnset(ECMC_VELO)
epicsEnvUnset(ECMC_SOFT_LOW_LIM)
epicsEnvUnset(ECMC_SOFT_HIGH_LIM)
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/applyAxisSynchronization.cmd, CONFIG=./cfg/linear_4.sax)
#==============================================================================
# applyAxisSynchronization.cmd
iocshLoad ./cfg/linear_4.sax
############# Encoder
epicsEnvSet("ECMC_ENC_SOURCE",                 "0")      # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_ENC_VELO_FILT_ENABLE",       "0")      # Enable velocity filter
epicsEnvSet("ECMC_ENC_VELO_FILT_SIZE",         "10")    # Encoder velocity Low pass filter size
############# Trajectory
epicsEnvSet("ECMC_TRAJ_SOURCE",                "1")      # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_TRAJ_VELO_FILT_ENABLE",      "1")      # Enable velocity filter
epicsEnvSet("ECMC_TRAJ_VELO_FILT_SIZE",        "20")     # Trajectory velocity Low pass filter size
############# Commands
epicsEnvSet("ECMC_CMD_FRM_OTHER_PLC_ENABLE",   "1")      # Allow commands from PLC
epicsEnvSet("ECMC_CMD_AXIS_PLC_ENABLE",        "1")      # Enable Axis PLC
# Each line below is appended to one single expression/source. 
# Executed in sync with axis (before)
epicsEnvSet("ECMC_AXIS_EXPR_LINE_1",           "ax4.traj.setpos:=ax1.traj.setpos+ax2.traj.setpos/2|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_2",           "")
epicsEnv2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
2021/05/25 14:00:51.432 OK
Set("ECMC_AXIS_EXPR_LINE_3",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_4",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_5",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_6",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_7",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_8",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_9",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_10",          "")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd
#==============================================================================
# ecmc_axis_sync.cmd
ecmcConfigOrDie "Cfg.SetAxisAllowCommandsFromPLC(4,1)"
ecmcConfigOrDie "Cfg.SetAxisPLCEnable(4,1)"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)=ax4.traj.setpos:=ax1.traj.setpos+ax2.traj.setpos/2|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(4)="
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterSize(4,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterEnable(4,0)"
ecmcConfigOrDie "Cfg.SetAxisEncSourceType(4,0)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterSize(4,20)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterEnable(4,1)"
ecmcConfigOrDie "Cfg.SetAxisTrajSourceType(4,1)"
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd
#==============================================================================
# ecmc_axis_sync_unset.cmd
epicsEnvUnset(ECMC_CMD_FRM_OTHER_PLC_ENABLE)
epicsEnvUnset(ECMC_CMD_AXIS_PLC_ENABLE)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_1)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_2)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_3)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_4)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_5)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_6)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_7)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_8)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_9)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_10)
epicsEnvUnset(ECMC_ENC_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_ENC_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_ENC_SOURCE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_TRAJ_SOURCE)
##############################################################################
## AXIS 1 (slit center position)
#
epicsEnvSet("DEV",      "IOC_TEST")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/configureVirtualAxis.cmd, CONFIG=./cfg/linear_1.vax)
#==============================================================================
# configureVirtualAxis.cmd
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad ./cfg/linear_1.vax
#General
epicsEnvSet("ECMC_MOTOR_NAME",            "Axis1")
epicsEnvSet("ECMC_R",                     "Axis1-")
epicsEnvSet("ECMC_AXIS_NO",               "1")
epicsEnvSet("ECMC_DESC",                  "MCU1025 Center Position (1)")
epicsEnvSet("ECMC_EGU",                   "mm")                       # Motor Record Unit
epicsEnvSet("ECMC_PREC",                  "3")                        # Motor Record Precision
epicsEnvSet("ECMC_AXISCONFIG",            "")                         # Extra parameters to driver
epicsEnvSet("ECMC_EC_AXIS_HEALTH",        "")                         # Entry for axis health output (example: ec0.s1.BO_1.0)
epicsEnvSet("ECMC_MOD_RANGE" ,            "0")                        # Modulo range (traj setpoints and encoder values will be in range 0..ECMC_MOD_RANGE)
epicsEnvSet("ECMC_MOD_TYPE",              "0")                        # For positioning and MOD_RANGE>0: 0 = Normal, 1 = Always Fwd, 2 = Always Bwd, 3 = Closest Distance
#Encoder
epicsEnvSet("ECMC_ENC_SCALE_NUM"          "1")
epicsEnvSet("ECMC_ENC_SCALE_DENOM"        "1")
epicsEnvSet("ECMC_ENC_TYPE"               "1")                        # Type: 0=Incremental, 1=Absolute
epicsEnvSet("ECMC_ENC_BITS"               "0")                        # Total bit count of encoder raw data
epicsEnvSet("ECMC_ENC_ABS_BITS",          "0")                        # Absolute bit count (for absolute encoders) always least significant part of ECMC_ENC_BITS
epicsEnvSet("ECMC_ENC_ABS_OFFSET"         "0")                        # Encoder offset in eng units (for absolute encoders)
epicsEnvSet("ECMC_EC_ENC_ACTPOS",         "ec0.s1.ZERO")             # Ethercat entry for actual position input (encoder)
#Trajectory
epicsEnvSet("ECMC_VELO",                  "5.0")
epicsEnvSet("ECMC_JOG_VEL",               "5")
epicsEnvSet("ECMC_JAR",                   "0.0")                      # JAR defaults to VELO/ACCL
epicsEnvSet("ECMC_ACCL",                  "0.1")
epicsEnvSet("ECMC_EMERG_DECEL",           "0.1")             # Emergency deceleration
#Homing
epicsEnvSet("ECMC_HOME_PROC",             "3")
epicsEnvSet("ECMC_HOME_POS",              "0.0")
epicsEnvSet("ECMC_HOME_VEL_TO",           "5")
epicsEnvSet("ECMC_HOME_VEL_FRM",          "4")
epicsEnvSet("ECMC_HOME_ACC",              "21")
epicsEnvSet("ECMC_HOME_DEC",              "100")
#Monitoring
# Switches
epicsEnvSet("ECMC_EC_MON_LOWLIM",         "ec0.s1.ONE.0")           #  Ethercat entry for low limit switch input
epicsEnvSet("ECMC_EC_MON_HIGHLIM",        "ec0.s1.ONE.0")           #  Ethercat entry for high limit switch inpuit
epicsEnvSet("ECMC_EC_MON_HOME_SWITCH",    "ec0.s1.ONE.0")           #  Ethercat entry for home switch input
epicsEnvSet("ECMC_EC_MON_EXT_INTERLOCK",  "ec0.s1.ONE.0")           #  Ethercat entry for external interlock input
# Softlimits (disable with 0,0)
epicsEnvSet("ECMC_SOFT_LOW_LIM",          "0")
epicsEnvSet("ECMC_SOFT_HIGH_LIM",         "0")
# Position lag
epicsEnvSet("ECMC_MON_LAG_MON_TOL",       "0.5")
epicsEnvSet("ECMC_MON_LAG_MON_TIME",      "100")
epicsEnvSet("ECMC_MON_LAG_MON_ENA",       "0")
# At target
epicsEnvSet("ECMC_MON_AT_TARGET_TOL",     "0.3")
epicsEnvSet("ECMC_MON_AT_TARGET_TIME",    "100")
epicsEnvSet("ECMC_MON_AT_TARGET_ENA",     "1")
# Velocity
epicsEnvSet("ECMC_MON_VELO_MAX",          "200.0")
epicsEnvSet("ECMC_MON_VELO_MAX_TRAJ_TIME","100")
epicsEnvSet("ECMC_MON_VELO_MAX_DRV_TIME", "200")
epicsEnvSet("ECMC_MON_VELO_MAX_ENA",      "1")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addVirtualAxis.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addVirtualAxis.cmd
#==============================================================================
# addVirtualAxis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis-records.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis-records.cmd
#==============================================================================
# ecmc_virt_axis-records.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis.cmd",1)
iocshLoad( /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis.cmd )
#==============================================================================
# ecmc_virt_axis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(1)<>0',SUCCESS_STR='ECMC_ENC_SCALE_NUM value OK == 1...',ERROR_STR='ECMC_ENC_SCALE_NUM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(1)<>0","# ECMC_ENC_SCALE_NUM value OK == 1...", "ecmcExit Error: ECMC_ENC_SCALE_NUM == 0...")
# ECMC_ENC_SCALE_NUM value OK == 1...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(1)<>0',SUCCESS_STR='ECMC_ENC_SC2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
2021/05/25 14:00:51.434 OK
macLib: macro ECMC_DXLM_ENABLE is undefined (expanding string ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitBwd(${ECMC_AXIS_NO},${ECMC_DXLM_ENABLE})")
2021/05/25 14:00:51.435 OK
macLib: macro ECMC_DXLM_ENABLE is undefined (expanding string ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitFwd(${ECMC_AXIS_NO},${ECMC_DXLM_ENABLE})")
2021/05/25 14:00:51.435 ecmcMotorRecord:: setIntegerParam(1 motorPowerAutoOnOff_)=2
2021/05/25 14:00:51.435 ecmcMotorRecord:: setDoubleParam(1 motorPowerOnDelay_)=6
2021/05/25 14:00:51.435 ecmcMotorRecord:: setDoubleParam(1 motorPowerOffDelay_=-1
2021/05/25 14:00:51.435 ecmcMotorRecord:: connected(1)
2021/05/25 14:00:51.435 ecmcMotorRecord:: initialPoll(1) status=0
ALE_DENOM value OK == 1...',ERROR_STR='ECMC_ENC_SCALE_DENOM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(1)<>0","# ECMC_ENC_SCALE_DENOM value OK == 1...", "ecmcExit Error: ECMC_ENC_SCALE_DENOM == 0...")
# ECMC_ENC_SCALE_DENOM value OK == 1...
epicsEnvUnset(ECMC_EXE_CMD)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd "EXPR_STR='-1>0',WARNING_STR='WARNING: ECMC_MRES setting is deprecated and will not be used. (MRES will be calulated instead: ECMC_ENC_SCALE_NUM/ECMC_ENC_SCALE_DENOM).. '"
#==============================================================================
# issueWarning.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"-1>0","", "#-")
epicsEnvUnset(ECMC_EXE_CMD)
ecmcConfigOrDie "Cfg.CreateAxis(1,2)"
ecmcConfigOrDie "Cfg.SetAxisTrajStartPos(1,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax1.health")"
ecmcConfigOrDie "Cfg.SetAxisModRange(1, 0)"
ecmcConfigOrDie "Cfg.SetAxisModType(1, 0)"
ecmcConfigOrDie "Cfg.SetAxisEmergDeceleration(1,0.1)"
ecmcConfigOrDie "Cfg.SetAxisVelAccDecTime(1,5.0,0.1)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelTwordsCam(1,5)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelOffCam(1,4)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ZERO,"ax1.enc.actpos")"
ecmcConfigOrDie "Cfg.SetAxisEncScaleDenom(1,1)"
ecmcConfigOrDie "Cfg.SetAxisEncScaleNum(1,1)"
ecmcConfigOrDie "Cfg.SetAxisEncType(1,1)"
ecmcConfigOrDie "Cfg.SetAxisEncBits(1,0)"
ecmcConfigOrDie "Cfg.SetAxisEncAbsBits(1,0)"
ecmcConfigOrDie "Cfg.SetAxisEncOffset(1,0)"
ecmcConfigOrDie "Cfg.SetAxisEncVelFilterSize(1,100)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterSize(1,1)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterEnable(1,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax1.mon.lowlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax1.mon.highlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax1.mon.homesensor")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax1.mon.extinterlock")"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTol(1,0.3)"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTime(1,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableAtTargetMon(1,1)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTol(1,0.5)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTime(1,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableLagMon(1,0)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVel(1,200.0)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableMaxVel(1,1)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelDriveILDelay(1,200)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelTrajILDelay(1,100)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosBwd(1,0)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosFwd(1,0)"
ecmcMotorRecordCreateAxis(MCU1, "1", "6", "")
ecmcEpicsEnvSetCalc("ECMC_TEMP_SREV","if(abs(1)>0){RESULT:=abs(1);} else {RESULT:=1.0};","%d")
ecmcEpicsEnvSetCalc("ECMC_TEMP_UREV","if(abs(1)>0){RESULT:=abs(1);} else {RESULT:=1.0};","%lf")
ecmcFileExist(ecmcMotorRecord.template,1,1)
dbLoadRecords(ecmcMotorRecord.template, "PREFIX=IOC_TEST:, MOTOR_NAME=Axis1, MOTOR_PORT=MCU1, AXIS_NO=1, DESC=MCU1025 Center Position (1), EGU=mm, PREC=3, VELO=5.0, JVEL=5, JAR=0.0, ACCL=0.1, RDBD=0.3, DLLM=0, DHLM=0, HOMEPROC=3,SREV=1,UREV=1.000000, ")
epicsEnvSet("ECMC_AXISFIELDINIT",  "")
ecmcFileExist(ecmcMotorRecord"home.template",1,1)
dbLoadRecords(ecmcMotorRecord"home.template", "PREFIX=IOC_TEST:, MOTOR_NAME=Axis1, MOTOR_PORT=MCU1, AXIS_NO=1,HOMEPROC=3, HOMEPOS=0.0, HVELTO=5, HVELFRM=4, HOMEACC=21, HOMEDEC=100")
epicsEnvUnset(ECMC_TEMP_SREV)
epicsEnvUnset(ECMC_TEMP_UREV)
ecmcFileExist("ecmcAxis.db",1,1)
dbLoadRecords("ecmcAxis.db","P=IOC_TEST:,AXIS_NAME=Axis1,AXIS_NO=1,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,T_SMP_MS=10,TSE=-2")
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis_unset.cmd
#==============================================================================
# ecmc_virt_axis_unset.cmd
epicsEnvUnset(ECMC_AXISCONFIG)
epicsEnvUnset(ECMC_AXISFIELDINIT)
epicsEnvUnset(ECMC_PREC)
epicsEnvUnset(ECMC_EGU)
epicsEnvUnset(ECMC_DESC)
epicsEnvUnset(ECMC_R)
epicsEnvUnset(ECMC_MOTOR_NAME)
epicsEnvUnset(ECMC_EC_AXIS_HEALTH)
epicsEnvUnset(ECMC_MOD_RANGE)
epicsEnvUnset(ECMC_MOD_TYPE)
epicsEnvUnset(ECMC_EMERG_DECEL)
epicsEnvUnset(ECMC_ACCL)
epicsEnvUnset(ECMC_HOME_VEL_TO)
epicsEnvUnset(ECMC_HOME_VEL_FRM)
epicsEnvUnset(ECMC_EC_ENC_ACTPOS)
epicsEnvUnset(ECMC_ENC_SCALE_DENOM)
epicsEnvUnset(ECMC_ENC_SCALE_NUM)
epicsEnvUnset(ECMC_ENC_TYPE)
epicsEnvUnset(ECMC_ENC_BITS)
epicsEnvUnset(ECMC_ENC_ABS_BITS)
epicsEnvUnset(ECMC_ENC_ABS_OFFSET)
epicsEnvUnset(ECMC_ENC_VEL_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_ENABLE)
epicsEnvUnset(ECMC_EC_MON_LOWLIM)
epicsEnvUnset(ECMC_EC_MON_HIGHLIM)
epicsEnvUnset(ECMC_EC_MON_HOME_SWITCH)
epicsEnvUnset(ECMC_EC_MON_EXT_INTERLOCK)
epicsEnvUnset(ECMC_MON_AT_TARGET_TOL)
epicsEnvUnset(ECMC_MON_AT_TARGET_TIME)
epicsEnvUnset(ECMC_MON_AT_TARGET_ENA)
epicsEnvUnset(ECMC_MON_LAG_MON_TOL)
epicsEnvUnset(ECMC_MON_LAG_MON_TIME)
epicsEnvUnset(ECMC_MON_LAG_MON_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX)
epicsEnvUnset(ECMC_MON_VELO_MAX_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX_DRV_TIME)
epicsEnvUnset(ECMC_MON_VELO_MAX_TRAJ_TIME)
epicsEnvUnset(ECMC_MRES)
epicsEnvUnset(ECMC_JOG_VEL)
epicsEnvUnset(ECMC_JAR)
epicsEnvUnset(ECMC_HOME_PROC)
epicsEnvUnset(ECMC_HOME_POS)
epicsEnvUnset(ECMC_HOME_ACC)
epicsEnvUnset(ECMC_HOME_DEC)
epicsEnvUnset(ECMC_DRV_TYPE)
epicsEnvUnset(ECMC_VELO)
epicsEnvUnset(ECMC_SOFT_LOW_LIM)
epicsEnvUnset(ECMC_SOFT_HIGH_LIM)
# reset PREFIX
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/applyAxisSynchronization.cmd, CONFIG=./cfg/linear_1.sax)
#==============================================================================
# applyAxisSynchronization.cmd
iocshLoad ./cfg/linear_1.sax
############# Encoder
epicsEnvSet("ECMC_ENC_SOURCE",                 "1")         # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_ENC_VELO_FILT_ENABLE",       "1")         # Enable velocity filter
epicsEnvSet("ECMC_ENC_VELO_FILT_SIZE",         "10")        # Encoder velocity Low pass filter size
############# Trajectory
# 0 Internal, 1 from expression
epicsEnvSet("ECMC_TRAJ_SOURCE",                "0")         # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_TRAJ_VELO_FILT_ENABLE",      "1")         # Enable velocity filter
epicsEnvSet("ECMC_TRAJ_VELO_FILT_SIZE",        "10")        # Trajectory velocity Low pass filter size
############# Commands
epicsEnvSet("ECMC_CMD_FRM_OTHER_PLC_ENABLE",  "1")          # Allow commands from PLC
epicsEnvSet("ECMC_CMD_AXIS_PLC_ENABLE",       "1")          # Enable Axis PLC
# Each line below is appended to one single expression/source. 
# Executed in sync with axis (before)
epicsEnvSet("ECMC_AXIS_EXPR_LINE_1",           "if(ax3.traj.source){ax3.drv.enable:=ax1.drv.enable+ax2.drv.enable|}|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_2",           "if(ax4.traj.source){ax4.drv.enable:=ax1.drv.enable+ax2.drv.enable|}|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_3",           "ax1.enc.actpos:=(ax4.enc.actpos+ax3.enc.actpos)/2|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_4",           "ax1.traj.setpos:=ax6.traj.setpos*sin(2*pi*ax5.enc.actpos/10000)|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_5",           "ax1.mon.ilockfwd:=ax3.mon.highlim and ax4.mon.highlim|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_6",           "ax1.mon.ilockbwd:=ax3.mon.lowlim and ax4.mon.lowlim|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_7",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_8",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_9",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_10",          "")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd
#==============================================================================
# ecmc_axis_sync.cmd
ecmcConfigOrDie "Cfg.SetAxisA2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.437 OK
2021/05/25 14:00:51.438 OK
2021/05/25 14:00:51.438 OK
2021/05/25 14:00:51.438 OK
2021/05/25 14:00:51.438 OK
2021/05/25 14:00:51.438 OK
llowCommandsFromPLC(1,1)"
ecmcConfigOrDie "Cfg.SetAxisPLCEnable(1,1)"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)=if(ax3.traj.source){ax3.drv.enable:=ax1.drv.enable+ax2.drv.enable|}|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)=if(ax4.traj.source){ax4.drv.enable:=ax1.drv.enable+ax2.drv.enable|}|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)=ax1.enc.actpos:=(ax4.enc.actpos+ax3.enc.actpos)/2|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)=ax1.traj.setpos:=ax6.traj.setpos*sin(2*pi*ax5.enc.actpos/10000)|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)=ax1.mon.ilockfwd:=ax3.mon.highlim and ax4.mon.highlim|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)=ax1.mon.ilockbwd:=ax3.mon.lowlim and ax4.mon.lowlim|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(1)="
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterSize(1,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterEnable(1,1)"
ecmcConfigOrDie "Cfg.SetAxisEncSourceType(1,1)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterSize(1,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterEnable(1,1)"
ecmcConfigOrDie "Cfg.SetAxisTrajSourceType(1,0)"
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd
#==============================================================================
# ecmc_axis_sync_unset.cmd
epicsEnvUnset(ECMC_CMD_FRM_OTHER_PLC_ENABLE)
epicsEnvUnset(ECMC_CMD_AXIS_PLC_ENABLE)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_1)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_2)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_3)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_4)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_5)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_6)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_7)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_8)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_9)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_10)
epicsEnvUnset(ECMC_ENC_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_ENC_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_ENC_SOURCE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_TRAJ_SOURCE)
##############################################################################
## AXIS 2 (slit opening)
#
epicsEnvSet("DEV",      "IOC_TEST")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/configureVirtualAxis.cmd, CONFIG=./cfg/linear_2.vax)
#==============================================================================
# configureVirtualAxis.cmd
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad ./cfg/linear_2.vax
#General
epicsEnvSet("ECMC_MOTOR_NAME",            "Axis2")
epicsEnvSet("ECMC_R",                     "Axis2-")
epicsEnvSet("ECMC_AXIS_NO",               "2")
epicsEnvSet("ECMC_DESC",                  "MCU1025 Gap (2)")
epicsEnvSet("ECMC_EGU",                   "mm")                       # Motor Record Unit
epicsEnvSet("ECMC_PREC",                  "3")                        # Motor Record Precision
epicsEnvSet("ECMC_AXISCONFIG",            "")                         # Extra parameters to driver
epicsEnvSet("ECMC_EC_AXIS_HEALTH",        "")                         # Entry for axis health output (example: ec0.s1.BO_1.0)
epicsEnvSet("ECMC_MOD_RANGE" ,            "0")                        # Modulo range (traj setpoints and encoder values will be in range 0..ECMC_MOD_RANGE)
epicsEnvSet("ECMC_MOD_TYPE",              "0")                        # For positioning and MOD_RANGE>0: 0 = Normal, 1 = Always Fwd, 2 = Always Bwd, 3 = Closest Distance
#Encoder
epicsEnvSet("ECMC_ENC_SCALE_NUM"          "1")
epicsEnvSet("ECMC_ENC_SCALE_DENOM"        "1")
epicsEnvSet("ECMC_ENC_TYPE"               "1")                        # Type: 0=Incremental, 1=Absolute
epicsEnvSet("ECMC_ENC_BITS"               "0")                        # Total bit count of encoder raw data
epicsEnvSet("ECMC_ENC_ABS_BITS",          "0")                        # Absolute bit count (for absolute encoders) always least significant part of ECMC_ENC_BITS
epicsEnvSet("ECMC_ENC_ABS_OFFSET"         "0")                        # Encoder offset in eng units (for absolute encoders)
epicsEnvSet("ECMC_EC_ENC_ACTPOS",         "ec0.s1.ZERO")             # Ethercat entry for actual position input (encoder)
#Trajectory
epicsEnvSet("ECMC_VELO",                  "5.0")
epicsEnvSet("ECMC_JOG_VEL",               "5")
epicsEnvSet("ECMC_JAR",                   "0.0")                      # JAR defaults to VELO/ACCL
epicsEnvSet("ECMC_ACCL",                  "0.1")
epicsEnvSet("ECMC_EMERG_DECEL",           "0.1")             # Emergency deceleration
#Homing
epicsEnvSet("ECMC_HOME_PROC",             "3")
epicsEnvSet("ECMC_HOME_POS",              "0.0")
epicsEnvSet("ECMC_HOME_VEL_TO",           "5")
epicsEnvSet("ECMC_HOME_VEL_FRM",          "4")
epicsEnvSet("ECMC_HOME_ACC",              "21")
epicsEnvSet("ECMC_HOME_DEC",              "100")
#Monitoring
# Switches
epicsEnvSet("ECMC_EC_MON_LOWLIM",         "ec0.s1.ONE.0")            #  Ethercat entry for low limit switch input
epicsEnvSet("ECMC_EC_MON_HIGHLIM",        "ec0.s1.ONE.0")            #  Ethercat entry for high limit switch inpuit
epicsEnvSet("ECMC_EC_MON_HOME_SWITCH",    "ec0.s1.ONE.0")            #  Ethercat entry for home switch input
epicsEnvSet("ECMC_EC_MON_EXT_INTERLOCK",  "ec0.s1.ONE.0")            #  Ethercat entry for external interlock input
# Softlimits (disable with 0,0)
epicsEnvSet("ECMC_SOFT_LOW_LIM",          "0")
epicsEnvSet("ECMC_SOFT_HIGH_LIM",         "0")
# Position lag
epicsEnvSet("ECMC_MON_LAG_MON_TOL",       "0.5")
epicsEnvSet("ECMC_MON_LAG_MON_TIME",      "100")
epicsEnvSet("ECMC_MON_LAG_MON_ENA",       "0")
# At target
epicsEnvSet("ECMC_MON_AT_TARGET_TOL",     "0.3")
epicsEnvSet("ECMC_MON_AT_TARGET_TIME",    "100")
epicsEnvSet("ECMC_MON_AT_TARGET_ENA",     "1")
# Velocity
epicsEnvSet("ECMC_MON_VELO_MAX",          "200.0")
epicsEnvSet("ECMC_MON_VELO_MAX_TRAJ_TIME","100")
epicsEnvSet("ECMC_MON_VELO_MAX_DRV_TIME", "200")
epicsEnvSet("ECMC_MON_VELO_MAX_ENA",      "1")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addVirtualAxis.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addVirtualAxis.cmd
#==============================================================================
# addVirtualAxis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis-records.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis-records.cmd
#==============================================================================
# ecmc_virt_axis-records.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis.cmd",1)
iocshLoad( /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis.cmd )
#==============================================================================
# ecmc_virt_axis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(1)<>0',SUCCESS_STR='ECMC_ENC_SCALE_NUM value OK == 1...',ERROR_STR='ECMC_ENC_SCALE_NUM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(1)<>0","# ECMC_ENC_SCALE_NUM value OK == 1...", "ecmcExit Error: ECMC_ENC_SCALE_NUM == 0...")
# ECMC_ENC_SCALE_NUM value OK == 1...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(1)<>0',SUCCESS_STR='ECMC_ENC_SCALE_DENOM value OK == 1...',ERROR_STR='ECMC_ENC_SCALE_DENOM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(1)<>0","# ECMC_ENC_SCALE_DENOM value OK == 1...", "ecmcExit Error: ECMC_ENC_SCALE_DENOM == 0...")
# ECMC_ENC_SCALE_DENOM value OK == 1...
epicsEnvUnset(ECMC_EXE_CMD)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteM2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.440 OK
2021/05/25 14:00:51.441 OK
macLib: macro ECMC_DXLM_ENABLE is undefined (expanding string ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitBwd(${ECMC_AXIS_NO},${ECMC_DXLM_ENABLE})")
2021/05/25 14:00:51.441 OK
macLib: macro ECMC_DXLM_ENABLE is undefined (expanding string ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitFwd(${ECMC_AXIS_NO},${ECMC_DXLM_ENABLE})")
2021/05/25 14:00:51.441 ecmcMotorRecord:: setIntegerParam(2 motorPowerAutoOnOff_)=2
2021/05/25 14:00:51.441 ecmcMotorRecord:: setDoubleParam(2 motorPowerOnDelay_)=6
2021/05/25 14:00:51.441 ecmcMotorRecord:: setDoubleParam(2 motorPowerOffDelay_=-1
2021/05/25 14:00:51.441 ecmcMotorRecord:: connected(2)
2021/05/25 14:00:51.441 ecmcMotorRecord:: initialPoll(2) status=0
ods/ecmccfg/develop/issueWarning.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd "EXPR_STR='-1>0',WARNING_STR='WARNING: ECMC_MRES setting is deprecated and will not be used. (MRES will be calulated instead: ECMC_ENC_SCALE_NUM/ECMC_ENC_SCALE_DENOM).. '"
#==============================================================================
# issueWarning.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"-1>0","", "#-")
epicsEnvUnset(ECMC_EXE_CMD)
ecmcConfigOrDie "Cfg.CreateAxis(2,2)"
ecmcConfigOrDie "Cfg.SetAxisTrajStartPos(2,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax2.health")"
ecmcConfigOrDie "Cfg.SetAxisModRange(2, 0)"
ecmcConfigOrDie "Cfg.SetAxisModType(2, 0)"
ecmcConfigOrDie "Cfg.SetAxisEmergDeceleration(2,0.1)"
ecmcConfigOrDie "Cfg.SetAxisVelAccDecTime(2,5.0,0.1)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelTwordsCam(2,5)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelOffCam(2,4)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ZERO,"ax2.enc.actpos")"
ecmcConfigOrDie "Cfg.SetAxisEncScaleDenom(2,1)"
ecmcConfigOrDie "Cfg.SetAxisEncScaleNum(2,1)"
ecmcConfigOrDie "Cfg.SetAxisEncType(2,1)"
ecmcConfigOrDie "Cfg.SetAxisEncBits(2,0)"
ecmcConfigOrDie "Cfg.SetAxisEncAbsBits(2,0)"
ecmcConfigOrDie "Cfg.SetAxisEncOffset(2,0)"
ecmcConfigOrDie "Cfg.SetAxisEncVelFilterSize(2,100)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterSize(2,1)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterEnable(2,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax2.mon.lowlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax2.mon.highlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax2.mon.homesensor")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax2.mon.extinterlock")"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTol(2,0.3)"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTime(2,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableAtTargetMon(2,1)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTol(2,0.5)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTime(2,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableLagMon(2,0)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVel(2,200.0)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableMaxVel(2,1)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelDriveILDelay(2,200)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelTrajILDelay(2,100)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosBwd(2,0)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosFwd(2,0)"
ecmcMotorRecordCreateAxis(MCU1, "2", "6", "")
ecmcEpicsEnvSetCalc("ECMC_TEMP_SREV","if(abs(1)>0){RESULT:=abs(1);} else {RESULT:=1.0};","%d")
ecmcEpicsEnvSetCalc("ECMC_TEMP_UREV","if(abs(1)>0){RESULT:=abs(1);} else {RESULT:=1.0};","%lf")
ecmcFileExist(ecmcMotorRecord.template,1,1)
dbLoadRecords(ecmcMotorRecord.template, "PREFIX=IOC_TEST:, MOTOR_NAME=Axis2, MOTOR_PORT=MCU1, AXIS_NO=2, DESC=MCU1025 Gap (2), EGU=mm, PREC=3, VELO=5.0, JVEL=5, JAR=0.0, ACCL=0.1, RDBD=0.3, DLLM=0, DHLM=0, HOMEPROC=3,SREV=1,UREV=1.000000, ")
epicsEnvSet("ECMC_AXISFIELDINIT",  "")
ecmcFileExist(ecmcMotorRecord"home.template",1,1)
dbLoadRecords(ecmcMotorRecord"home.template", "PREFIX=IOC_TEST:, MOTOR_NAME=Axis2, MOTOR_PORT=MCU1, AXIS_NO=2,HOMEPROC=3, HOMEPOS=0.0, HVELTO=5, HVELFRM=4, HOMEACC=21, HOMEDEC=100")
epicsEnvUnset(ECMC_TEMP_SREV)
epicsEnvUnset(ECMC_TEMP_UREV)
ecmcFileExist("ecmcAxis.db",1,1)
dbLoadRecords("ecmcAxis.db","P=IOC_TEST:,AXIS_NAME=Axis2,AXIS_NO=2,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,T_SMP_MS=10,TSE=-2")
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis_unset.cmd
#==============================================================================
# ecmc_virt_axis_unset.cmd
epicsEnvUnset(ECMC_AXISCONFIG)
epicsEnvUnset(ECMC_AXISFIELDINIT)
epicsEnvUnset(ECMC_PREC)
epicsEnvUnset(ECMC_EGU)
epicsEnvUnset(ECMC_DESC)
epicsEnvUnset(ECMC_R)
epicsEnvUnset(ECMC_MOTOR_NAME)
epicsEnvUnset(ECMC_EC_AXIS_HEALTH)
epicsEnvUnset(ECMC_MOD_RANGE)
epicsEnvUnset(ECMC_MOD_TYPE)
epicsEnvUnset(ECMC_EMERG_DECEL)
epicsEnvUnset(ECMC_ACCL)
epicsEnvUnset(ECMC_HOME_VEL_TO)
epicsEnvUnset(ECMC_HOME_VEL_FRM)
epicsEnvUnset(ECMC_EC_2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
ENC_ACTPOS)
epicsEnvUnset(ECMC_ENC_SCALE_DENOM)
epicsEnvUnset(ECMC_ENC_SCALE_NUM)
epicsEnvUnset(ECMC_ENC_TYPE)
epicsEnvUnset(ECMC_ENC_BITS)
epicsEnvUnset(ECMC_ENC_ABS_BITS)
epicsEnvUnset(ECMC_ENC_ABS_OFFSET)
epicsEnvUnset(ECMC_ENC_VEL_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_ENABLE)
epicsEnvUnset(ECMC_EC_MON_LOWLIM)
epicsEnvUnset(ECMC_EC_MON_HIGHLIM)
epicsEnvUnset(ECMC_EC_MON_HOME_SWITCH)
epicsEnvUnset(ECMC_EC_MON_EXT_INTERLOCK)
epicsEnvUnset(ECMC_MON_AT_TARGET_TOL)
epicsEnvUnset(ECMC_MON_AT_TARGET_TIME)
epicsEnvUnset(ECMC_MON_AT_TARGET_ENA)
epicsEnvUnset(ECMC_MON_LAG_MON_TOL)
epicsEnvUnset(ECMC_MON_LAG_MON_TIME)
epicsEnvUnset(ECMC_MON_LAG_MON_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX)
epicsEnvUnset(ECMC_MON_VELO_MAX_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX_DRV_TIME)
epicsEnvUnset(ECMC_MON_VELO_MAX_TRAJ_TIME)
epicsEnvUnset(ECMC_MRES)
epicsEnvUnset(ECMC_JOG_VEL)
epicsEnvUnset(ECMC_JAR)
epicsEnvUnset(ECMC_HOME_PROC)
epicsEnvUnset(ECMC_HOME_POS)
epicsEnvUnset(ECMC_HOME_ACC)
epicsEnvUnset(ECMC_HOME_DEC)
epicsEnvUnset(ECMC_DRV_TYPE)
epicsEnvUnset(ECMC_VELO)
epicsEnvUnset(ECMC_SOFT_LOW_LIM)
epicsEnvUnset(ECMC_SOFT_HIGH_LIM)
# reset PREFIX
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/applyAxisSynchronization.cmd, CONFIG=./cfg/linear_2.sax)
#==============================================================================
# applyAxisSynchronization.cmd
iocshLoad ./cfg/linear_2.sax
############# Encoder
epicsEnvSet("ECMC_ENC_SOURCE",                 "1")       # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_ENC_VELO_FILT_ENABLE",       "1")       # Enable velocity filter
epicsEnvSet("ECMC_ENC_VELO_FILT_SIZE",         "10")      # Encoder velocity Low pass filter size
############# Trajectory
epicsEnvSet("ECMC_TRAJ_SOURCE",                "0")       # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_TRAJ_VELO_FILT_ENABLE",      "1")       # Enable velocity filter
epicsEnvSet("ECMC_TRAJ_VELO_FILT_SIZE",        "10")      # Trajectory velocity Low pass filter size
############# Commands 
epicsEnvSet("ECMC_CMD_FRM_OTHER_PLC_ENABLE",  "1")        # Allow commands from PLC
epicsEnvSet("ECMC_CMD_AXIS_PLC_ENABLE",       "1")        # Enable Axis PLC
# Each line below is appended to one single expression/source. 
# Executed in sync with axis (before)
epicsEnvSet("ECMC_AXIS_EXPR_LINE_1",           "if(ax3.traj.source){ax3.drv.enable:=ax1.drv.enable+ax2.drv.enable|}|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_2",           "if(ax4.traj.source){ax4.drv.enable:=ax1.drv.enable+ax2.drv.enable|}|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_3",           "ax2.enc.actpos:=ax4.enc.actpos-ax3.enc.actpos|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_4",           "ax2.traj.setpos:=ax6.traj.setpos*sin(2*pi*ax5.enc.actpos/10000)|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_5",           "ax2.mon.ilockfwd:=ax3.mon.lowlim and ax4.mon.highlim|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_6",           "ax2.mon.ilockbwd:=ax4.mon.lowlim and ax3.mon.highlim|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_7",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_8",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_9",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_10",          "")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd
#==============================================================================
# ecmc_axis_sync.cmd
ecmcConfigOrDie "Cfg.SetAxisAllowCommandsFromPLC(2,1)"
ecmcConfigOrDie "Cfg.SetAxisPLCEnable(2,1)"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(2)=if(ax3.traj.source){ax3.drv.enable:=ax1.drv.enable+ax2.drv.enable|}|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(2)=if(ax4.traj.source){ax4.drv.enable:=ax1.drv.enable+ax2.drv.enable|}|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(2)=ax2.enc.actpos:=ax4.enc.actpos-ax3.enc.actpos|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(2)=ax2.traj.setpos:=ax6.traj.setpos*sin(2*pi*ax5.enc.actpos/10000)|"
ecmcConfigO2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
2021/05/25 14:00:51.443 OK
rDie "Cfg.AppendAxisPLCExpr(2)=ax2.mon.ilockfwd:=ax3.mon.lowlim and ax4.mon.highlim|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(2)=ax2.mon.ilockbwd:=ax4.mon.lowlim and ax3.mon.highlim|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(2)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(2)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(2)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(2)="
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterSize(2,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterEnable(2,1)"
ecmcConfigOrDie "Cfg.SetAxisEncSourceType(2,1)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterSize(2,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterEnable(2,1)"
ecmcConfigOrDie "Cfg.SetAxisTrajSourceType(2,0)"
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd
#==============================================================================
# ecmc_axis_sync_unset.cmd
epicsEnvUnset(ECMC_CMD_FRM_OTHER_PLC_ENABLE)
epicsEnvUnset(ECMC_CMD_AXIS_PLC_ENABLE)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_1)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_2)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_3)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_4)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_5)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_6)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_7)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_8)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_9)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_10)
epicsEnvUnset(ECMC_ENC_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_ENC_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_ENC_SOURCE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_TRAJ_SOURCE)
##############################################################################
## AXIS 5 (timing system, EL5101)
#
epicsEnvSet("DEV",      "IOC_TEST")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/configureVirtualAxis.cmd, CONFIG=./cfg/linear_5.vax)
#==============================================================================
# configureVirtualAxis.cmd
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad ./cfg/linear_5.vax
#General
epicsEnvSet("ECMC_MOTOR_NAME",            "timing")
epicsEnvSet("ECMC_R",                     "timing-")
epicsEnvSet("ECMC_AXIS_NO",               "5")
epicsEnvSet("ECMC_DESC",                  "MCU1025 Timing System Simulation (5)")
epicsEnvSet("ECMC_EGU",                   "mm")                       # Motor Record Unit
epicsEnvSet("ECMC_PREC",                  "3")                        # Motor Record Precision
epicsEnvSet("ECMC_AXISCONFIG",            "")                         # Extra parameters to driver
epicsEnvSet("ECMC_EC_AXIS_HEALTH",        "")                         # Entry for axis health output (example: ec0.s1.BO_1.0)
epicsEnvSet("ECMC_MOD_RANGE" ,            "0")                        # Modulo range (traj setpoints and encoder values will be in range 0..ECMC_MOD_RANGE)
epicsEnvSet("ECMC_MOD_TYPE",              "0")                        # For positioning and MOD_RANGE>0: 0 = Normal, 1 = Always Fwd, 2 = Always Bwd, 3 = Closest Distance
#Encoder
epicsEnvSet("ECMC_ENC_SCALE_NUM"          "1")
epicsEnvSet("ECMC_ENC_SCALE_DENOM"        "1")
epicsEnvSet("ECMC_ENC_TYPE"               "1")                        # Type: 0=Incremental, 1=Absolute
epicsEnvSet("ECMC_ENC_BITS"               "16")                       # Total bit count of encoder raw data
epicsEnvSet("ECMC_ENC_ABS_BITS",          "0")                        # Absolute bit count (for absolute encoders) always least significant part of ECMC_ENC_BITS
epicsEnvSet("ECMC_ENC_ABS_OFFSET"         "0")                        # Encoder offset in eng units (for absolute encoders)
epicsEnvSet("ECMC_EC_ENC_ACTPOS",         "ec0.s9.POSITION")          # Ethercat entry for actual position input (encoder)
#Trajectory
epicsEnvSet("ECMC_VELO",                  "5.0")
epicsEnvSet("ECMC_JOG_VEL",               "5")
epicsEnvSet("ECMC_JAR",                   "0.0")                      # JAR defaults to VELO/ACCL
epicsEnvSet("ECMC_ACCL",                  "0.1")
epicsEnvSet("ECMC_EMERG_DECEL",           "0.1")             # Emergency deceleration
#Homing
epicsEnvSet("ECMC_HOME_PROC",             "3")
epicsEnvSet("ECMC_HOME_POS",              "0.0")
epicsEnvSet("ECMC_HOME_VEL_TO",           "5")
epicsEnvSet("ECMC_HOME_VEL_FRM",          "4")
epicsEnvSet("ECMC_HOME_ACC",              "21")
epicsEnvSet("ECMC_HOME_DEC",              "100")
#Monitoring
# Switches
epicsEnvSet("ECMC_EC_MON_LOWLIM",         "ec0.s1.ONE.0")           #  Ethercat entry for low limit switch input
epicsEnvSet("ECMC_EC_MON_HIGHLIM",        "ec0.s1.ONE.0")           #  Ethercat entry for high limit switch inpuit
epicsEnvSet("ECMC_EC_MON_HOME_SWITCH",    "ec0.s1.ONE.0")           #  Ethercat entry for home switch input
epicsEnvSet("ECMC_EC_MON_EXT_INTERLOCK",  "ec0.s1.ONE.0")           #  Ethercat entry for external interlock input
# Softlimits (disable with 0,0)
epicsEnvSet("ECMC_SOFT_LOW_LIM",          "0")
epicsEnvSet("ECMC_SOFT_HIGH_LIM",         "0")
# Position lag
epicsEnvSet("ECMC_MON_LAG_MON_TOL",       "0.5")
epicsEnvSet("ECMC_MON_LAG_MON_TIME",      "100")
epicsEnvSet("ECMC_MON_LAG_MON_ENA",       "0")
# At target
epicsEnvSet("ECMC_MON_AT_TARGET_TOL",     "0.1")
epicsEnvSet("ECMC_MON_AT_TARGET_TIME",     "100")
epicsEnvSet("ECMC_MON_AT_TARGET_ENA",     "1")
# Velocity
epicsEnvSet("ECMC_MON_VELO_MAX",          "100.0")
epicsEnvSet("ECMC_MON_VELO_MAX_TRAJ_TIME","100")
epicsEnvSet("ECMC_MON_VELO_MAX_DRV_TIME", "200")
epicsEnvSet("ECMC_MON_VELO_MAX_ENA",      "0")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addVirtualAxis.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addVirtualAxis.cmd
#==============================================================================
# addVirtualAxis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis-records.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis-records.cmd
#==============================================================================
# ecmc_virt_axis-records.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis.cmd",1)
iocshLoad( /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis.cmd )
#==============================================================================
# ecmc_virt_axis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(1)<>0',SUCCESS_STR='ECMC_ENC_SCALE_NUM value OK == 1...',ERROR_STR='ECMC_ENC_SCALE_NUM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(1)<>0","# ECMC_ENC_SCALE_NUM value OK == 1...", "ecmcExit Error: ECMC_ENC_SCALE_NUM == 0...")
# ECMC_ENC_SCALE_NUM value OK == 1...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(1)<>0',SUCCESS_STR='ECMC_ENC_SCALE_DENOM value OK == 1...',ERROR_STR='ECMC_ENC_SCALE_DENOM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(1)<>0","# ECMC_ENC_SCALE_DENOM value OK == 1...", "ecmcExit Error: ECMC_ENC_SCALE_DENOM == 0...")
# ECMC_ENC_SCALE_DENOM value OK == 1...
epicsEnvUnset(ECMC_EXE_CMD)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd "EXPR_STR='-1>0',WARNING_STR='WARNING: ECMC_MRES setting is deprecated and will not be used. (MRES will be calulated instead: ECMC_ENC_SCALE_NUM/ECMC_ENC_SCALE_DENOM).. '"
#==============================================================================
# issueWarning.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"-1>0","", "#-")
epicsEnvUnset(E2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.445 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
2021/05/25 14:00:51.446 OK
macLib: macro ECMC_DXLM_ENABLE is undefined (expanding string ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitBwd(${ECMC_AXIS_NO},${ECMC_DXLM_ENABLE})")
2021/05/25 14:00:51.446 OK
macLib: macro ECMC_DXLM_ENABLE is undefined (expanding string ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitFwd(${ECMC_AXIS_NO},${ECMC_DXLM_ENABLE})")
2021/05/25 14:00:51.446 ecmcMotorRecord:: setIntegerParam(5 motorPowerAutoOnOff_)=2
2021/05/25 14:00:51.446 ecmcMotorRecord:: setDoubleParam(5 motorPowerOnDelay_)=6
2021/05/25 14:00:51.446 ecmcMotorRecord:: setDoubleParam(5 motorPowerOffDelay_=-1
2021/05/25 14:00:51.446 ecmcMotorRecord:: connected(5)
2021/05/25 14:00:51.446 ecmcMotorRecord:: initialPoll(5) status=0
CMC_EXE_CMD)
ecmcConfigOrDie "Cfg.CreateAxis(5,2)"
ecmcConfigOrDie "Cfg.SetAxisTrajStartPos(5,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax5.health")"
ecmcConfigOrDie "Cfg.SetAxisModRange(5, 0)"
ecmcConfigOrDie "Cfg.SetAxisModType(5, 0)"
ecmcConfigOrDie "Cfg.SetAxisEmergDeceleration(5,0.1)"
ecmcConfigOrDie "Cfg.SetAxisVelAccDecTime(5,5.0,0.1)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelTwordsCam(5,5)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelOffCam(5,4)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s9.POSITION,"ax5.enc.actpos")"
ecmcConfigOrDie "Cfg.SetAxisEncScaleDenom(5,1)"
ecmcConfigOrDie "Cfg.SetAxisEncScaleNum(5,1)"
ecmcConfigOrDie "Cfg.SetAxisEncType(5,1)"
ecmcConfigOrDie "Cfg.SetAxisEncBits(5,16)"
ecmcConfigOrDie "Cfg.SetAxisEncAbsBits(5,0)"
ecmcConfigOrDie "Cfg.SetAxisEncOffset(5,0)"
ecmcConfigOrDie "Cfg.SetAxisEncVelFilterSize(5,100)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterSize(5,1)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterEnable(5,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax5.mon.lowlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax5.mon.highlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax5.mon.homesensor")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax5.mon.extinterlock")"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTol(5,0.1)"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTime(5,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableAtTargetMon(5,1)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTol(5,0.5)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTime(5,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableLagMon(5,0)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVel(5,100.0)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableMaxVel(5,0)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelDriveILDelay(5,200)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelTrajILDelay(5,100)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosBwd(5,0)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosFwd(5,0)"
ecmcMotorRecordCreateAxis(MCU1, "5", "6", "")
ecmcEpicsEnvSetCalc("ECMC_TEMP_SREV","if(abs(1)>0){RESULT:=abs(1);} else {RESULT:=1.0};","%d")
ecmcEpicsEnvSetCalc("ECMC_TEMP_UREV","if(abs(1)>0){RESULT:=abs(1);} else {RESULT:=1.0};","%lf")
ecmcFileExist(ecmcMotorRecord.template,1,1)
dbLoadRecords(ecmcMotorRecord.template, "PREFIX=IOC_TEST:, MOTOR_NAME=timing, MOTOR_PORT=MCU1, AXIS_NO=5, DESC=MCU1025 Timing System Simulation (5), EGU=mm, PREC=3, VELO=5.0, JVEL=5, JAR=0.0, ACCL=0.1, RDBD=0.1, DLLM=0, DHLM=0, HOMEPROC=3,SREV=1,UREV=1.000000, ")
epicsEnvSet("ECMC_AXISFIELDINIT",  "")
ecmcFileExist(ecmcMotorRecord"home.template",1,1)
dbLoadRecords(ecmcMotorRecord"home.template", "PREFIX=IOC_TEST:, MOTOR_NAME=timing, MOTOR_PORT=MCU1, AXIS_NO=5,HOMEPROC=3, HOMEPOS=0.0, HVELTO=5, HVELFRM=4, HOMEACC=21, HOMEDEC=100")
epicsEnvUnset(ECMC_TEMP_SREV)
epicsEnvUnset(ECMC_TEMP_UREV)
ecmcFileExist("ecmcAxis.db",1,1)
dbLoadRecords("ecmcAxis.db","P=IOC_TEST:,AXIS_NAME=timing,AXIS_NO=5,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,T_SMP_MS=10,TSE=-2")
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis_unset.cmd
#==============================================================================
# ecmc_virt_axis_unset.cmd
epicsEnvUnset(ECMC_AXISCONFIG)
epicsEnvUnset(ECMC_AXISFIELDINIT)
epicsEnvUnset(ECMC_PREC)
epicsEnvUnset(ECMC_EGU)
epicsEnvUnset(ECMC_DESC)
epicsEnvUnset(ECMC_R)
epicsEnvUnset(ECMC_MOTOR_NAME)
epicsEnvUnset(ECMC_EC_AXIS_HEALTH)
epicsEnvUnset(ECMC_MOD_RANGE)
epicsEnvUnset(ECMC_MOD_TYPE)
epicsEnvUnset(ECMC_EMERG_DECEL)
epicsEnvUnset(ECMC_ACCL)
epicsEnvUnset(ECMC_HOME_VEL_TO)
epicsEnvUnset(ECMC_HOME_VEL_FRM)
epicsEnvUnset(ECMC_EC_ENC_ACTPOS)
epicsEnvUnset(ECMC_ENC_SCALE_DENOM)
epicsEnvUnset(ECMC_ENC_SCALE_NUM)
epicsEnvUnset(ECMC_ENC_TYPE)
epicsEnvUnset(ECMC_ENC_BITS)
epicsEnvUnset(ECMC_ENC_ABS_BITS)
epicsEnvUnset(ECMC_ENC_ABS_OFFSET)
epicsEnvUnset(ECMC_ENC_VEL_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_ENABLE)
epicsEnvUnset(ECMC_EC_MON_LOWLIM)
epicsEnvUnset(ECMC_EC_MON_HIGHLIM)
epicsEnvUnset(ECMC_EC_MON_HOME_SWITCH)
epicsEnvUn2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.448 OK
2021/05/25 14:00:51.449 OK
2021/05/25 14:00:51.449 OK
2021/05/25 14:00:51.449 OK
set(ECMC_EC_MON_EXT_INTERLOCK)
epicsEnvUnset(ECMC_MON_AT_TARGET_TOL)
epicsEnvUnset(ECMC_MON_AT_TARGET_TIME)
epicsEnvUnset(ECMC_MON_AT_TARGET_ENA)
epicsEnvUnset(ECMC_MON_LAG_MON_TOL)
epicsEnvUnset(ECMC_MON_LAG_MON_TIME)
epicsEnvUnset(ECMC_MON_LAG_MON_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX)
epicsEnvUnset(ECMC_MON_VELO_MAX_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX_DRV_TIME)
epicsEnvUnset(ECMC_MON_VELO_MAX_TRAJ_TIME)
epicsEnvUnset(ECMC_MRES)
epicsEnvUnset(ECMC_JOG_VEL)
epicsEnvUnset(ECMC_JAR)
epicsEnvUnset(ECMC_HOME_PROC)
epicsEnvUnset(ECMC_HOME_POS)
epicsEnvUnset(ECMC_HOME_ACC)
epicsEnvUnset(ECMC_HOME_DEC)
epicsEnvUnset(ECMC_DRV_TYPE)
epicsEnvUnset(ECMC_VELO)
epicsEnvUnset(ECMC_SOFT_LOW_LIM)
epicsEnvUnset(ECMC_SOFT_HIGH_LIM)
# reset PREFIX
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/applyAxisSynchronization.cmd, CONFIG=./cfg/linear_5.sax)
#==============================================================================
# applyAxisSynchronization.cmd
iocshLoad ./cfg/linear_5.sax
############# Encoder
epicsEnvSet("ECMC_ENC_SOURCE",                 "0")      # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_ENC_VELO_FILT_ENABLE",       "0")      # Enable velocity filter
epicsEnvSet("ECMC_ENC_VELO_FILT_SIZE",         "10")     # Encoder velocity Low pass filter size
############# Trajectory
epicsEnvSet("ECMC_TRAJ_SOURCE",                "0")      # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_TRAJ_VELO_FILT_ENABLE",      "0")      # Enable velocity filter
epicsEnvSet("ECMC_TRAJ_VELO_FILT_SIZE",        "10")     # Trajectory velocity Low pass filter size
############# Commands
epicsEnvSet("ECMC_CMD_FRM_OTHER_PLC_ENABLE",  "1")       # Allow commands from PLC
epicsEnvSet("ECMC_CMD_AXIS_PLC_ENABLE",       "1")       # Enable Axis PLC
# Each line below is appended to one single expression/source. 
# Executed in sync with axis (before)
epicsEnvSet("ECMC_AXIS_EXPR_LINE_1",           "if(ax1.traj.source){ax1.drv.enable:=ax5.drv.enable|}|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_2",           "if(ax2.traj.source){ax2.drv.enable:=ax5.drv.enable|}|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_3",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_4",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_5",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_6",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_7",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_8",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_9",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_10",          "")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd
#==============================================================================
# ecmc_axis_sync.cmd
ecmcConfigOrDie "Cfg.SetAxisAllowCommandsFromPLC(5,1)"
ecmcConfigOrDie "Cfg.SetAxisPLCEnable(5,1)"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)=if(ax1.traj.source){ax1.drv.enable:=ax5.drv.enable|}|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)=if(ax2.traj.source){ax2.drv.enable:=ax5.drv.enable|}|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(5)="
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterSize(5,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterEnable(5,0)"
ecmcConfigOrDie "Cfg.SetAxisEncSourceType(5,0)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterSize(5,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterEnable(5,0)"
ecmcConfigOrDie "Cfg.SetAxisTrajSourceType(5,0)"
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd
#==============================================================================
# ecmc_axis_sync_unset.cmd
epicsEnvUnset(ECMC_CMD_FRM_OTHER_PLC_ENABLE)
epicsEnvUnset(ECMC_CMD_AXIS_PLC_ENABLE)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_1)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_2)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_3)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_4)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_5)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_6)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_7)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_8)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_9)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_10)
epicsEnvUnset(ECMC_ENC_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_ENC_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_ENC_SOURCE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_TRAJ_SOURCE)
##############################################################################
## AXIS 6 (amplitude)
#
epicsEnvSet("DEV",      "IOC_TEST")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/configureVirtualAxis.cmd, CONFIG=./cfg/linear_6.vax)
#==============================================================================
# configureVirtualAxis.cmd
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad ./cfg/linear_6.vax
#General
epicsEnvSet("ECMC_MOTOR_NAME",            "amplitude")
epicsEnvSet("ECMC_R",                     "amplitude-")
epicsEnvSet("ECMC_AXIS_NO",               "6")
epicsEnvSet("ECMC_DESC",                  "MCU1025 Amplitude of osc (6)")
epicsEnvSet("ECMC_EGU",                   "mm")                       # Motor Record Unit
epicsEnvSet("ECMC_PREC",                  "3")                        # Motor Record Precision
epicsEnvSet("ECMC_AXISCONFIG",            "")                         # Extra parameters to driver
epicsEnvSet("ECMC_EC_AXIS_HEALTH",        "")                         # Entry for axis health output (example: ec0.s1.BO_1.0)
epicsEnvSet("ECMC_MOD_RANGE" ,            "0")                        # Modulo range (traj setpoints and encoder values will be in range 0..ECMC_MOD_RANGE)
epicsEnvSet("ECMC_MOD_TYPE",              "0")                        # For positioning and MOD_RANGE>0: 0 = Normal, 1 = Always Fwd, 2 = Always Bwd, 3 = Closest Distance
# Encoder
epicsEnvSet("ECMC_ENC_SCALE_NUM"          "1")
epicsEnvSet("ECMC_ENC_SCALE_DENOM"        "1")
epicsEnvSet("ECMC_ENC_TYPE"               "1")                        # Type: 0=Incremental, 1=Absolute
epicsEnvSet("ECMC_ENC_BITS"               "16")                       # Total bit count of encoder raw data
epicsEnvSet("ECMC_ENC_ABS_BITS",          "0")                        # Absolute bit count (for absolute encoders) always least significant part of ECMC_ENC_BITS
epicsEnvSet("ECMC_ENC_ABS_OFFSET"         "0")                        # Encoder offset in eng units (for absolute encoders)
epicsEnvSet("ECMC_EC_ENC_ACTPOS",         "ec0.s1.ZERO")             # Ethercat entry for actual position input (encoder)
#Trajectory
epicsEnvSet("ECMC_VELO",                  "0.3")
epicsEnvSet("ECMC_JOG_VEL",               "0.3")
epicsEnvSet("ECMC_JAR",                   "0.0")                      # JAR defaults to VELO/ACCL
epicsEnvSet("ECMC_ACCL",                  "1")
epicsEnvSet("ECMC_EMERG_DECEL",           "1")             # Emergency deceleration
#Homing
epicsEnvSet("ECMC_HOME_PROC",             "3")
epicsEnvSet("ECMC_HOME_POS",              "0.0")
epicsEnvSet("ECMC_HOME_VEL_TO",           "5")
epicsEnvSet("ECMC_HOME_VEL_FRM",          "4")
epicsEnvSet("ECMC_HOME_ACC",              "21")
epicsEnvSet("ECMC_HOME_DEC",              "100")
#Monitoring
# Switches
epicsEnvSet("ECMC_EC_MON_LOWLIM",         "ec0.s1.ONE.0")           #  Ethercat entry for low limit switch input
epicsEnvSet("ECMC_EC_MON_HIGHLIM",        "ec0.s1.ONE.0")           #  Ethercat entry for high limit switch inpuit
epicsEnvSet("ECMC_EC_MON_HOME_SWITCH",    "ec0.s1.ONE.0")           #  Ethercat entry for home switch input
epicsEnvSet("ECMC_EC_MON_EXT_INTERLOCK",  "ec0.s1.ONE.0")           #  Ethercat entry for external interlock input
# Softlimits (disable with 0,0)
epicsEnvSet("ECMC_SOFT_LOW_LIM",          "0")
epicsEnvSet("ECMC_SOFT_HIGH_LIM2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.450 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
",         "0")
# Position lag
epicsEnvSet("ECMC_MON_LAG_MON_TOL",       "0.5")
epicsEnvSet("ECMC_MON_LAG_MON_TIME",      "100")
epicsEnvSet("ECMC_MON_LAG_MON_ENA",       "0")
# At target
epicsEnvSet("ECMC_MON_AT_TARGET_TOL",     "0.1")
epicsEnvSet("ECMC_MON_AT_TARGET_TIME",     "100")
epicsEnvSet("ECMC_MON_AT_TARGET_ENA",     "1")
# Velocity
epicsEnvSet("ECMC_MON_VELO_MAX",          "100.0")
epicsEnvSet("ECMC_MON_VELO_MAX_TRAJ_TIME","100")
epicsEnvSet("ECMC_MON_VELO_MAX_DRV_TIME", "200")
epicsEnvSet("ECMC_MON_VELO_MAX_ENA",      "1")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addVirtualAxis.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/addVirtualAxis.cmd
#==============================================================================
# addVirtualAxis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis-records.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis-records.cmd
#==============================================================================
# ecmc_virt_axis-records.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis.cmd",1)
iocshLoad( /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis.cmd )
#==============================================================================
# ecmc_virt_axis.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(1)<>0',SUCCESS_STR='ECMC_ENC_SCALE_NUM value OK == 1...',ERROR_STR='ECMC_ENC_SCALE_NUM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(1)<>0","# ECMC_ENC_SCALE_NUM value OK == 1...", "ecmcExit Error: ECMC_ENC_SCALE_NUM == 0...")
# ECMC_ENC_SCALE_NUM value OK == 1...
epicsEnvUnset(ECMC_EXE_CMD)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/verifyOrDie.cmd "EXPR_STR='abs(1)<>0',SUCCESS_STR='ECMC_ENC_SCALE_DENOM value OK == 1...',ERROR_STR='ECMC_ENC_SCALE_DENOM == 0...'"
#==============================================================================
# verifyOrDie.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"abs(1)<>0","# ECMC_ENC_SCALE_DENOM value OK == 1...", "ecmcExit Error: ECMC_ENC_SCALE_DENOM == 0...")
# ECMC_ENC_SCALE_DENOM value OK == 1...
epicsEnvUnset(ECMC_EXE_CMD)
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/issueWarning.cmd "EXPR_STR='-1>0',WARNING_STR='WARNING: ECMC_MRES setting is deprecated and will not be used. (MRES will be calulated instead: ECMC_ENC_SCALE_NUM/ECMC_ENC_SCALE_DENOM).. '"
#==============================================================================
# issueWarning.cmd
ecmcEpicsEnvSetCalcTernary(ECMC_EXE_CMD,"-1>0","", "#-")
epicsEnvUnset(ECMC_EXE_CMD)
ecmcConfigOrDie "Cfg.CreateAxis(6,2)"
ecmcConfigOrDie "Cfg.SetAxisTrajStartPos(6,0)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(,"ax6.health")"
ecmcConfigOrDie "Cfg.SetAxisModRange(6, 0)"
ecmcConfigOrDie "Cfg.SetAxisModType(6, 0)"
ecmcConfigOrDie "Cfg.SetAxisEmergDeceleration(6,1)"
ecmcConfigOrDie "Cfg.SetAxisVelAccDecTime(6,0.3,1)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelTwordsCam(6,5)"
ecmcConfigOrDie "Cfg.SetAxisHomeVelOffCam(6,4)"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ZERO,"ax6.enc.actpos")"
ecmcConfigOrDie "Cfg.SetAxisEncScaleDenom(6,1)"
ecmcConfigOrDie "Cfg.SetAxisEncScaleNum(6,1)"
ecmcConfigOrDie "Cfg.SetAxisEncType(6,1)"
ecmcConfigOrDie "Cfg.SetAxisEncBits(6,16)"
ecmcConfigOrDie "Cfg.SetAxisEncAbsBits(6,0)"
ecmcConfigOrDie "Cfg.SetAxisEncOffset(6,0)"
ecmcConfigOrDie "Cfg.SetAxisEncVelFilterSize(6,100)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterSize(6,1)"
ecmcConfigOrDie "Cfg.SetAxisEncPosFilterEnable(6,0)"
ecmcConfigOrDie "Cfg.Li2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
2021/05/25 14:00:51.451 OK
macLib: macro ECMC_DXLM_ENABLE is undefined (expanding string ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitBwd(${ECMC_AXIS_NO},${ECMC_DXLM_ENABLE})")
2021/05/25 14:00:51.451 OK
macLib: macro ECMC_DXLM_ENABLE is undefined (expanding string ecmcConfigOrDie "Cfg.SetAxisEnableSoftLimitFwd(${ECMC_AXIS_NO},${ECMC_DXLM_ENABLE})")
2021/05/25 14:00:51.451 ecmcMotorRecord:: setIntegerParam(6 motorPowerAutoOnOff_)=2
2021/05/25 14:00:51.451 ecmcMotorRecord:: setDoubleParam(6 motorPowerOnDelay_)=6
2021/05/25 14:00:51.451 ecmcMotorRecord:: setDoubleParam(6 motorPowerOffDelay_=-1
2021/05/25 14:00:51.451 ecmcMotorRecord:: connected(6)
2021/05/25 14:00:51.451 ecmcMotorRecord:: initialPoll(6) status=0
nkEcEntryToObject(ec0.s1.ONE.0,"ax6.mon.lowlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax6.mon.highlim")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax6.mon.homesensor")"
ecmcConfigOrDie "Cfg.LinkEcEntryToObject(ec0.s1.ONE.0,"ax6.mon.extinterlock")"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTol(6,0.1)"
ecmcConfigOrDie "Cfg.SetAxisMonAtTargetTime(6,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableAtTargetMon(6,1)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTol(6,0.5)"
ecmcConfigOrDie "Cfg.SetAxisMonPosLagTime(6,100)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableLagMon(6,0)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVel(6,100.0)"
ecmcConfigOrDie "Cfg.SetAxisMonEnableMaxVel(6,1)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelDriveILDelay(6,200)"
ecmcConfigOrDie "Cfg.SetAxisMonMaxVelTrajILDelay(6,100)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosBwd(6,0)"
ecmcConfigOrDie "Cfg.SetAxisSoftLimitPosFwd(6,0)"
ecmcMotorRecordCreateAxis(MCU1, "6", "6", "")
ecmcEpicsEnvSetCalc("ECMC_TEMP_SREV","if(abs(1)>0){RESULT:=abs(1);} else {RESULT:=1.0};","%d")
ecmcEpicsEnvSetCalc("ECMC_TEMP_UREV","if(abs(1)>0){RESULT:=abs(1);} else {RESULT:=1.0};","%lf")
ecmcFileExist(ecmcMotorRecord.template,1,1)
dbLoadRecords(ecmcMotorRecord.template, "PREFIX=IOC_TEST:, MOTOR_NAME=amplitude, MOTOR_PORT=MCU1, AXIS_NO=6, DESC=MCU1025 Amplitude of osc (6), EGU=mm, PREC=3, VELO=0.3, JVEL=0.3, JAR=0.0, ACCL=1, RDBD=0.1, DLLM=0, DHLM=0, HOMEPROC=3,SREV=1,UREV=1.000000, ")
epicsEnvSet("ECMC_AXISFIELDINIT",  "")
ecmcFileExist(ecmcMotorRecord"home.template",1,1)
dbLoadRecords(ecmcMotorRecord"home.template", "PREFIX=IOC_TEST:, MOTOR_NAME=amplitude, MOTOR_PORT=MCU1, AXIS_NO=6,HOMEPROC=3, HOMEPOS=0.0, HVELTO=5, HVELFRM=4, HOMEACC=21, HOMEDEC=100")
epicsEnvUnset(ECMC_TEMP_SREV)
epicsEnvUnset(ECMC_TEMP_UREV)
ecmcFileExist("ecmcAxis.db",1,1)
dbLoadRecords("ecmcAxis.db","P=IOC_TEST:,AXIS_NAME=amplitude,AXIS_NO=6,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,T_SMP_MS=10,TSE=-2")
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_virt_axis_unset.cmd
#==============================================================================
# ecmc_virt_axis_unset.cmd
epicsEnvUnset(ECMC_AXISCONFIG)
epicsEnvUnset(ECMC_AXISFIELDINIT)
epicsEnvUnset(ECMC_PREC)
epicsEnvUnset(ECMC_EGU)
epicsEnvUnset(ECMC_DESC)
epicsEnvUnset(ECMC_R)
epicsEnvUnset(ECMC_MOTOR_NAME)
epicsEnvUnset(ECMC_EC_AXIS_HEALTH)
epicsEnvUnset(ECMC_MOD_RANGE)
epicsEnvUnset(ECMC_MOD_TYPE)
epicsEnvUnset(ECMC_EMERG_DECEL)
epicsEnvUnset(ECMC_ACCL)
epicsEnvUnset(ECMC_HOME_VEL_TO)
epicsEnvUnset(ECMC_HOME_VEL_FRM)
epicsEnvUnset(ECMC_EC_ENC_ACTPOS)
epicsEnvUnset(ECMC_ENC_SCALE_DENOM)
epicsEnvUnset(ECMC_ENC_SCALE_NUM)
epicsEnvUnset(ECMC_ENC_TYPE)
epicsEnvUnset(ECMC_ENC_BITS)
epicsEnvUnset(ECMC_ENC_ABS_BITS)
epicsEnvUnset(ECMC_ENC_ABS_OFFSET)
epicsEnvUnset(ECMC_ENC_VEL_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_SIZE)
epicsEnvUnset(ECMC_ENC_POS_FILTER_ENABLE)
epicsEnvUnset(ECMC_EC_MON_LOWLIM)
epicsEnvUnset(ECMC_EC_MON_HIGHLIM)
epicsEnvUnset(ECMC_EC_MON_HOME_SWITCH)
epicsEnvUnset(ECMC_EC_MON_EXT_INTERLOCK)
epicsEnvUnset(ECMC_MON_AT_TARGET_TOL)
epicsEnvUnset(ECMC_MON_AT_TARGET_TIME)
epicsEnvUnset(ECMC_MON_AT_TARGET_ENA)
epicsEnvUnset(ECMC_MON_LAG_MON_TOL)
epicsEnvUnset(ECMC_MON_LAG_MON_TIME)
epicsEnvUnset(ECMC_MON_LAG_MON_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX)
epicsEnvUnset(ECMC_MON_VELO_MAX_ENA)
epicsEnvUnset(ECMC_MON_VELO_MAX_DRV_TIME)
epicsEnvUnset(ECMC_MON_VELO_MAX_TRAJ_TIME)
epicsEnvUnset(ECMC_MRES)
epicsEnvUnset(ECMC_JOG_VEL)
epicsEnvUnset(ECMC_JAR)
epicsEnvUnset(ECMC_HOME_PROC)
epicsEnvUnset(ECMC_HOME_POS)
epicsEnvUnset(ECMC_HOME_ACC)
epicsEnvUnset(ECMC_HOME_DEC)
epicsEnvUnset(ECMC_DRV_TYPE)
epicsEnvUnset(ECMC_VELO)
epicsEnvUnset(ECMC_SOFT_LOW_LIM)
epicsEnvUnset(ECMC_SOFT_HIGH_LIM)
# reset PREFIX
epicsEnvSet("ECMC_PREFIX"      "IOC_TEST:")
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/applyAxisSynchronization.cmd, CONFIG=./cfg/linear_6.sax)
#=====================================================2021/05/25 14:00:51.453 OK
2021/05/25 14:00:51.453 OK
2021/05/25 14:00:51.453 OK
2021/05/25 14:00:51.453 OK
2021/05/25 14:00:51.453 OK
2021/05/25 14:00:51.453 OK
2021/05/25 14:00:51.453 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
=========================
# applyAxisSynchronization.cmd
iocshLoad ./cfg/linear_6.sax
############# Encoder
epicsEnvSet("ECMC_ENC_SOURCE",                 "1")      # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_ENC_VELO_FILT_ENABLE",       "0")      # Enable velocity filter
epicsEnvSet("ECMC_ENC_VELO_FILT_SIZE",         "10")     # Encoder velocity Low pass filter size
############# Trajectory
epicsEnvSet("ECMC_TRAJ_SOURCE",                "0")      # 0 Internal (from hardware), 1 from PLC
epicsEnvSet("ECMC_TRAJ_VELO_FILT_ENABLE",      "0")      # Enable velocity filter
epicsEnvSet("ECMC_TRAJ_VELO_FILT_SIZE",        "10")     # Trajectory velocity Low pass filter size
############# Commands
epicsEnvSet("ECMC_CMD_FRM_OTHER_PLC_ENABLE",   "1")      # Allow commands from PLC
epicsEnvSet("ECMC_CMD_AXIS_PLC_ENABLE",        "1")      # Enable Axis PLC
# Each line below is appended to one single expression/source. 
# Executed in sync with axis (before)
epicsEnvSet("ECMC_AXIS_EXPR_LINE_1",           "ax6.enc.actpos:=ax6.traj.setpos|static.testvar:=ax1.enc.actvel|")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_2",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_3",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_4",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_5",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_6",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_7",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_8",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_9",           "")
epicsEnvSet("ECMC_AXIS_EXPR_LINE_10",          "")
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync.cmd
#==============================================================================
# ecmc_axis_sync.cmd
ecmcConfigOrDie "Cfg.SetAxisAllowCommandsFromPLC(6,1)"
ecmcConfigOrDie "Cfg.SetAxisPLCEnable(6,1)"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)=ax6.enc.actpos:=ax6.traj.setpos|static.testvar:=ax1.enc.actvel|"
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)="
ecmcConfigOrDie "Cfg.AppendAxisPLCExpr(6)="
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterSize(6,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCEncVelFilterEnable(6,0)"
ecmcConfigOrDie "Cfg.SetAxisEncSourceType(6,1)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterSize(6,10)"
ecmcConfigOrDie "Cfg.SetAxisPLCTrajVelFilterEnable(6,0)"
ecmcConfigOrDie "Cfg.SetAxisTrajSourceType(6,0)"
ecmcFileExist(/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd,1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/ecmc_axis_sync_unset.cmd
#==============================================================================
# ecmc_axis_sync_unset.cmd
epicsEnvUnset(ECMC_CMD_FRM_OTHER_PLC_ENABLE)
epicsEnvUnset(ECMC_CMD_AXIS_PLC_ENABLE)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_1)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_2)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_3)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_4)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_5)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_6)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_7)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_8)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_9)
epicsEnvUnset(ECMC_AXIS_EXPR_LINE_10)
epicsEnvUnset(ECMC_ENC_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_ENC_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_ENC_SOURCE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_SIZE)
epicsEnvUnset(ECMC_TRAJ_VELO_FILT_ENABLE)
epicsEnvUnset(ECMC_TRAJ_SOURCE)
##############################################################################
############# Configure diagnostics:
ecmcConfigOrDie "Cfg.EcSetDiagnostics(1)"
ecmcConfigOrDie "Cfg.EcEnablePrintouts(0)"
ecmcConfigOrDie "Cfg.EcSetDomainFailedCyclesLimit(100)"
ecmcConfigOrDie "Cfg.SetDiagAxisIndex(1)"
ecmcConfigOrDie "Cfg.SetDiagAxi2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.454 OK
2021/05/25 14:00:51.455 INFO: Locking memory
2021/05/25 14:00:51.467 Starting up EtherCAT bus: 0 second(s). Max wait time 30 second(s).
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(1) mvnNRdy=1 bBusy=0 bExecute=0 bEnabled=0 atTarget=0 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000007
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(1) bError=0 drvlocal.statusBinData.onChangeData.error=0x0
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(1) callParamCallbacksUpdateError Error=4 old=-1 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(2) mvnNRdy=1 bBusy=0 bExecute=0 bEnabled=0 atTarget=0 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000003
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(2) bError=0 drvlocal.statusBinData.onChangeData.error=0x0
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(2) callParamCallbacksUpdateError Error=4 old=-1 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=0 bExecute=0 bEnabled=0 atTarget=0 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000003
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(3) bError=0 drvlocal.statusBinData.onChangeData.error=0x0
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(3) callParamCallbacksUpdateError Error=4 old=-1 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=0 bExecute=0 bEnabled=0 atTarget=0 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000002
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(4) bError=0 drvlocal.statusBinData.onChangeData.error=0x0
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(4) callParamCallbacksUpdateError Error=4 old=-1 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(5) mvnNRdy=1 bBusy=0 bExecute=0 bEnabled=0 atTarget=0 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000002
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(5) bError=0 drvlocal.statusBinData.onChangeData.error=0x0
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(5) callParamCallbacksUpdateError Error=4 old=-1 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(6) mvnNRdy=1 bBusy=0 bExecute=0 bEnabled=0 atTarget=0 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000002
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(6) bError=0 drvlocal.statusBinData.onChangeData.error=0x0
2021/05/25 14:00:51.490 ecmcMotorRecord:: poll(6) callParamCallbacksUpdateError Error=4 old=-1 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:51.556 ../devEcmcSup/motion/ecmcMonitor.cpp/checkLimits:501: ERROR_MON_BOTH_LIMIT_INTERLOCK (0x14c10).
2021/05/25 14:00:51.556 ../devEcmcSup/motion/ecmcAxisReal.cpp/execute:198: ERROR_AXIS_HARDWARE_STATUS_NOT_OK (0x14315).
2021/05/25 14:00:51.556 ../devEcmcSup/motion/ecmcMonitor.cpp/checkLimits:501: ERROR_MON_BOTH_LIMIT_INTERLOCK (0x14c10).
2021/05/25 14:00:51.556 ../devEcmcSup/motion/ecmcAxisReal.cpp/execute:198: ERROR_AXIS_HARDWARE_STATUS_NOT_OK (0x14315).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:374: ERROR: Slave 0: Not operational (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:379: ERROR_EC_SLAVE_NOT_OPERATIONAL (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:374: ERROR: Slave 1: Not operational (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:379: ERROR_EC_SLAVE_NOT_OPERATIONAL (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:374: ERROR: Slave 2: Not operational (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:379: ERROR_EC_SLAVE_NOT_OPERATIONAL (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:374: ERROR: Slave 3: Not operational (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:379: ERROR_EC_SLAVE_NOT_OPERATIONAL (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:374: ERROR: Slave 4: Not operational (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:379: ERROR_EC_SLAVE_NOT_OPERATIONAL (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:374: ERROR: Slave 5: Not operational (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:379: ERROR_EC_SLAVE_NOT_OPERATIONAL (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:374: ERROR: Slave 6: Not operational (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:379: ERROR_EC_SLAVE_NOT_OPERATIONAL (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:374: ERROR: Slave 8: Not operational (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:379: ERROR_EC_SLAVE_NOT_OPERATIONAL (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:374: ERROR: Slave 9: Not operational (0x24011).
2021/05/25 14:00:51.556 ../devEcmcSup/ethercat/ecmcEcSlave.cpp/checkConfigState:379: ERROR_EC_SLAVE_NOT_OPERATIONAL (0x24011).
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(1) homed=1
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(1) LLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(1) HLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(1) callParamCallbacksUpdateError Error=0 old=4 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(2) homed=1
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(2) LLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(2) HLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(2) callParamCallbacksUpdateError Error=0 old=4 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(3) LLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(3) HLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=0 atTarget=1 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000009
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(3) bError=1 drvlocal.statusBinData.onChangeData.error=0x14315
2021/05/25 14:00:51.690 ecmcMotorRecord:: sErrorMessage(3)="ERROR_AXIS_HARDWARE_STATUS_NOT_OK"
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(3) callParamCallbacksUpdateError Error=1 old=4 ErrID=0x14315 old=0x0 Warn=0 nCmd=0 old=0 txt=E: ERROR_AXIS_HARDWARE_STATUS_NOT_OK (0x14315)
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(4) LLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(4) HLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=0 atTarget=1 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000008
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(4) bError=1 drvlocal.statusBinData.onChangeData.error=0x14315
2021/05/25 14:00:51.690 ecmcMotorRecord:: sErrorMessage(4)="ERROR_AXIS_HARDWARE_STATUS_NOT_OK"
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(4) callParamCallbacksUpdateError Error=1 old=4 ErrID=0x14315 old=0x0 Warn=0 nCmd=0 old=0 txt=E: ERROR_AXIS_HARDWARE_STATUS_NOT_OK (0x14315)
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(5) homed=1
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(5) LLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(5) HLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(5) callParamCallbacksUpdateError Error=0 old=4 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(6) homed=1
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(6) LLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(6) HLS=0
2021/05/25 14:00:51.690 ecmcMotorRecord:: poll(6) callParamCallbacksUpdateError Error=0 old=4 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:52.467 Starting up EtherCAT bus: 1 second(s). Max wait time 30 second(s).
2021/05/25 14:00:52.559 ../devEcmcSup/main/ecmcError.cpp/errorReset:103: NO_ERROR (0x0).
2021/05/25 14:00:52.559 ../devEcmcSup/main/ecmcError.cpp/errorReset:103: NO_ERROR (0x0).
2021/05/25 14:00:52.559 ../devEcmcSup/main/ecmcError.cpp/errorReset:103: NO_ERROR (0x0).
2021/05/25 14:00:52.559 ../devEcmcSup/main/ecmcError.cpp/errorReset:103: NO_ERROR (0x0).
2021/05/25 14:00:52.559 ../devEcmcSup/main/ecmcError.cpp/errorReset:103: NO_ERROR (0x0).
2021/05/25 14:00:52.691 ecmcMotorRecord:: poll(1) mvnNRdy=0 bBusy=0 bExecute=0 bEnabled=0 atTarget=1 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000004
2021/05/25 14:00:52.691 ecmcMotorRecord:: poll(2) mvnNRdy=0 bBusy=0 bExecute=0 bEnabled=0 atTarget=1 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000002
2021/05/25 14:00:52.691 ecmcMotorRecord:: poll(3) bError=0 drvlocal.statusBinData.onChangeData.error=0x0
2021/05/25 14:00:52.691 ecmcMotorRecord:: poll(3) callParamCallbacksUpdateError Error=4 old=1 ErrID=0x0 old=0x14315 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:52.691 ecmcMotorRecord:: poll(4) bError=0 drvlocal.statusBinData.onChangeData.error=0x0
2021/05/25 14:00:52.691 ecmcMotorRecord:: poll(4) callParamCallbacksUpdateError Error=4 old=1 ErrID=0x0 old=0x14315 Warn=0 nCmd=0 old=0 txt=NULL
2021/05/25 14:00:52.691 ecmcMotorRecord:: poll(5) mvnNRdy=0 bBusy=0 bExecute=0 bEnabled=0 atTarget=1 wf=0 ENC=62625 fPos=0 fActPosition=-2910 time=0.000002
2021/05/25 14:00:52.691 ecmcMotorRecord:: poll(6) mvnNRdy=0 bBusy=0 bExecute=0 bEnabled=0 atTarget=1 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000001
2021/05/25 14:00:54.467 EtherCAT bus started!
2021/05/25 14:00:54.467 OK
2021/05/25 14:00:54.467 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAtIocBuild (0). Allow callbacks: true.
Starting iocInit
2021/05/25 14:00:54.467 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAtBeginning (1). Allow callbacks: true.
2021/05/25 14:00:54.469 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterCallbackInit (2). Allow callbacks: true.
2021/05/25 14:00:54.470 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterCaLinkInit (3). Allow callbacks: true.
2021/05/25 14:00:54.470 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterInitDrvSup (4). Allow callbacks: true.
2021/05/25 14:00:54.470 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterInitRecSup (5). Allow callbacks: true.
2021/05/25 14:00:54.471 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterInitDevSup (6). Allow callbacks: true.
2021/05/25 14:00:54.472 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.error.reset linked to record (asyn reason 1).
2021/05/25 14:00:54.474 ecmcAsynPortDriver:drvUserCreate: Parameter ax3.diagnostic linked to record (asyn reason 2).
2021/05/25 14:00:54.474 ecmcAsynPortDriver:drvUserCreate: Parameter ax3.plc.expression linked to record (asyn reason 3).
2021/05/25 14:00:54.474 ecmcAsynPortDriver:drvUserCreate: Parameter ax4.diagnostic linked to record (asyn reason 4).
2021/05/25 14:00:54.474 ecmcAsynPortDriver:drvUserCreate: Parameter ax4.plc.expression linked to record (asyn reason 5).
2021/05/25 14:00:54.474 ecmcAsynPortDriver:drvUserCreate: Parameter ax1.diagnostic linked to record (asyn reason 6).
2021/05/25 14:00:54.474 ecmcAsynPortDriver:drvUserCreate: Parameter ax1.plc.expression linked to record (asyn reason 7).
2021/05/25 14:00:54.475 ecmcAsynPortDriver:drvUserCreate: Parameter ax2.diagnostic linked to record (asyn reason 8).
2021/05/25 14:00:54.475 ecmcAsynPortDriver:drvUserCreate: Parameter ax2.plc.expression linked to record (asyn reason 9).
2021/05/25 14:00:54.475 ecmcAsynPortDriver:drvUserCreate: Parameter ax5.diagnostic linked to record (asyn reason 10).
2021/05/25 14:00:54.475 ecmcAsynPortDriver:drvUserCreate: Parameter ax5.plc.expression linked to record (asyn reason 11).
2021/05/25 14:00:54.475 ecmcAsynPortDriver:drvUserCreate: Parameter ax6.diagnostic linked to record (asyn reason 12).
2021/05/25 14:00:54.476 ecmcAsynPortDriver:drvUserCreate: Parameter ax6.plc.expression linked to record (asyn reason 13).
2021/05/25 14:00:54.476 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.error.msg linked to record (asyn reason 14).
2021/05/25 14:00:54.476 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.updated linked to record (asyn reason 15).
2021/05/25 14:00:54.476 ecmcAsynPortDriver:drvUserCreate: Parameter ax3.status linked to record (asyn reason 16).
2021/05/25 14:00:54.477 ecmcAsynPortDriver:drvUserCreate: Parameter ax4.status linked to record (asyn reason 17).
2021/05/25 14:00:54.477 ecmcAsynPortDriver:drvUserCreate: Parameter ax1.status linked to record (asyn reason 18).
2021/05/25 14:00:54.477 ecmcAsynPortDriver:drvUserCreate: Parameter ax2.status linked to record (asyn reason 19).
2021/05/25 14:00:54.478 ecmcAsynPortDriver:drvUserCreate: Parameter ax5.status linked to record (asyn reason 20).
2021/05/25 14:00:54.478 ecmcAsynPortDriver:drvUserCreate: Parameter ax6.status linked to record (asyn reason 21).
2021/05/25 14:00:54.479 ecmcAsynPortDriver:drvUserCreate: Parameter ec0.masterstatus linked to record (asyn reason 22).
2021/05/25 14:00:54.479 ecmcAsynPortDriver:drvUserCreate: Parameter ec0.slavecounter linked to record (asyn reason 23).
2021/05/25 14:00:54.480 ecmcAsynPortDriver:drvUserCreate: Parameter ec0.memmapcounter linked to record (asyn reason 24).
2021/05/25 14:00:54.480 ecmcAsynPortDriver:drvUserCreate: Parameter ec0.domainfailcountertotal linked to record (asyn reason 25).
2021/05/25 14:00:54.480 ecmcAsynPortDriver:drvUserCreate: Parameter ec0.entrycounter linked to record (asyn reason 26).
2021/05/25 14:00:54.481 ecmcAsynPortDriver:drvUserCreate: Parameter ec0.domainstatus linked to record (asyn reason 27).
2021/05/25 14:00:54.481 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax3.plc.enable linked to record (asyn reason 28).
2021/05/25 14:00:54.482 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax3.plc.firstscan linked to record (asyn reason 29).
2021/05/25 14:00:54.482 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax4.plc.enable linked to record (asyn reason 30).
2021/05/25 14:00:54.483 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax4.plc.firstscan linked to record (asyn reason 31).
2021/05/25 14:00:54.484 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax1.plc.enable linked to record (asyn reason 32).
2021/05/25 14:00:54.484 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax1.plc.firstscan linked to record (asyn reason 33).
2021/05/25 14:00:54.485 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax2.plc.enable linked to record (asyn reason 34).
2021/05/25 14:00:54.486 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax2.plc.firstscan linked to record (asyn reason 35).
2021/05/25 14:00:54.486 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax5.plc.enable linked to record (asyn reason 36).
2021/05/25 14:00:54.487 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax5.plc.firstscan linked to record (asyn reason 37).
2021/05/25 14:00:54.488 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax6.plc.enable linked to record (asyn reason 38).
2021/05/25 14:00:54.489 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax6.plc.firstscan linked to record (asyn reason 39).
2021/05/25 14:00:54.490 ecmcAsynPortDriver:drvUserCreate: Parameter ec0.ok linked to record (asyn reason 40).
2021/05/25 14:00:54.491 ecmcAsynPortDriver:drvUserCreate: Parameter ax3.control linked to record (asyn reason 41).
2021/05/25 14:00:54.492 ecmcAsynPortDriver:drvUserCreate: Parameter ax4.control linked to record (asyn reason 42).
2021/05/25 14:00:54.493 ecmcAsynPortDriver:drvUserCreate: Parameter ax1.control linked to record (asyn reason 43).
2021/05/25 14:00:54.494 ecmcAsynPortDriver:drvUserCreate: Parameter ax2.control linked to record (asyn reason 44).
2021/05/25 14:00:54.494 ecmcAsynPortDriver:drvUserCreate: Parameter ax5.control linked to record (asyn reason 45).
2021/05/25 14:00:54.495 ecmcAsynPortDriver:drvUserCreate: Parameter ax6.control linked to record (asyn reason 46).
2021/05/25 14:00:54.497 ecmcAsynPortDriver:drvUserCreate: Parameter ax3.actpos linked to record (asyn reason 47).
2021/05/25 14:00:54.498 ecmcAsynPortDriver:drvUserCreate: Parameter ax3.setpos linked to record (asyn reason 48).
2021/05/25 14:00:54.498 ecmcAsynPortDriver:drvUserCreate: Parameter ax3.poserr linked to record (asyn reason 49).
2021/05/25 14:00:54.499 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax3.plc.error linked to record (asyn reason 50).
2021/05/25 14:00:54.500 ecmcAsynPortDriver:drvUserCreate: Parameter ax4.actpos linked to record (asyn reason 51).
2021/05/25 14:00:54.502 ecmcAsynPortDriver:drvUserCreate: Parameter ax4.setpos linked to record (asyn reason 52).
2021/05/25 14:00:54.503 ecmcAsynPortDriver:drvUserCreate: Parameter ax4.poserr linked to record (asyn reason 53).
2021/05/25 14:00:54.504 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax4.plc.error linked to record (asyn reason 54).
2021/05/25 14:00:54.505 ecmcAsynPortDriver:drvUserCreate: Parameter ax1.actpos linked to record (asyn reason 55).
2021/05/25 14:00:54.506 ecmcAsynPortDriver:drvUserCreate: Parameter ax1.setpos linked to record (asyn reason 56).
2021/05/25 14:00:54.507 ecmcAsynPortDriver:drvUserCreate: Parameter ax1.poserr linked to record (asyn reason 57).
2021/05/25 14:00:54.508 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax1.plc.error linked to record (asyn reason 58).
2021/05/25 14:00:54.509 ecmcAsynPortDriver:drvUserCreate: Parameter ax2.actpos linked to record (asyn reason 59).
2021/05/25 14:00:54.510 ecmcAsynPortDriver:drvUserCreate: Parameter ax2.setpos linked to record (asyn reason 60).
2021/05/25 14:00:54.511 ecmcAsynPortDriver:drvUserCreate: Parameter ax2.poserr linked to record (asyn reason 61).
2021/05/25 14:00:54.512 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax2.plc.error linked to record (asyn reason 62).
2021/05/25 14:00:54.513 ecmcAsynPortDriver:drvUserCreate: Parameter ax5.actpos linked to record (asyn reason 63).
2021/05/25 14:00:54.514 ecmcAsynPortDriver:drvUserCreate: Parameter ax5.setpos linked to record (asyn reason 64).
2021/05/25 14:00:54.515 ecmcAsynPortDriver:drvUserCreate: Parameter ax5.poserr linked to record (asyn reason 65).
2021/05/25 14:00:54.516 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax5.plc.error linked to record (asyn reason 66).
2021/05/25 14:00:54.517 ecmcAsynPortDriver:drvUserCreate: Parameter ax6.actpos linked to record (asyn reason 67).
2021/05/25 14:00:54.518 ecmcAsynPortDriver:drvUserCreate: Parameter ax6.setpos linked to record (asyn reason 68).
2021/05/25 14:00:54.519 ecmcAsynPortDriver:drvUserCreate: Parameter ax6.poserr linked to record (asyn reason 69).
2021/05/25 14:00:54.521 ecmcAsynPortDriver:drvUserCreate: Parameter plcs.ax6.plc.error linked to record (asyn reason 70).
2021/05/25 14:00:54.522 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.appmode linked to record (asyn reason 71).
2021/05/25 14:00:54.523 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.error.id linked to record (asyn reason 72).
2021/05/25 14:00:54.524 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.thread.latency.min linked to record (asyn reason 73).
2021/05/25 14:00:54.525 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.thread.latency.max linked to record (asyn reason 74).
2021/05/25 14:00:54.526 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.thread.period.min linked to record (asyn reason 75).
2021/05/25 14:00:54.528 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.thread.period.max linked to record (asyn reason 76).
2021/05/25 14:00:54.529 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.thread.execute.min linked to record (asyn reason 77).
2021/05/25 14:00:54.530 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.thread.execute.max linked to record (asyn reason 78).
2021/05/25 14:00:54.531 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.thread.send.min linked to record (asyn reason 79).
2021/05/25 14:00:54.533 ecmcAsynPortDriver:drvUserCreate: Parameter ecmc.thread.send.max linked to record (asyn reason 80).
2021/05/25 14:00:54.533 ecmcMotorRecord:: setIntegerParam(3 motorUpdateStatus_)=0
2021/05/25 14:00:54.533 ecmcMotorRecord:: setIntegerParam(4 motorUpdateStatus_)=0
sFreq(2)"
ecmcConfigOrDie "Cfg.SetDiagAxisEnable(0)"
# go active
iocshLoad (/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/setAppMode.cmd)
#==============================================================================
# setAppMode.cmd
ecmcFileExist("/home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/general.cmd",1)
iocshLoad /home/dev/epics/base-7.0.5/require/3.4.0/siteMods/ecmccfg/develop/general.cmd
#==============================================================================
# general.cmd
ecmcFileExist("ecmcGeneral.db",1,1)
dbLoadRecords("ecmcGeneral.db","P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,T_SMP_MS=10,TSE=-2,ECMC_PROC_HOOK=")
# Examples of commands for info:
# ecmcReport <level> or asynReport <level>
# ecmcReport 3
# ecmcGrepParam <pattern>
# List all ecmc params for ethercat slave 2:
# ecmcGrepParam *s2*
#
ecmcEpicsEnvSetCalcTernary(ECMC_MASTER_CMD, "0>=0", "","#- ")
 ecmcFileExist("ecmcEc.db",1,1)
 dbLoadRecords("ecmcEc.db","P=IOC_TEST:,PORT=MC_CPU1,ADDR=0,TIMEOUT=1,MASTER_ID=0,T_SMP_MS=10,TSE=-2")
ecmcConfigOrDie "Cfg.SetAppMode(1)"
iocInit()
############################################################################
## EPICS R7.0.5-E3-7.0.5-patch
## Rev. 2021-04-07T08:24+0200
############################################################################
2021/05/25 14:00:54.533 [devMotorAsyn.c:451  IOC_TEST:Axis3] init_record status=0 position=0.000000 encoderPos=0.000000 velocity=0.000000 MSTAstatus=0x0f00 flags=0x1e
2021/05/25 14:00:54.533 [devMotorAsyn.c:296  IOC_TEST:Axis3] update_soft_limits IOC_TEST:Axis3 RawHLM_RO=130.000000 RawLLM_RO=-20.000000 valid=1 DHLM_RO=130.000000 DLLM_RO=-20.000000
2021/05/25 14:00:54.533 [motorRecord.cc:915  IOC_TEST:Axis3] init_record set UDF=FALSE
2021/05/25 14:00:54.533 [motorRecord.cc:772  IOC_TEST:Axis3] init_re_init neverPolled=0 stat=17 nsta=0
2021/05/25 14:00:54.533 [motorRecord.cc:710  IOC_TEST:Axis3] enforceMinRetryDeadband spdb=0.100000 rdbd=0.100000 mres=0.030000
2021/05/25 14:00:54.533 [motorRecord.cc:4246 IOC_TEST:Axis3] pmr->dhlm=130 softLimitRO=130
2021/05/25 14:00:54.533 [motorRecord.cc:4307 IOC_TEST:Axis3] pmr->dllm=-20 softLimitRO=-20
highLimithighLimithighLimit 130.000000
2021/05/25 14:00:54.533 [motorRecord.cc:956  IOC_TEST:Axis3] init_record process_reason="callbackdata + soft limits" dval=0.000000 drbv=0.000000 rdbd=0.100000 spdb=0.100000 stat=0 msta=0xf00 neverPolled=0
lowLimitlowLimitlowLimitlowLimit -20.000000
2021/05/25 14:00:54.533 [devMotorAsyn.c:451  IOC_TEST:Axis4] init_record status=0 position=0.000000 encoderPos=0.000000 velocity=0.000000 MSTAstatus=0x0f00 flags=0x1e
2021/05/25 14:00:54.533 [devMotorAsyn.c:296  IOC_TEST:Axis4] update_soft_limits IOC_TEST:Axis4 RawHLM_RO=20.000000 RawLLM_RO=-130.000000 valid=1 DHLM_RO=20.000000 DLLM_RO=-130.000000
2021/05/25 14:00:54.533 [motorRecord.cc:915  IOC_TEST:Axis4] init_record set UDF=FALSE
2021/05/25 14:00:54.533 [motorRecord.cc:772  IOC_TEST:Axis4] init_re_init neverPolled=0 stat=17 nsta=0
2021/05/25 14:00:54.533 [motorRecord.cc:710  IOC_TEST:Axis4] enforceMinRetryDeadband spdb=0.100000 rdbd=0.100000 mres=0.030000
2021/05/25 14:00:54.533 [motorRecord.cc:4246 IOC_TEST:Axis4] pmr->dhlm=20 softLimitRO=20
2021/05/25 14:00:54.533 [motorRecord.cc:4307 IOC_TEST:Axis4] pmr->dllm=-130 softLimitRO=-130
highLimithighLimithighLimit 20.000000
2021/05/25 14:00:54.533 [motorRecord.cc:956  IOC_TEST:Axis4] init_record process_reason="callbackdata + soft limits" dval=0.000000 drbv=0.000000 rdbd=0.100000 spdb=0.100000 stat=0 msta=0xf00 neverPolled=0
lowLimitlowLimitlowLimitlowLimit -130.000000
2021/05/25 14:00:54.533 [devMotorAsyn.c:451  IOC_TEST:Axis1] init_record status=0 position=0.000000 encoderPos=0.000000 velocity=0.000000 MSTAstatus=0x490a flags=0x1e
2021/05/25 14:00:54.533 [devMotorAsyn.c:296  IOC_TEST:Axis1] update_soft_limits IOC_TEST:Axis1 RawHLM_RO=0.000000 RawLLM_RO=0.000000 valid=0 DHLM_RO=0.000000 DLLM_RO=0.000000
2021/05/25 14:00:54.533 [motorRecord.cc:915  IOC_TEST:Axis1] init_record set UDF=FALSE
2021/05/25 14:00:54.533 [motorRecord.cc:772  IOC_TEST:Axis1] init_re_2021/05/25 14:00:54.533 ecmcMotorRecord:: setIntegerParam(1 motorUpdateStatus_)=0
2021/05/25 14:00:54.533 ecmcMotorRecord:: setIntegerParam(2 motorUpdateStatus_)=0
2021/05/25 14:00:54.533 ecmcMotorRecord:: setIntegerParam(5 motorUpdateStatus_)=0
2021/05/25 14:00:54.534 ecmcMotorRecord:: setIntegerParam(6 motorUpdateStatus_)=0
2021/05/25 14:00:54.537 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterInitDatabase (7). Allow callbacks: true.
2021/05/25 14:00:54.537 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterFinishDevSup (8). Allow callbacks: true.
2021/05/25 14:00:55.045 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterScanInit (9). Allow callbacks: true.
2021/05/25 14:00:55.045 ecmcMotorRecord:: setDoubleParam(3 HomPos_)=0.000000
2021/05/25 14:00:55.045 ecmcMotorRecord:: setDoubleParam(4 HomPos_)=0.000000
2021/05/25 14:00:55.045 ecmcMotorRecord:: setDoubleParam(1 HomPos_)=0.000000
2021/05/25 14:00:55.045 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterInitialProcess (10). Allow callbacks: true.
2021/05/25 14:00:55.045 ecmcMotorRecord:: setDoubleParam(2 HomPos_)=0.000000
2021/05/25 14:00:55.045 ecmcMotorRecord:: setDoubleParam(5 HomPos_)=0.000000
2021/05/25 14:00:55.045 ecmcMotorRecord:: setDoubleParam(6 HomPos_)=0.000000
2021/05/25 14:00:55.045 ecmcMotorRecord:: setIntegerParam(3 HomProc_)=3 motorNotHomedProblem=0
2021/05/25 14:00:55.045 ecmcMotorRecord:: setIntegerParam(4 HomProc_)=3 motorNotHomedProblem=0
2021/05/25 14:00:55.045 ecmcMotorRecord:: setIntegerParam(1 HomProc_)=3 motorNotHomedProblem=0
2021/05/25 14:00:55.045 ecmcMotorRecord:: setIntegerParam(2 HomProc_)=3 motorNotHomedProblem=0
2021/05/25 14:00:55.045 ecmcMotorRecord:: setIntegerParam(5 HomProc_)=3 motorNotHomedProblem=0
2021/05/25 14:00:55.045 ecmcMotorRecord:: setIntegerParam(6 HomProc_)=3 motorNotHomedProblem=0
2021/05/25 14:00:55.047 ecmcAsynPortDriver:getEpicsState: EPICS state: Unknown state (11). Allow callbacks: true.
2021/05/25 14:00:55.047 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterIocBuilt (12). Allow callbacks: true.
2021/05/25 14:00:55.051 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAtIocRun (13). Allow callbacks: true.
2021/05/25 14:00:55.051 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterDatabaseRunning (14). Allow callbacks: true.
2021/05/25 14:00:55.051 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterInterruptAccept (28). Allow callbacks: true.
2021/05/25 14:00:55.051 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterCaServerRunning (15). Allow callbacks: true.
2021/05/25 14:00:55.051 ecmcAsynPortDriver:getEpicsState: EPICS state: Unknown state (29). Allow callbacks: true.
iocRun: All initialization complete
2021/05/25 14:00:55.056 ecmcAsynPortDriver:getEpicsState: EPICS state: initHookAfterIocRunning (16). Allow callbacks: true.
init neverPolled=0 stat=17 nsta=0
2021/05/25 14:00:54.533 [motorRecord.cc:710  IOC_TEST:Axis1] enforceMinRetryDeadband spdb=0.300000 rdbd=0.300000 mres=1.000000
highLimithighLimithighLimit 0.000000
2021/05/25 14:00:54.533 [motorRecord.cc:956  IOC_TEST:Axis1] init_record process_reason="callbackdata + soft limits" dval=0.000000 drbv=0.000000 rdbd=0.300000 spdb=0.300000 stat=0 msta=0x490a neverPolled=0
lowLimitlowLimitlowLimitlowLimit 0.000000
2021/05/25 14:00:54.533 [devMotorAsyn.c:451  IOC_TEST:Axis2] init_record status=0 position=0.000000 encoderPos=0.000000 velocity=0.000000 MSTAstatus=0x490a flags=0x1e
2021/05/25 14:00:54.533 [devMotorAsyn.c:296  IOC_TEST:Axis2] update_soft_limits IOC_TEST:Axis2 RawHLM_RO=0.000000 RawLLM_RO=0.000000 valid=0 DHLM_RO=0.000000 DLLM_RO=0.000000
2021/05/25 14:00:54.533 [motorRecord.cc:915  IOC_TEST:Axis2] init_record set UDF=FALSE
2021/05/25 14:00:54.533 [motorRecord.cc:772  IOC_TEST:Axis2] init_re_init neverPolled=0 stat=17 nsta=0
2021/05/25 14:00:54.533 [motorRecord.cc:710  IOC_TEST:Axis2] enforceMinRetryDeadband spdb=0.300000 rdbd=0.300000 mres=1.000000
highLimithighLimithighLimit 0.000000
lowLimitlowLimitlowLimitlowLimit 0.000000
2021/05/25 14:00:54.533 [motorRecord.cc:956  IOC_TEST:Axis2] init_record process_reason="callbackdata + soft limits" dval=0.000000 drbv=0.000000 rdbd=0.300000 spdb=0.300000 stat=0 msta=0x490a neverPolled=0
2021/05/25 14:00:54.533 [devMotorAsyn.c:451  IOC_TEST:timing] init_record status=0 position=-2910.000000 encoderPos=-2910.000000 velocity=0.000000 MSTAstatus=0x490a flags=0x1e
2021/05/25 14:00:54.533 [devMotorAsyn.c:296  IOC_TEST:timing] update_soft_limits IOC_TEST:timing RawHLM_RO=0.000000 RawLLM_RO=0.000000 valid=0 DHLM_RO=0.000000 DLLM_RO=0.000000
2021/05/25 14:00:54.533 [motorRecord.cc:915  IOC_TEST:timing] init_record set UDF=FALSE
2021/05/25 14:00:54.533 [motorRecord.cc:772  IOC_TEST:timing] init_re_init neverPolled=0 stat=17 nsta=0
2021/05/25 14:00:54.533 [motorRecord.cc:710  IOC_TEST:timing] enforceMinRetryDeadband spdb=0.100000 rdbd=0.100000 mres=1.000000
highLimithighLimithighLimit 0.000000
lowLimitlowLimitlowLimitlowLimit 0.000000
2021/05/25 14:00:54.533 [motorRecord.cc:956  IOC_TEST:timing] init_record process_reason="callbackdata + soft limits" dval=-2910.000000 drbv=-2910.000000 rdbd=0.100000 spdb=0.100000 stat=0 msta=0x490a neverPolled=0
2021/05/25 14:00:54.534 [devMotorAsyn.c:451  IOC_TEST:amplitude] init_record status=0 position=0.000000 encoderPos=0.000000 velocity=0.000000 MSTAstatus=0x490a flags=0x1e
2021/05/25 14:00:54.534 [devMotorAsyn.c:296  IOC_TEST:amplitude] update_soft_limits IOC_TEST:amplitude RawHLM_RO=0.000000 RawLLM_RO=0.000000 valid=0 DHLM_RO=0.000000 DLLM_RO=0.000000
2021/05/25 14:00:54.534 [motorRecord.cc:915  IOC_TEST:amplitude] init_record set UDF=FALSE
2021/05/25 14:00:54.534 [motorRecord.cc:772  IOC_TEST:amplitude] init_re_init neverPolled=0 stat=17 nsta=0
2021/05/25 14:00:54.534 [motorRecord.cc:710  IOC_TEST:amplitude] enforceMinRetryDeadband spdb=0.100000 rdbd=0.100000 mres=1.000000
highLimithighLimithighLimit 0.000000
2021/05/25 14:00:54.534 [motorRecord.cc:956  IOC_TEST:amplitude] init_record process_reason="callbackdata + soft limits" dval=0.000000 drbv=0.000000 rdbd=0.100000 spdb=0.100000 stat=0 msta=0x490a neverPolled=0
lowLimitlowLimitlowLimitlowLimit 0.000000
dbl > pvs.log
dbpf IOC_TEST:Axis1.SPAM 1023
DBF_SHORT:          1023 = 0x3ff        
# Set the IOC Prompt String One 
epicsEnvSet IOCSH_PS1 "mcag-trgt-muts--15635 > "
#
[?1034hmcag-trgt-muts--15635 > 2021/05/25 14:00:59.495 [motorRecord.cc:2888 IOC_TEST:Axis1] special fieldIdx=CNEN value=0 after=0
2021/05/25 14:00:59.495 [motorRecord.cc:2888 IOC_TEST:Axis1] special fieldIdx=CNEN value=1 after=1
2021/05/25 14:00:59.495 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:00:59.495 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:00:59.495 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:00:59.495 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:00:59.595 ecmcMotorRecord:: poll(1) mvnNRdy=1 bBusy=0 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000005
2021/05/25 14:00:59.595 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:00:59.595 [motorRecord.cc:1475 IOC_TEST:Axis1] msta.Bits.RA_MOVING=1
2021/05/25 14:00:59.595 [motorRecord.cc:1487 IOC_TEST:Axis1] msta.Bits.EA_POSITION power on=1
2021/05/25 14:00:59.595 [motorRecord.cc:1495 IOC_TEST:Axis1] msta.Bits.RA_DONE=0
2021/05/25 14:00:59.595 [motorRecord.cc:1566 IOC_TEST:Axis1] mipSetBit EXTERNAL(Ex) old='' new=EXTERNAL(Ex)
2021/05/25 14:00:59.595 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:00:59.693 ecmcMotorRecord:: poll(1) mvnNRdy=0 bBusy=0 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=0 fPos=0 fActPosition=0 time=0.000004
2021/05/25 14:00:59.693 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:00:59.693 [motorRecord.cc:1475 IOC_TEST:Axis1] msta.Bits.RA_MOVING=0
2021/05/25 14:00:59.693 [motorRecord.cc:1495 IOC_TEST:Axis1] msta.Bits.RA_DONE=1
2021/05/25 14:00:59.693 [motorRecord.cc:1606 IOC_TEST:Axis1] motor has stopped drbv=0.000000 pp=1 udf=0 stat=0 cdir=0 mip=0x8000(EXTERNAL(Ex)) msta=0x492a
2021/05/25 14:00:59.693 [motorRecord.cc:1108 IOC_TEST:Axis1] postProcess: entry udf=0 stat=0 nsta=0 mip=0x8000(EXTERNAL(Ex))
2021/05/25 14:00:59.693 [motorRecord.cc:1131 IOC_TEST:Axis1] postProcess oldval=0.000000 olddval=0.000000 val=0.000000 dval=0.000000 drbv=0.000000  rrbv=0
2021/05/25 14:00:59.693 [motorRecord.cc:1195 IOC_TEST:Axis1] mipClrBit STOP(St) old=EXTERNAL(Ex) new=EXTERNAL(Ex)
2021/05/25 14:00:59.693 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x8000(EXTERNAL(Ex))
2021/05/25 14:00:59.693 [motorRecord.cc:1756 IOC_TEST:Axis1] mipSetVal old=EXTERNAL(Ex) new=''
2021/05/25 14:00:59.693 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:00.094 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=63816 fPos=-0.09 fActPosition=-0.09 time=0.000002
2021/05/25 14:01:00.094 [motorRecord.cc:1487 IOC_TEST:Axis3] msta.Bits.EA_POSITION power on=1
2021/05/25 14:01:00.094 [motorRecord.cc:1566 IOC_TEST:Axis3] mipSetBit EXTERNAL(Ex) old='' new=EXTERNAL(Ex)
2021/05/25 14:01:00.094 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=326 fPos=0.09 fActPosition=0.09 time=0.000004
2021/05/25 14:01:00.094 [motorRecord.cc:1487 IOC_TEST:Axis4] msta.Bits.EA_POSITION power on=1
2021/05/25 14:01:00.094 [motorRecord.cc:1566 IOC_TEST:Axis4] mipSetBit EXTERNAL(Ex) old='' new=EXTERNAL(Ex)
2021/05/25 14:01:00.294 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=63816 fPos=-0.09 fActPosition=-0.09 time=0.000002
2021/05/25 14:01:00.294 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=326 fPos=0.09 fActPosition=0.09 time=0.000002

mcag-trgt-muts--15635 > 2021/05/25 14:01:10.520 [motorRecord.cc:2888 IOC_TEST:Axis1] special fieldIdx=JOGR value=0 after=0
2021/05/25 14:01:10.520 [motorRecord.cc:2888 IOC_TEST:Axis1] special fieldIdx=JOGR value=1 after=1
2021/05/25 14:01:10.520 [motorRecord.cc:3305 IOC_TEST:Axis1] mipSetBit JOG_REQ(jR) old='' new=JOG_REQ(jR)
2021/05/25 14:01:10.520 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=0
2021/05/25 14:01:10.520 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x1000(JOG_REQ(jR))
2021/05/25 14:01:10.520 [motorRecord.cc:2669 IOC_TEST:Axis1] mipSetVal old=JOG_REQ(jR) new=JOGR(Jr)
2021/05/25 14:01:10.520 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:10.520 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:10.520 [motorRecord.cc:1495 IOC_TEST:Axis1] msta.Bits.RA_DONE=0
2021/05/25 14:01:10.520 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:10.520 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:10.520 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:10.720 ecmcMotorRecord:: poll(1) mvnNRdy=1 bBusy=1 bExecute=1 bEnabled=1 atTarget=0 wf=2 ENC=0 fPos=0 fActPosition=-0.735 time=0.000004
2021/05/25 14:01:10.720 ecmcMotorRecord:: poll(1) callParamCallbacksUpdateError Error=0 old=0 ErrID=0x0 old=0x0 Warn=0 nCmd=1 old=0 txt=NULL
2021/05/25 14:01:10.720 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:10.720 [motorRecord.cc:1475 IOC_TEST:Axis1] msta.Bits.RA_MOVING=1
2021/05/25 14:01:10.720 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:10.720 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=63857 fPos=-1.3325 fActPosition=-1.32 time=0.000003
2021/05/25 14:01:10.720 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=318 fPos=-0.1625 fActPosition=-0.15 time=0.000002
2021/05/25 14:01:10.920 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:10.920 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:11.121 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:11.121 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:11.121 [motorRecord.cc:1491 IOC_TEST:Axis4] msta.Bits.RA_HOME home signal=1
2021/05/25 14:01:11.321 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:11.321 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:11.521 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:11.521 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:11.722 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:11.722 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:11.922 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:11.922 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:12.122 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:12.122 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:12.322 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:12.322 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:12.495 [motorRecord.cc:2888 IOC_TEST:Axis1] special fieldIdx=JOGR value=1 after=0
2021/05/25 14:01:12.495 [motorRecord.cc:2888 IOC_TEST:Axis1] special fieldIdx=JOGR value=0 after=1
2021/05/25 14:01:12.495 [motorRecord.cc:3303 IOC_TEST:Axis1] mipClrBit JOG_REQ(jR) old=JOGR(Jr) new=JOGR(Jr)
2021/05/25 14:01:12.495 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=0
2021/05/25 14:01:12.495 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x2(JOGR(Jr))
2021/05/25 14:01:12.495 [motorRecord.cc:2698 IOC_TEST:Axis1] mipSetBit JOG_STOP(jS) old=JOGR(Jr) new='Jr jS'
2021/05/25 14:01:12.495 [motorRecord.cc:2699 IOC_TEST:Axis1] mipClrBit 'Jf Jr' old='Jr jS' new=JOG_STOP(jS)
2021/05/25 14:01:12.495 [motorRecord.cc:2700 IOC_TEST:Axis1] STOP jogging
2021/05/25 14:01:12.495 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:12.523 ecmcMotorRecord:: poll(1) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=0 fPos=0 fActPosition=-9.75 time=0.000004
2021/05/25 14:01:12.523 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:12.523 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:12.723 ecmcMotorRecord:: poll(1) mvnNRdy=0 bBusy=0 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=0 fPos=-9.875 fActPosition=-9.9 time=0.000004
2021/05/25 14:01:12.723 ecmcMotorRecord:: poll(1) callParamCallbacksUpdateError Error=0 old=0 ErrID=0x0 old=0x0 Warn=0 nCmd=0 old=1 txt=NULL
2021/05/25 14:01:12.723 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:12.723 [motorRecord.cc:1475 IOC_TEST:Axis1] msta.Bits.RA_MOVING=0
2021/05/25 14:01:12.723 [motorRecord.cc:1495 IOC_TEST:Axis1] msta.Bits.RA_DONE=1
2021/05/25 14:01:12.723 [motorRecord.cc:1606 IOC_TEST:Axis1] motor has stopped drbv=-9.900000 pp=1 udf=0 stat=0 cdir=0 mip=0x2000(JOG_STOP(jS)) msta=0x492a
2021/05/25 14:01:12.723 [motorRecord.cc:4516 IOC_TEST:Axis1] clear_jog_buttons jogf=0 jogr=0
2021/05/25 14:01:12.723 [motorRecord.cc:1108 IOC_TEST:Axis1] postProcess: entry udf=0 stat=0 nsta=0 mip=0x2000(JOG_STOP(jS))
2021/05/25 14:01:12.723 [motorRecord.cc:1131 IOC_TEST:Axis1] postProcess oldval=0.000000 olddval=0.000000 val=-9.900000 dval=-9.900000 drbv=-9.900000  rrbv=-10
2021/05/25 14:01:12.723 [motorRecord.cc:1184 IOC_TEST:Axis1] mipClrBit JOG_STOP(jS) old=JOG_STOP(jS) new=''
2021/05/25 14:01:12.723 [motorRecord.cc:1185 IOC_TEST:Axis1] mipClrBit MOVE(Mo) old='' new=''
2021/05/25 14:01:12.723 [motorRecord.cc:1195 IOC_TEST:Axis1] mipClrBit STOP(St) old='' new=''
2021/05/25 14:01:12.723 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:12.723 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:12.723 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:12.923 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:12.923 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:12.923 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:12.923 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:12.923 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64169 fPos=-10.685 fActPosition=-10.68 time=0.000002
2021/05/25 14:01:12.923 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=21 fPos=-9.065 fActPosition=-9.06 time=0.000018
2021/05/25 14:01:14.524 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:14.524 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:14.524 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:14.524 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:14.524 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64169 fPos=-10.655 fActPosition=-10.68 time=0.000002
2021/05/25 14:01:14.524 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=19 fPos=-9.095 fActPosition=-9.12 time=0.000002
2021/05/25 14:01:14.724 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:14.724 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:14.724 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:14.724 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:14.725 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64167 fPos=-10.625 fActPosition=-10.62 time=0.000002
2021/05/25 14:01:14.725 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=19 fPos=-9.125 fActPosition=-9.12 time=0.000002
2021/05/25 14:01:15.125 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:15.125 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:15.125 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:15.125 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:15.125 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64166 fPos=-10.58 fActPosition=-10.59 time=0.000002
2021/05/25 14:01:15.125 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=17 fPos=-9.17 fActPosition=-9.18 time=0.000002
2021/05/25 14:01:15.325 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:15.325 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:15.325 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:15.325 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:15.525 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:15.525 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:15.525 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:15.525 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:15.726 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:15.726 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:15.726 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:15.726 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:15.926 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64150 fPos=-10.115 fActPosition=-10.11 time=0.000002
2021/05/25 14:01:15.926 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=2 fPos=-9.635 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:16.326 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64148 fPos=-10.055 fActPosition=-10.05 time=0.000002
2021/05/25 14:01:16.326 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=0 fPos=-9.695 fActPosition=-9.69 time=0.000002
2021/05/25 14:01:16.527 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64148 fPos=-10.055 fActPosition=-10.05 time=0.000002
2021/05/25 14:01:16.527 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=0 fPos=-9.695 fActPosition=-9.69 time=0.000003
2021/05/25 14:01:17.127 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:17.127 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:17.127 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:17.127 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:17.127 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64149 fPos=-10.055 fActPosition=-10.08 time=0.000004
2021/05/25 14:01:17.127 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65534 fPos=-9.695 fActPosition=-9.72 time=0.000002
2021/05/25 14:01:17.327 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:17.328 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:17.328 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:17.328 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:17.328 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64148 fPos=-10.04 fActPosition=-10.05 time=0.000002
2021/05/25 14:01:17.328 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65534 fPos=-9.71 fActPosition=-9.72 time=0.000002
2021/05/25 14:01:17.528 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:17.528 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:17.528 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:17.528 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:17.928 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:17.928 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:17.928 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:17.928 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:17.928 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64148 fPos=-10.04 fActPosition=-10.05 time=0.000002
2021/05/25 14:01:17.928 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65534 fPos=-9.71 fActPosition=-9.72 time=0.000002
2021/05/25 14:01:18.128 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64148 fPos=-10.04 fActPosition=-10.05 time=0.000001
2021/05/25 14:01:18.128 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65534 fPos=-9.71 fActPosition=-9.72 time=0.000002
2021/05/25 14:01:18.529 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:18.529 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:18.529 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:18.529 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:18.529 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64147 fPos=-10.025 fActPosition=-10.02 time=0.000002
2021/05/25 14:01:18.529 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65534 fPos=-9.725 fActPosition=-9.72 time=0.000002
2021/05/25 14:01:18.729 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64147 fPos=-10.025 fActPosition=-10.02 time=0.000002
2021/05/25 14:01:18.729 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65534 fPos=-9.725 fActPosition=-9.72 time=0.000002
2021/05/25 14:01:19.529 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:19.529 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:19.529 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:19.529 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:19.529 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64147 fPos=-9.995 fActPosition=-10.02 time=0.000002
2021/05/25 14:01:19.529 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65532 fPos=-9.755 fActPosition=-9.78 time=0.000002
2021/05/25 14:01:19.730 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:19.730 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:19.730 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:19.730 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:19.930 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:19.930 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:19.930 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:19.930 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:19.930 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64145 fPos=-9.965 fActPosition=-9.96 time=0.000002
2021/05/25 14:01:19.930 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65532 fPos=-9.785 fActPosition=-9.78 time=0.000003
2021/05/25 14:01:20.730 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:20.730 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:20.730 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:20.731 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:20.731 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64145 fPos=-9.95 fActPosition=-9.96 time=0.000002
2021/05/25 14:01:20.731 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65531 fPos=-9.8 fActPosition=-9.81 time=0.000002
2021/05/25 14:01:20.931 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64145 fPos=-9.95 fActPosition=-9.96 time=0.000002
2021/05/25 14:01:20.931 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65531 fPos=-9.8 fActPosition=-9.81 time=0.000003
2021/05/25 14:01:21.131 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:21.131 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:21.131 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:21.131 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:21.131 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64144 fPos=-9.95 fActPosition=-9.93 time=0.000004
2021/05/25 14:01:21.131 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65532 fPos=-9.8 fActPosition=-9.78 time=0.000003
2021/05/25 14:01:21.331 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:21.331 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:21.331 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:21.331 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:21.732 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:21.732 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:21.732 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:21.732 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:23.733 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:23.733 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:23.733 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:23.733 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:23.733 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64143 fPos=-9.905 fActPosition=-9.9 time=0.000002
2021/05/25 14:01:23.733 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65530 fPos=-9.845 fActPosition=-9.84 time=0.000003
2021/05/25 14:01:24.934 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64143 fPos=-9.905 fActPosition=-9.9 time=0.000001
2021/05/25 14:01:24.934 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65530 fPos=-9.845 fActPosition=-9.84 time=0.000004
2021/05/25 14:01:26.534 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:26.534 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:26.534 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:26.534 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:26.534 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64143 fPos=-9.89 fActPosition=-9.9 time=0.000002
2021/05/25 14:01:26.534 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65529 fPos=-9.86 fActPosition=-9.87 time=0.000002
2021/05/25 14:01:26.735 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:26.735 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:26.735 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:26.735 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:27.135 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:27.135 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:27.135 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:27.135 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:27.135 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64143 fPos=-9.875 fActPosition=-9.9 time=0.000002
2021/05/25 14:01:27.135 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65528 fPos=-9.875 fActPosition=-9.9 time=0.000002
2021/05/25 14:01:27.335 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:27.335 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:27.335 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:27.335 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:27.536 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64141 fPos=-9.845 fActPosition=-9.84 time=0.000001
2021/05/25 14:01:27.536 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65528 fPos=-9.905 fActPosition=-9.9 time=0.000002
2021/05/25 14:01:28.136 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:28.136 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:28.136 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:28.136 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:28.536 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:28.536 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:28.536 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:28.536 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:28.537 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64138 fPos=-9.77 fActPosition=-9.75 time=0.000003
2021/05/25 14:01:28.537 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65526 fPos=-9.98 fActPosition=-9.96 time=0.000003
2021/05/25 14:01:28.737 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:28.737 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:28.737 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:28.737 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:28.737 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64138 fPos=-9.755 fActPosition=-9.75 time=0.000002
2021/05/25 14:01:28.737 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65525 fPos=-9.995 fActPosition=-9.99 time=0.000003
2021/05/25 14:01:29.137 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:29.137 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:29.137 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:29.137 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:29.137 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64138 fPos=-9.74 fActPosition=-9.75 time=0.000002
2021/05/25 14:01:29.137 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65524 fPos=-10.01 fActPosition=-10.02 time=0.000002
2021/05/25 14:01:29.337 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64138 fPos=-9.74 fActPosition=-9.75 time=0.000002
2021/05/25 14:01:29.337 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65524 fPos=-10.01 fActPosition=-10.02 time=0.000002
2021/05/25 14:01:29.537 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:29.538 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:29.538 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:29.538 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:29.538 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64136 fPos=-9.71 fActPosition=-9.69 time=0.000002
2021/05/25 14:01:29.538 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65524 fPos=-10.04 fActPosition=-10.02 time=0.000002
2021/05/25 14:01:29.738 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:29.738 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:29.738 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:29.738 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:30.138 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:30.138 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:30.138 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:30.138 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:30.338 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:30.338 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:30.338 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:30.338 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:30.539 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:30.539 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:30.539 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:30.539 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:30.539 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64133 fPos=-9.605 fActPosition=-9.6 time=0.000003
2021/05/25 14:01:30.539 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65520 fPos=-10.145 fActPosition=-10.14 time=0.000002
2021/05/25 14:01:31.139 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:31.139 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:31.139 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:31.139 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:31.339 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:31.339 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:31.339 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:31.339 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:31.740 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:31.740 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:31.740 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:31.740 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:31.740 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:31.740 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000003
2021/05/25 14:01:31.940 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:31.940 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000002
2021/05/25 14:01:32.140 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:32.140 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:32.140 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:32.140 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:32.741 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:32.741 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:32.741 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:32.741 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:32.941 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:32.941 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:32.941 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:32.941 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:32.941 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64133 fPos=-9.605 fActPosition=-9.6 time=0.000003
2021/05/25 14:01:32.941 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65520 fPos=-10.145 fActPosition=-10.14 time=0.000002
2021/05/25 14:01:33.141 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64133 fPos=-9.605 fActPosition=-9.6 time=0.000002
2021/05/25 14:01:33.142 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65520 fPos=-10.145 fActPosition=-10.14 time=0.000002
2021/05/25 14:01:33.542 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:33.542 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:33.542 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:33.542 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:33.542 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000012
2021/05/25 14:01:33.542 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000003
2021/05/25 14:01:33.742 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:33.742 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000029
2021/05/25 14:01:33.943 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:33.943 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:33.943 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:33.943 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:34.343 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:34.343 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:34.343 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:34.343 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:34.343 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:34.343 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000003
2021/05/25 14:01:34.543 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:34.543 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000002
2021/05/25 14:01:34.743 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:34.743 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:34.743 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:34.743 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:35.144 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:35.144 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:35.144 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:35.144 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:35.144 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000003
2021/05/25 14:01:35.144 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000003
2021/05/25 14:01:35.344 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:35.344 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000003
2021/05/25 14:01:35.544 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:35.544 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:35.544 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:35.544 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:36.345 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:36.345 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:36.345 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:36.345 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:36.345 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:36.345 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000002
2021/05/25 14:01:36.545 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64134 fPos=-9.62 fActPosition=-9.63 time=0.000001
2021/05/25 14:01:36.545 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65520 fPos=-10.13 fActPosition=-10.14 time=0.000002
2021/05/25 14:01:36.745 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:36.745 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:36.745 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:36.745 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:36.745 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64134 fPos=-9.635 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:36.745 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65521 fPos=-10.115 fActPosition=-10.11 time=0.000083
2021/05/25 14:01:36.946 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64134 fPos=-9.635 fActPosition=-9.63 time=0.000002
2021/05/25 14:01:36.946 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65521 fPos=-10.115 fActPosition=-10.11 time=0.000002
2021/05/25 14:01:37.546 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:37.546 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:37.546 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:37.546 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:37.546 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64135 fPos=-9.65 fActPosition=-9.66 time=0.000002
2021/05/25 14:01:37.546 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65521 fPos=-10.1 fActPosition=-10.11 time=0.000003
2021/05/25 14:01:37.746 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:37.746 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:37.746 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:37.746 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:37.947 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64134 fPos=-9.635 fActPosition=-9.63 time=0.000001
2021/05/25 14:01:37.947 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65521 fPos=-10.115 fActPosition=-10.11 time=0.000002
2021/05/25 14:01:38.347 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:38.347 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:38.347 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:38.347 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:38.347 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64135 fPos=-9.65 fActPosition=-9.66 time=0.000002
2021/05/25 14:01:38.347 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65521 fPos=-10.1 fActPosition=-10.11 time=0.000002
2021/05/25 14:01:38.547 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64135 fPos=-9.65 fActPosition=-9.66 time=0.000001
2021/05/25 14:01:38.547 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65521 fPos=-10.1 fActPosition=-10.11 time=0.000002
2021/05/25 14:01:38.947 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:38.947 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:38.947 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:38.947 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:38.947 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64135 fPos=-9.665 fActPosition=-9.66 time=0.000003
2021/05/25 14:01:38.948 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65522 fPos=-10.085 fActPosition=-10.08 time=0.000002
2021/05/25 14:01:39.148 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64135 fPos=-9.665 fActPosition=-9.66 time=0.000001
2021/05/25 14:01:39.148 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65522 fPos=-10.085 fActPosition=-10.08 time=0.000002
2021/05/25 14:01:39.548 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:39.548 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:39.548 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:39.548 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:39.548 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64135 fPos=-9.65 fActPosition=-9.66 time=0.000002
2021/05/25 14:01:39.548 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65521 fPos=-10.1 fActPosition=-10.11 time=0.000002
2021/05/25 14:01:39.948 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:39.948 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:39.948 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:39.948 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:39.949 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64135 fPos=-9.665 fActPosition=-9.66 time=0.000003
2021/05/25 14:01:39.949 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65522 fPos=-10.085 fActPosition=-10.08 time=0.000002
2021/05/25 14:01:40.549 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:40.549 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:40.549 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:40.549 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:40.549 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64136 fPos=-9.68 fActPosition=-9.69 time=0.000003
2021/05/25 14:01:40.549 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65522 fPos=-10.07 fActPosition=-10.08 time=0.000002
2021/05/25 14:01:40.749 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:40.749 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:40.749 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:40.749 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:40.749 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64136 fPos=-9.695 fActPosition=-9.69 time=0.000004
2021/05/25 14:01:40.749 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65523 fPos=-10.055 fActPosition=-10.05 time=0.000003
2021/05/25 14:01:41.350 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:41.350 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:41.350 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:41.350 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:41.750 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:41.750 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:41.750 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:41.750 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:41.750 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64137 fPos=-9.755 fActPosition=-9.72 time=0.000002
2021/05/25 14:01:41.750 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65526 fPos=-9.995 fActPosition=-9.96 time=0.000003
2021/05/25 14:01:41.951 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:41.951 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:41.951 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:41.951 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:41.951 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64139 fPos=-9.785 fActPosition=-9.78 time=0.000002
2021/05/25 14:01:41.951 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65526 fPos=-9.965 fActPosition=-9.96 time=0.000003
2021/05/25 14:01:42.351 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:42.351 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:42.351 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:42.351 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:42.751 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:42.751 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:42.751 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:42.751 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:42.952 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:42.952 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:42.952 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:42.952 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:42.952 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64143 fPos=-9.89 fActPosition=-9.9 time=0.000006
2021/05/25 14:01:42.952 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65529 fPos=-9.86 fActPosition=-9.87 time=0.000002
2021/05/25 14:01:43.152 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:43.152 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:43.152 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:43.152 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:43.152 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64143 fPos=-9.905 fActPosition=-9.9 time=0.000004
2021/05/25 14:01:43.152 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65530 fPos=-9.845 fActPosition=-9.84 time=0.000002
2021/05/25 14:01:43.552 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:43.552 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:43.552 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:43.552 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:43.552 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64145 fPos=-9.935 fActPosition=-9.96 time=0.000003
2021/05/25 14:01:43.552 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65530 fPos=-9.815 fActPosition=-9.84 time=0.000002
2021/05/25 14:01:43.752 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:43.752 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:43.752 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:43.753 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:43.953 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64145 fPos=-9.965 fActPosition=-9.96 time=0.000001
2021/05/25 14:01:43.953 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65532 fPos=-9.785 fActPosition=-9.78 time=0.000002
2021/05/25 14:01:44.353 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:44.353 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:44.353 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:44.353 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:44.353 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64147 fPos=-9.995 fActPosition=-10.02 time=0.000002
2021/05/25 14:01:44.353 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65532 fPos=-9.755 fActPosition=-9.78 time=0.000002
2021/05/25 14:01:44.553 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:44.553 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:44.553 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:44.553 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:44.754 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64147 fPos=-10.025 fActPosition=-10.02 time=0.000002
2021/05/25 14:01:44.754 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65534 fPos=-9.725 fActPosition=-9.72 time=0.000002
2021/05/25 14:01:45.354 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:45.354 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:45.354 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:45.354 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:45.354 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64148 fPos=-10.025 fActPosition=-10.05 time=0.000003
2021/05/25 14:01:45.354 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65533 fPos=-9.725 fActPosition=-9.75 time=0.000002
2021/05/25 14:01:45.554 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:45.554 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:45.554 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:45.554 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:45.554 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64148 fPos=-10.04 fActPosition=-10.05 time=0.000003
2021/05/25 14:01:45.554 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65534 fPos=-9.71 fActPosition=-9.72 time=0.000003
2021/05/25 14:01:45.754 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:45.755 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:45.755 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:45.755 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:45.755 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64147 fPos=-10.04 fActPosition=-10.02 time=0.000002
2021/05/25 14:01:45.755 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65535 fPos=-9.71 fActPosition=-9.69 time=0.000002
2021/05/25 14:01:45.955 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:45.955 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:45.955 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:45.955 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:45.955 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64148 fPos=-10.055 fActPosition=-10.05 time=0.000002
2021/05/25 14:01:45.955 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65535 fPos=-9.695 fActPosition=-9.69 time=0.000002
2021/05/25 14:01:46.755 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:46.755 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:46.755 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:46.755 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:46.756 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64148 fPos=-10.04 fActPosition=-10.05 time=0.000003
2021/05/25 14:01:46.756 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65534 fPos=-9.71 fActPosition=-9.72 time=0.000003
2021/05/25 14:01:46.956 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:46.956 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:46.956 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:46.956 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:47.156 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:47.156 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:47.156 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:47.156 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:47.356 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64148 fPos=-10.055 fActPosition=-10.05 time=0.000002
2021/05/25 14:01:47.356 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65535 fPos=-9.695 fActPosition=-9.69 time=0.000002
2021/05/25 14:01:48.157 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:48.157 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:48.157 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:48.157 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:48.157 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64149 fPos=-10.07 fActPosition=-10.08 time=0.000002
2021/05/25 14:01:48.157 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65535 fPos=-9.68 fActPosition=-9.69 time=0.000002
2021/05/25 14:01:48.357 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64149 fPos=-10.07 fActPosition=-10.08 time=0.000001
2021/05/25 14:01:48.357 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65535 fPos=-9.68 fActPosition=-9.69 time=0.000002
2021/05/25 14:01:48.557 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:48.557 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:48.557 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:48.557 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:49.358 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:49.358 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:49.358 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:49.358 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:49.758 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:49.758 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:49.758 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:49.758 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:50.358 [motorRecord.cc:1458 IOC_TEST:Axis1] process:---------------------- begin reason=1
2021/05/25 14:01:50.358 [motorRecord.cc:1734 IOC_TEST:Axis1] (stopped) dmov==TRUE; no DLY; pp=0 udf=0 stat=0 sevr=0 mip=0x0('')
2021/05/25 14:01:50.358 [motorRecord.cc:2462 IOC_TEST:Axis1] do_work: begin udf=0 stat=0 nsta=0 mip=0x0('')
2021/05/25 14:01:50.358 [motorRecord.cc:1842 IOC_TEST:Axis1] process:---------------------- end
2021/05/25 14:01:50.358 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=64149 fPos=-10.07 fActPosition=-10.08 time=0.000002
2021/05/25 14:01:50.359 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=0 wf=0 ENC=65535 fPos=-9.68 fActPosition=-9.69 time=0.000003
2021/05/25 14:01:50.559 ecmcMotorRecord:: poll(3) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=64149 fPos=-10.07 fActPosition=-10.08 time=0.000002
2021/05/25 14:01:50.559 ecmcMotorRecord:: poll(4) mvnNRdy=1 bBusy=1 bExecute=0 bEnabled=1 atTarget=1 wf=0 ENC=65535 fPos=-9.68 fActPosition=-9.69 time=0.000002
